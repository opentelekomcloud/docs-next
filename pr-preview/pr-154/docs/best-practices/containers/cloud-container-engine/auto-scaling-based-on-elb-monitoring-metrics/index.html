<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Auto Scaling Based on ELB Monitoring Metrics | Architecture Center</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-154/img/open-telekom-cloud-social-card.png"><meta data-rh="true" name="twitter:image" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-154/img/open-telekom-cloud-social-card.png"><meta data-rh="true" property="og:url" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Auto Scaling Based on ELB Monitoring Metrics | Architecture Center"><meta data-rh="true" name="description" content="By default, Kubernetes scales a workload based on resource usage metrics"><meta data-rh="true" property="og:description" content="By default, Kubernetes scales a workload based on resource usage metrics"><link data-rh="true" rel="icon" href="/docs-next/pr-preview/pr-154/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics"><link data-rh="true" rel="alternate" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics" hreflang="en"><link data-rh="true" rel="alternate" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/docs-next/pr-preview/pr-154/blog/rss.xml" title="Architecture Center RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs-next/pr-preview/pr-154/blog/atom.xml" title="Architecture Center Atom Feed">



<link rel="preconnect" href="https://analytics.example.de">
<script async defer="defer" src="https://analytics.example.de/script.js" data-website-id="00000" data-host-url="https://analytics.example.de" data-auto-track data-do-not-track data-cache data-domains="opentelekomcloud.github.io"></script><link rel="stylesheet" href="/docs-next/pr-preview/pr-154/assets/css/styles.9f5e5da9.css">
<script src="/docs-next/pr-preview/pr-154/assets/js/runtime~main.8dafea8d.js" defer="defer"></script>
<script src="/docs-next/pr-preview/pr-154/assets/js/main.8b9216e8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs-next/pr-preview/pr-154/"><div class="navbar__logo"><img src="/docs-next/pr-preview/pr-154/img/logo_headline_kombination_m_s_m.png" alt="Open Telekom Cloud Non-Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs-next/pr-preview/pr-154/img/logo_headline_kombination_m_w_m.png" alt="Open Telekom Cloud Non-Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs-next/pr-preview/pr-154/docs/best-practices/">Best Practices</a><a class="navbar__item navbar__link" href="/docs-next/pr-preview/pr-154/docs/blueprints/">Blueprints</a></div><div class="navbar__items navbar__items--right"><a href="https://auth.otc.t-systems.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--terminal-link" aria-label="Open Telekom Cloud Console"></a><a href="https://github.com/opentelekomcloud/docs-next" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--github-link" aria-label="GitHub"></a><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_dCNk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs-next/pr-preview/pr-154/docs/best-practices/">Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://docs.otc.t-systems.com/application-operations-management/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">Application Services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://docs.otc.t-systems.com/cloud-search-service/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">Big Data &amp; Data Analysis</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://docs.otc.t-systems.com/auto-scaling/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">Computing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a href="https://docs.otc.t-systems.com/application-service-mesh/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true">Containers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://docs.otc.t-systems.com/application-service-mesh/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0">Application Service Mesh</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/issue-an-acme-certificate-with-dns01-solver-in-cce">Cloud Container Engine</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/issue-an-acme-certificate-with-dns01-solver-in-cce">Issue an ACME Certificate with DNS01 Solver in CCE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics">Auto Scaling Based on ELB Monitoring Metrics</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/migrating-from-other_clouds-to-cce">Migrating Clusters from Other Clouds to CCE</a><button aria-label="Expand sidebar category &#x27;Migrating Clusters from Other Clouds to CCE&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a href="https://docs.otc.t-systems.com/cloud-container-engine/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">📚 Go to Help Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://docs.otc.t-systems.com/cloud-container-instance/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0">Cloud Container Instance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/software-repository/migrating-container-images">Software Repository for Container</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-next/pr-preview/pr-154/docs/best-practices/databases/distributed-cache-service/using-nginx-for-public-access-to-single-node-master-standby-or-proxy-cluster-dcs-redis-instances">Databases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://docs.otc.t-systems.com/application-performance-management/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">Management &amp; Deployment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://docs.otc.t-systems.com/direct-connect/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">Networking</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://docs.otc.t-systems.com/anti-ddos/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">Security Services</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://docs.otc.t-systems.com/cloud-backup-recovery/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false">Storage</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs-next/pr-preview/pr-154/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Containers</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cloud Container Engine</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Auto Scaling Based on ELB Monitoring Metrics</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Auto Scaling Based on ELB Monitoring Metrics</h1>
<p>By default, Kubernetes scales a workload based on resource usage metrics
such as CPU and memory. However, this mechanism cannot reflect the
real-time resource usage when traffic bursts arrive, because the
collected CPU and memory usage data lags behind the actual load balancer
traffic metrics. For some services (such as flash sale and social media)
that require fast auto scaling, scaling based on this rule may not be
performed in a timely manner and cannot meet these services&#x27; actual
needs. In this case, auto scaling based on ELB QPS data can respond to
service requirements more timely.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="solution-design">Solution Design<a class="hash-link" aria-label="Direct link to Solution Design" title="Direct link to Solution Design" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#solution-design">​</a></h2>
<p>This section describes an auto scaling solution based on ELB monitoring
metrics. Compared with CPU/memory usage-based auto scaling, auto scaling
based on ELB QPS data is more targeted and timely.</p>
<p>The key of this solution is to obtain the ELB metric data and report the
data to Prometheus, convert the data in Prometheus to the metric data
that can be identified by HPA, and then perform auto scaling based on
the converted data.</p>
<p>The implementation scheme is as follows:</p>
<ul>
<li>Develop a Prometheus exporter to obtain ELB metric data</li>
<li>Convert the data into the format required by Prometheus</li>
<li>Report it to Prometheus.</li>
<li>Convert the Prometheus data into the Kubernetes metric API for the HPA controller to use.</li>
<li>Set an HPA rule to use ELB monitoring data as auto scaling metrics.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This section uses <a href="https://github.com/akyriako/cloudeye-exporter" target="_blank" rel="noopener noreferrer">cloudeye-exporter</a> as an example.</p></div></div>
<p><img decoding="async" loading="lazy" alt="Figure 1 ELB traffic flows and monitoring
data" src="/docs-next/pr-preview/pr-154/assets/images/en-us_image_0000001160642449-2c86ff97112c5a6e54850807f5c15d5d.png" width="2680" height="1594" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Other metrics can be collected in the similar way.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#prerequisites">​</a></h2>
<ol>
<li>You must be familiar with Prometheus and be able to write the Prometheus exporter.</li>
<li>You have the Cloud Native Cluster Monitoring add-on installed in your cluster. This add-on supports clusters <strong>of v1.17 or later</strong>.</li>
<li>Set the deployment mode of Cloud Native Cluster Monitoring to the <code>server mode</code>.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-exporter-image">Building the Exporter Image<a class="hash-link" aria-label="Direct link to Building the Exporter Image" title="Direct link to Building the Exporter Image" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#building-the-exporter-image">​</a></h2>
<p>This section uses <a href="https://github.com/akyriako/cloudeye-exporter" target="_blank" rel="noopener noreferrer">cloudeye-exporter</a> to
monitor load balancer metrics.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-buildpacks">Installing Buildpacks<a class="hash-link" aria-label="Direct link to Installing Buildpacks" title="Direct link to Installing Buildpacks" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#installing-buildpacks">​</a></h3>
<p>In this tutorial we build the image wite the help of <a href="https://buildpacks.io/" target="_blank" rel="noopener noreferrer">Buildpacks</a>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>With this approach we are building an OCI image which is
compatible whit almost all of the container runtimes which support
OCI. In addition the image can also be build with Dockerfile and
docker build.</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">git clone https://github.com/akyriako/cloudeye-exporter</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">curl -sSL &quot;https://github.com/buildpacks/pack/releases/download/v0.32.1/pack-v0.32.1-linux.tgz&quot; | sudo tar -C /usr/local/bin/ --no-same-owner -xzv pack</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-image">Building the image<a class="hash-link" aria-label="Direct link to Building the image" title="Direct link to Building the image" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#building-the-image">​</a></h3>
<p>The image name is <code>cloudeye-exporter</code> and the image version is <code>1.0</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">cd cloudeye-exporter</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">pack build cloudeye-exporter:v1 --builder gcr.io/buildpacks/builder:v1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pushing-the-image-to-swr">Pushing the image to SWR<a class="hash-link" aria-label="Direct link to Pushing the image to SWR" title="Direct link to Pushing the image to SWR" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#pushing-the-image-to-swr">​</a></h3>
<ol>
<li>
<p>(Optional) Log in to the <em>SWR console</em>, choose <em>Organizations</em>
in the navigation pane, and click <em>Create Organization</em> in the
upper right corner of the page.</p>
</li>
<li>
<p>In the navigation pane, choose <em>My Images</em> and then click
<em>Upload Through Client</em>. On the page displayed, click
<em>Generate a temporary login command</em> and click
<img decoding="async" loading="lazy" alt="image1" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACqSURBVDhPY/jy9dt/auJRA6H447v/L16+wovffMSiD4ixGvhgZ9f/8vJyvLhr5yMMfSCM1cAPDy/9P3nyFHa8d97/JkIGPjk47X9TUxMReNX/Cw93/e8iZCDMi1VYDYHiKpBX5/0/Q7yBXf93PsRUAMMQNaMGYlFHuoFPD/2fBoykaQefYVVHuoFY5JAxLQ0kMh2iGYCOwQaSlFPQDEDHYAOpiQe7gd/+AwBIw9kI+PIQ4wAAAABJRU5ErkJggg==" width="20" height="21" class="img_ev3q"> to
copy the command.</p>
</li>
<li>
<p>Run the login command copied in the previous step on the cluster
node. If the login is successful, the message &quot;Login
Succeeded&quot; is displayed.</p>
</li>
<li>
<p>Tag the <code>cloudeye-exporter</code> image.</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">**docker tag** *{Image name 1*:*Tag 1}*/*{Image repository address}*/*{Organization name}*/*{Image name 2*:*Tag 2}* </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>{Image name 1:Tag 1}</code>: name and tag of the local image to be uploaded.</li>
<li><code>{Image repository address}</code>: The domain name at the end of the login command in is the image repository address, which can be obtained on the SWR console.</li>
<li><code>{Organization name}</code>: name of the organization created in.</li>
<li><code>{Image name 2:Tag 2}</code>: desired image name and tag to be displayed on the SWR console.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Example</div><div class="admonitionContent_BuS1"><p><code>docker tag cloudeye-exporter:1.0 swr.eu-de.otc.t-systems.com/cloud-develop/cloudeye-exporter:1.0</code></p></div></div>
<ol start="5">
<li>Pushing the image to the image repository.</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">**docker push** *{Image repository address}*/*{Organizationname}*/*{Image name 2:Tag 2}*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Example</div><div class="admonitionContent_BuS1"><p><code>docker push swr.eu-de.otc.t-systems.com/cloud-develop/cloudeye-exporter:1.0</code></p></div></div>
<p>The following information will be returned upon a successful push:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">The push refers to repository [swr.eu-de.otc.t-systems.com/cloud-develop/cloudeye-exporter]</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">030***: Pushed</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">v1.0: digest: sha256:eb7e3bbd*** size: **</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To view the pushed image, go to the SWR console and refresh the <em>My Images</em> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-prometheusgrafana-stack--cloudeye-exporter-artifacts">Installing Prometheus/Grafana Stack &amp; cloudeye-exporter artifacts<a class="hash-link" aria-label="Direct link to Installing Prometheus/Grafana Stack &amp; cloudeye-exporter artifacts" title="Direct link to Installing Prometheus/Grafana Stack &amp; cloudeye-exporter artifacts" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#installing-prometheusgrafana-stack--cloudeye-exporter-artifacts">​</a></h2>
<p>Install Prometheus/Grafana stack via the kube-prometheus-stack chart.
The configuration values used will be autogenerated at
<strong>deploy/manifests/prometheus-stack/override.yaml</strong>. You could diff them
with the default values <strong>default.yaml</strong> to figure out the changes.</p>
<p>Run <code>./install-stack.sh</code>. This script will deploy, besides the
<strong>kube-prometheus-stack</strong>, all the <strong>cloudeye-exporter</strong> related artifacts.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-the-exporter">Deploying the Exporter<a class="hash-link" aria-label="Direct link to Deploying the Exporter" title="Direct link to Deploying the Exporter" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#deploying-the-exporter">​</a></h2>
<p>Prometheus can dynamically monitor pods if you add Prometheus
annotations to the pods (the default path is <code>/metrics</code>). This section
uses <a href="https://github.com/akyriako/cloudeye-exporter" target="_blank" rel="noopener noreferrer">cloudeye-exporter</a>
as an example.</p>
<p>Common annotations in Prometheus are as follows:</p>
<ul>
<li><code>prometheus.io/scrape</code>: If the value is <code>true</code>, the pod will bemonitored.</li>
<li><code>prometheus.io/path</code>: URL from which the data is collected. The default value is <code>/metrics</code>.</li>
<li><code>prometheus.io/port</code>: port number of the endpoint to collect data from.</li>
<li><code>prometheus.io/scheme</code>: Defaults to <code>http</code>. If HTTPS is configured for security purposes, change the value to <code>https</code>.</li>
</ul>
<ol>
<li>
<p>Use kubectl to connect to the cluster.</p>
</li>
<li>
<p>Create a secret, which will be used by <strong>cloudeye-exporter</strong> for
authentication.</p>
<p>a.  Create a copy of clouds.tpl template, name it <strong>clouds.yml</strong>
file with the following content:</p>
<ul>
<li><code>auth_url</code>: indicates the IAM endpoint, which can be obtained from <a href="https://docs.otc.t-systems.com/en-us/endpoint/index.html" target="_blank" rel="noopener noreferrer">Regions and Endpoints</a>.</li>
<li><code>project_name</code>: indicates the project name. On the <em>My Credential</em> page, view the project name and project ID in the <em>Projects</em> area.</li>
<li><code>access_key</code> and <code>secret_key</code>: You can obtain them from <em>Access Keys</em>.</li>
<li><code>region</code>: indicates the region name, which must correspond to the project in <code>project_name</code>.</li>
</ul>
<p>b.  Then encode it to base64 with the following command:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">base64 -i clouds.yaml </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>c.  Create the <strong>cloudeye-exporter-clouds-secret.yaml</strong> file with
the following content:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockTitle_Ktv7">cloudeye-exporter-clouds-secret.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Secret</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> cloudeye</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">exporter</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">clouds</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">namespace</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Opaque</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">data</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">clouds.yaml</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Z2xvYmFsOg</span><span class="token important" style="color:hsl(220, 14%, 71%);font-weight:bold">************************************************************</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>d.  Create secret and deploy the exporter.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl apply -f cloudeye-exporter-clouds-secret.yaml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl apply -f cloudeye-exporter-clouds-secret.yaml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl apply -f cloudeye-exporter-clouds-secret.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-elb-and-elb-listener-ids">Getting ELB and ELB Listener IDs<a class="hash-link" aria-label="Direct link to Getting ELB and ELB Listener IDs" title="Direct link to Getting ELB and ELB Listener IDs" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#getting-elb-and-elb-listener-ids">​</a></h2>
<p>In this example, the ELB metrics associated with the workload need to be
monitored. Therefore, the target workload must use the Service or
Ingress of the <code>LoadBalancer</code> type.</p>
<ol>
<li>
<p>View the access mode of the workload to be monitored and obtain the
ELB ID and ELB listener ID.</p>
<p>a.  On the CCE cluster console, choose <em>Networking</em>. On the
<em>Services</em> or <em>Ingresses</em> tab page, view the Service or
Ingress of the <code>LoadBalancer</code> type and click the load balancer
to access the load balancer page and copy the ELB ID.</p>
<p><img decoding="async" loading="lazy" alt="image2" src="/docs-next/pr-preview/pr-154/assets/images/en-us_image_0000001431432309-f6d88205377fb0bf73570be4219097ae.png" width="1182" height="231" class="img_ev3q"></p>
<p>b.  On the <em>Listeners</em> tab, view the listener corresponding to the
workload and copy the listener ID which corresponds to port <code>80</code>.</p>
<p><img decoding="async" loading="lazy" alt="image3" src="/docs-next/pr-preview/pr-154/assets/images/en-us_image_0000001380992506-4d5619a715514bf7525bb634554ee347.png" width="2464" height="640" class="img_ev3q"></p>
</li>
<li>
<p>Export the Elastic Load Balancer&#x27;s ID and listener ID as an env
variables</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">export ELB_ID=&quot;66872*****&quot;</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">export ELB_LISTENER_ID=&quot;94424*****&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-nginx-ingress-controller">Installing Nginx Ingress Controller<a class="hash-link" aria-label="Direct link to Installing Nginx Ingress Controller" title="Direct link to Installing Nginx Ingress Controller" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#installing-nginx-ingress-controller">​</a></h2>
<p>Next, we are going to install the Nginx Ingress Controller using the
script <strong>./install-ingress.sh</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockTitle_Ktv7">install-ingress.sh</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">envsubst &lt; nginx-ingress-controller/override.tpl  nginx-ingress-controller/override.yaml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">sleep 15</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">helm upgrade --install -f nginx-ingress-controller/override.yaml --install ingress-nginx ingress-nginx \</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">--repo https://kubernetes.github.io/ingress-nginx --namespace ingress-nginx --create-namespace</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-an-nginx-demo-workload">Installing an Nginx Demo Workload<a class="hash-link" aria-label="Direct link to Installing an Nginx Demo Workload" title="Direct link to Installing an Nginx Demo Workload" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#installing-an-nginx-demo-workload">​</a></h2>
<p>We are going to need a workload to test <strong>HPA</strong> and the autoscaling via our
custom <strong>CloudEye</strong> derived metrics. For that matter we will deploy a dummy
nginx deployment and service using the script <strong>./install-workload.sh</strong>:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl create namespace applications</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl apply -f deploy/manifests/nginx-deployment.yaml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl apply -f deploy/manifests/nginx-ingress.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-prometheus-adapter">Installing prometheus-adapter<a class="hash-link" aria-label="Direct link to Installing prometheus-adapter" title="Direct link to Installing prometheus-adapter" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#installing-prometheus-adapter">​</a></h2>
<p>Next, and last step, of the installation sequence is the deployment of
<strong>prometheus-adapter</strong> that will give an additional custom metrics api
endpoint that will bind our custom <strong>CloudEye</strong> metrics with <strong>HPA</strong>
<strong>./install-adapter.sh</strong>:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockTitle_Ktv7">install-adapter.sh</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">envsubst &lt; prometheus-adapter/override.tpl  prometheus-adapter/override.yaml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">sleep 15</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">helm repo add prometheus-community https://prometheus-community.github.io/helm-charts</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">helm repo update</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">helm upgrade --install --values prometheus-adapter/override.yaml prometheus-adapter prometheus-community/prometheus-adapter -n monitoring</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The configuration values used for the prometheus-adapter chart will be
autogenerated at <strong>deploy/manifests/prometheus-adapter/override.yaml</strong>. You
could diff them with the default values <strong>default.yaml</strong> to figure out the
changes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-hpa-policy">Creating an HPA Policy<a class="hash-link" aria-label="Direct link to Creating an HPA Policy" title="Direct link to Creating an HPA Policy" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#creating-an-hpa-policy">​</a></h2>
<p>After the data reported by the exporter to Prometheus is converted into
the Kubernetes metric API by using the Prometheus adapter, you can
create an HPA policy for auto scaling.</p>
<ol>
<li>
<p>Create an HPA policy. The inbound traffic of the ELB load balancer
is used to trigger scale-out. When the value of <code>m7_in_Bps</code>
(inbound traffic rate) exceeds <code>1000</code>, the nginx Deployment will be
scaled.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> autoscaling/v2</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> HorizontalPodAutoscaler</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">namespace</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">spec</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">scaleTargetRef</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> nginx</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">minReplicas</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">maxReplicas</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metrics</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Object</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">object</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metric</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> elb01_listener_m7_in_Bps</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">describedObject</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Service</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> cloudeye</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">exporter</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">target</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Value</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">          </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">value</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">1000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="Figure 2 Created HPA Policy" src="/docs-next/pr-preview/pr-154/assets/images/en-us_image_0000001606847653-fa31af0c30cd700e2fee1dca63f50408.png" width="2165" height="391" class="img_ev3q"></p>
</li>
<li>
<p>After the HPA policy is created, perform a pressure test on the
workload (accessing the pods through ELB). Then, the HPA controller
determines whether scaling is required based on the configured
value.</p>
<p>In the <em>Events</em> dialog box, obtain scaling records in the <em>Kubernetes Event</em> column.</p>
<p><img decoding="async" loading="lazy" alt="Figure 3 Scaling events" src="/docs-next/pr-preview/pr-154/assets/images/en-us_image_0000001606845825-2fc64d535bb9bfd1030c7b034f7f2a99.png" width="1339" height="511" class="img_ev3q"></p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix">Appendix<a class="hash-link" aria-label="Direct link to Appendix" title="Direct link to Appendix" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#appendix">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="elb-listener-metrics">ELB Listener Metrics<a class="hash-link" aria-label="Direct link to ELB Listener Metrics" title="Direct link to ELB Listener Metrics" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#elb-listener-metrics">​</a></h3>
<p>The following table lists the Elastic Load Balancer Listener metrics that can be collected
using the method described in sections above.</p>
<table><thead><tr><th>Metric</th><th>Name</th><th>Unit</th><th>Description</th></tr></thead><tbody><tr><td><code>m1_cps</code></td><td>Concurrent Connections</td><td>Count</td><td>Number of concurrent connections processed by a load balance</td></tr><tr><td><code>m1e_server_rps</code></td><td>Reset Packets from Backend Servers</td><td>Count/Second</td><td>Number of reset packets sent from the backend server to clients. These reset packages are generated by the backend server and then forwarded by load balancers.</td></tr><tr><td><code>m1f_lvs_rps</code></td><td>Reset Packets from Load Balancers</td><td>Count/Second</td><td>Number of reset packets sent from load balancers.</td></tr><tr><td><code>m21_client_rps</code></td><td>Reset Packets from Clients</td><td>Count/Second</td><td>Number of reset packets sent from clients to the backend server. These reset packages are generated by the clients and then forwarded by load balancers.</td></tr><tr><td><code>m22_in_bandwidth</code></td><td>Inbound Bandwidth</td><td>bit/s</td><td>Inbound bandwidth of a load balancer.</td></tr><tr><td><code>m23_out_bandwidth</code></td><td>Outbound Bandwidth</td><td>bit/s</td><td>Outbound bandwidth of a load balancer.</td></tr><tr><td><code>m2_act_conn</code></td><td>Active Connections</td><td>Count</td><td>Number of current active connections.</td></tr><tr><td><code>m3_inact_conn</code></td><td>Inactive Connections</td><td>Count</td><td>Number of current inactive connections.</td></tr><tr><td><code>m4_ncps</code></td><td>New Connections</td><td>Count</td><td>Number of current new connections.</td></tr><tr><td><code>m5_in_pps</code></td><td>Incoming Packets</td><td>Count</td><td>Number of packets sent to a load balancer.</td></tr><tr><td><code>m6_out_pps</code></td><td>Outgoing Packets</td><td>Count</td><td>Number of packets sent from a load balancer.</td></tr><tr><td><code>m7_in_Bps</code></td><td>Inbound Rate</td><td>byte/s</td><td>Number of incoming bytes per second on a load balancer.</td></tr><tr><td><code>m8_out_Bps</code></td><td>Outbound Rate</td><td>byte/s</td><td>Number of outgoing bytes per second on a load balancer.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="developing-an-exporter">Developing an Exporter<a class="hash-link" aria-label="Direct link to Developing an Exporter" title="Direct link to Developing an Exporter" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#developing-an-exporter">​</a></h3>
<p>Prometheus periodically calls the <code>/metrics</code> API of the exporter to obtain metric data. Applications only need to report monitoring data
through <code>/metrics</code>. You can select a Prometheus client in a desired language and integrate it into applications to implement the
<code>/metrics</code> API. For details about the client, see <a href="https://prometheus.io/docs/instrumenting/clientlibs/" target="_blank" rel="noopener noreferrer">Prometheus Client Libraries</a>. For
details about how to write the exporter, see <a href="https://prometheus.io/docs/instrumenting/writing_exporters/" target="_blank" rel="noopener noreferrer">Writing Exporters</a>.</p>
<p>The monitoring data must be in the format that Prometheus supports. Each
data record provides the ELB ID, listener ID, namespace where the
Service is located, Service name, and Service UID as labels, as shown in
the following figure.</p>
<p><img decoding="async" loading="lazy" alt="image5" src="/docs-next/pr-preview/pr-154/assets/images/en-us_image_0000001381152106-c0afc526298384aa11a22dfa95af734e.png" width="1452" height="227" class="img_ev3q"></p>
<p>To obtain the preceding data, perform the following steps:</p>
<ol>
<li>
<p>Obtain all Services.</p>
<p>The <code>annotations</code> field in the returned information contains the
ELB associated with the Service.</p>
<ul>
<li><code>kubernetes.io/elb.id</code></li>
<li><code>kubernetes.io/elb.class</code></li>
</ul>
</li>
<li>
<p>Use APIs in Querying Listeners to get the listener ID based on the
load balancer ID obtained in the previous step.</p>
</li>
<li>
<p>Obtain the ELB monitoring data.</p>
<p>The ELB monitoring data is obtained using the CES APIs described in
Querying Monitoring Data in Batches. For details about ELB
monitoring metrics, see Monitoring Metrics. Example:</p>
<ul>
<li><code>m1_cps</code>: number of concurrent connections</li>
<li><code>m5_in_pps</code>: number of incoming data packets</li>
<li><code>m6_out_pps</code>: number of outgoing data packets</li>
<li><code>m7_in_Bps</code>: incoming rate</li>
<li><code>m8_out_Bps</code>: outgoing rate</li>
</ul>
</li>
<li>
<p>Aggregate data in the format that Prometheus supports and expose the
data through the <code>/metrics</code> API.</p>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-154/docs/tags/cce">cce</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-154/docs/tags/elb">elb</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-154/docs/tags/hpa">hpa</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-154/docs/tags/prometheus">prometheus</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-154/docs/tags/prometheus-exporter">prometheus-exporter</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-154/docs/tags/prometheus-adapter">prometheus-adapter</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-154/docs/tags/metrics">metrics</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-154/docs/tags/cloudeye">cloudeye</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-154/docs/tags/swr">swr</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/opentelekomcloud/docs-next/tree/main/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/issue-an-acme-certificate-with-dns01-solver-in-cce"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Issue an ACME Certificate with DNS01 Solver in CCE</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/migrating-from-other_clouds-to-cce"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Migrating Clusters from Other Clouds to CCE</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#solution-design">Solution Design</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#prerequisites">Prerequisites</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#building-the-exporter-image">Building the Exporter Image</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#installing-buildpacks">Installing Buildpacks</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#building-the-image">Building the image</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#pushing-the-image-to-swr">Pushing the image to SWR</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#installing-prometheusgrafana-stack--cloudeye-exporter-artifacts">Installing Prometheus/Grafana Stack &amp; cloudeye-exporter artifacts</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#deploying-the-exporter">Deploying the Exporter</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#getting-elb-and-elb-listener-ids">Getting ELB and ELB Listener IDs</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#installing-nginx-ingress-controller">Installing Nginx Ingress Controller</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#installing-an-nginx-demo-workload">Installing an Nginx Demo Workload</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#installing-prometheus-adapter">Installing prometheus-adapter</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#creating-an-hpa-policy">Creating an HPA Policy</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#appendix">Appendix</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#elb-listener-metrics">ELB Listener Metrics</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs-next/pr-preview/pr-154/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics#developing-an-exporter">Developing an Exporter</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="align-items-center" style="margin:0 0 0 32px"><div class="col-10 text-right"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Help Center</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/products-services/roadmap" target="_blank" rel="noopener noreferrer" class="footer__link-item">Portfolio Roadmap</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/products-services/core-services/certifications" target="_blank" rel="noopener noreferrer" class="footer__link-item">Core Services Certifications</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://community.open-telekom-cloud.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Forums</a></li><li class="footer__item"><a href="https://www.youtube.com/watch?v=U-x2gEy3968&amp;list=PLS60dhorR-hgQ5n5L1boEQh0oVD-_k75p" target="_blank" rel="noopener noreferrer" class="footer__link-item">Webinars<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://medium.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/sdk.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDKs</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/drivers.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Drivers &amp; Tools</a></li><li class="footer__item"><a href="https://registry.terraform.io/providers/opentelekomcloud/opentelekomcloud/latest/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terraform Provider</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/ansible-collection-cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ansible Collections</a></li><li class="footer__item"><a href="https://designer.otc-service.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud Create</a></li></ul></div><div class="col footer__col"><div class="footer__title">API</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/api.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">REST API</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/api_guidelines/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">REST API Usage Guidelines</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/regions-and-endpoints/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Endpoints</a></li><li class="footer__item"><a href="https://status.otc-service.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status Dashboard</a></li></ul></div></div></div></div></div><scale-telekom-footer type="minimal"><scale-telekom-footer-content><span slot="notice">© T-Systems International GmbH 2024 (v0.1.PR154-88-6847e2b-ephemeral)</span><ul slot="navigation"><li><a href="https://open-telekom-cloud.com/en/contact"> Contact </a></li><li><a href="https://open-telekom-cloud.com/en/data-protection"> Data privacy </a></li><li><a href="https://open-telekom-cloud.com/en/disclaimer-of-liability"> Disclaimer of liabilities </a></li><li><a href="https://open-telekom-cloud.com/en/imprint"> Imprint </a></li></ul></scale-telekom-footer-content></scale-telekom-footer></footer></div>
</body>
</html>