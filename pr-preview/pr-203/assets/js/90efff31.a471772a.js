"use strict";(self.webpackChunkdocs_next=self.webpackChunkdocs_next||[]).push([[55661],{51143:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"best-practices/application-services/distributed-message-service/improving-kafka-message-processing-efficiency","title":"Improving Kafka Message Processing Efficiency","description":"During message sending and consumption, Distributed Message Service (DMS) for Kafka, producers, and consumers collaborate to ensure service reliability. In addition, efficiency and accuracy of message sending and consumption improves when developers make proper use of DMS for Kafka topics.","source":"@site/docs/best-practices/application-services/distributed-message-service/improving-kafka-message-processing-efficiency.md","sourceDirName":"best-practices/application-services/distributed-message-service","slug":"/best-practices/application-services/distributed-message-service/improving-kafka-message-processing-efficiency","permalink":"/docs-next/pr-preview/pr-203/docs/best-practices/application-services/distributed-message-service/improving-kafka-message-processing-efficiency","draft":false,"unlisted":false,"editUrl":"https://github.com/opentelekomcloud/docs-next/tree/main/docs/best-practices/application-services/distributed-message-service/improving-kafka-message-processing-efficiency.md","tags":[{"inline":true,"label":"kafka","permalink":"/docs-next/pr-preview/pr-203/docs/tags/kafka"},{"inline":true,"label":"dms","permalink":"/docs-next/pr-preview/pr-203/docs/tags/dms"}],"version":"current","frontMatter":{"id":"improving-kafka-message-processing-efficiency","title":"Improving Kafka Message Processing Efficiency","tags":["kafka","dms"]},"sidebar":"bestPracticesSidebar","previous":{"title":"Migrating Kafka Services","permalink":"/docs-next/pr-preview/pr-203/docs/best-practices/application-services/distributed-message-service/migrating-kafka-services"},"next":{"title":"Optimizing Consumer Polling","permalink":"/docs-next/pr-preview/pr-203/docs/best-practices/application-services/distributed-message-service/optimizing-consumer-polling"}}');var o=n(74848),a=n(28453);const t={id:"improving-kafka-message-processing-efficiency",title:"Improving Kafka Message Processing Efficiency",tags:["kafka","dms"]},r="Improving Kafka Message Processing Efficiency",c={},d=[{value:"Acknowledging Message Production and Consumption",id:"acknowledging-message-production-and-consumption",level:2},{value:"Message Production",id:"message-production",level:3},{value:"Message consumption",id:"message-consumption",level:3},{value:"Idempotent Transferring of Message Production and Consumption",id:"idempotent-transferring-of-message-production-and-consumption",level:2},{value:"Producing and Consuming Messages in Batches",id:"producing-and-consuming-messages-in-batches",level:2},{value:"Using Consumer Groups to Facilitate O&amp;M",id:"using-consumer-groups-to-facilitate-om",level:2}];function g(e){const s={br:"br",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"improving-kafka-message-processing-efficiency",children:"Improving Kafka Message Processing Efficiency"})}),"\n",(0,o.jsx)(s.p,{children:"During message sending and consumption, Distributed Message Service (DMS) for Kafka, producers, and consumers collaborate to ensure service reliability. In addition, efficiency and accuracy of message sending and consumption improves when developers make proper use of DMS for Kafka topics."}),"\n",(0,o.jsx)(s.p,{children:"Best practices for message producers and consumers are as follows:"}),"\n",(0,o.jsx)(s.h2,{id:"acknowledging-message-production-and-consumption",children:"Acknowledging Message Production and Consumption"}),"\n",(0,o.jsx)(s.h3,{id:"message-production",children:"Message Production"}),"\n",(0,o.jsx)(s.p,{children:"The producer decides whether to re-send a message based on the DMS for Kafka response."}),"\n",(0,o.jsx)(s.p,{children:"The producer waits for the sending result or asynchronous callback function to determine if the message is successfully sent. If an exception occurs when sending the message, the producer will not receive a success response and must decide whether to re-send the message. If a success response is received, it indicates that the message has been stored in DMS for Kafka."}),"\n",(0,o.jsx)(s.h3,{id:"message-consumption",children:"Message consumption"}),"\n",(0,o.jsx)(s.p,{children:"The consumer acknowledges successful message consumption."}),"\n",(0,o.jsx)(s.p,{children:"The produced messages are sequentially stored in DMS for Kafka. During consumption, messages stored in DMS for Kafka are obtained in sequence. Consumers obtain messages, consume them, and record the status (successful or failed). The status is then submitted to DMS for Kafka."}),"\n",(0,o.jsx)(s.p,{children:"During this process, the message consumption status may not be successfully submitted due to an exception. In this case, the corresponding messages will be re-obtained by the consumer in the next message consumption request."}),"\n",(0,o.jsx)(s.h2,{id:"idempotent-transferring-of-message-production-and-consumption",children:"Idempotent Transferring of Message Production and Consumption"}),"\n",(0,o.jsx)(s.p,{children:"To guarantee lossless messaging, DMS for Kafka implements a series of reliability measures. For example, the message synchronization storage mechanism is used to prevent the system and server from being restarted or powered off. The ACK mechanism is used to deal with exceptions that occur during message transmission."}),"\n",(0,o.jsx)(s.p,{children:"Considering extreme conditions such as network exceptions, you can use DMS for Kafka to design idempotent message transferring in addition to acknowledging message production and consumption."}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"If message sending cannot be acknowledged, the producer needs to re-send the message."}),"\n",(0,o.jsx)(s.li,{children:"After obtaining a message that has been processed, the consumer needs to notify DMS for Kafka that consumption is successful and ensure that the message is not processed repeatedly."}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"producing-and-consuming-messages-in-batches",children:"Producing and Consuming Messages in Batches"}),"\n",(0,o.jsx)(s.p,{children:"It is recommended that messages be sent and consumed in batches to improve efficiency."}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Figure 1"})," Messages being produced and consumed in batches",(0,o.jsx)(s.br,{}),"\n",(0,o.jsx)(s.img,{src:n(73240).A+"",title:"Click to enlarge",width:"910",height:"349"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Figure 2"})," Messages being produced and consumed one by one",(0,o.jsx)(s.br,{}),"\n",(0,o.jsx)(s.img,{src:n(50878).A+"",title:"Click to enlarge",width:"910",height:"349"})]}),"\n",(0,o.jsx)(s.p,{children:"When consuming messages in batches, consumers need to process and acknowledge messages in the sequence of receiving messages. Therefore, when a message in the batch fails to be consumed, the consumer does not need to consume the remaining messages, and can directly submit consumption acknowledgment of the successfully consumed messages."}),"\n",(0,o.jsx)(s.h2,{id:"using-consumer-groups-to-facilitate-om",children:"Using Consumer Groups to Facilitate O&M"}),"\n",(0,o.jsx)(s.p,{children:"You can use DMS for Kafka as a message management system. Reading message content from topics is helpful to fault locating and service debugging."}),"\n",(0,o.jsx)(s.p,{children:"When problems occur during message production and consumption, you can create different consumer groups to locate and analyze problems or debug services for interconnecting with other services. To ensure that other services can continue to process messages in topics, you can create a new consumer group to consume and analyze the messages."})]})}function m(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(g,{...e})}):g(e)}},50878:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/en-us_image_0000001643370172-c9dbedbab1065f2bfef7ad9c3d24c5e4.png"},73240:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/en-us_image_0000001691529441-049eb0f4742092d2f6c399552d2b6dcb.png"},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>r});var i=n(96540);const o={},a=i.createContext(o);function t(e){const s=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);