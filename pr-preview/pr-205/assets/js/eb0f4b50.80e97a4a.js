"use strict";(self.webpackChunkdocs_next=self.webpackChunkdocs_next||[]).push([[36121],{41709:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"blueprints/by-use-case/devops/ci-devtron-swr-cce","title":"Build a CI/CD Pipeline with Devtron, SWR and CCE","description":"This blueprint covers integrating Devtron with Open Telekom Cloud Container Engine (CCE) for efficient CI/CD pipelines. It details installing Devtron in CCE clusters, emphasizing using containerized Masters and dynamic Agents managed by Kubernetes for optimal resource utilization and self-healing. The Master schedules jobs, which Agents execute within Kubernetes pods. This setup enhances security and maintenance efficiency.","source":"@site/docs/blueprints/by-use-case/devops/ci-devtron-swr-cce.md","sourceDirName":"blueprints/by-use-case/devops","slug":"/blueprints/by-use-case/devops/ci-devtron-swr-cce","permalink":"/docs-next/pr-preview/pr-205/docs/blueprints/by-use-case/devops/ci-devtron-swr-cce","draft":false,"unlisted":false,"editUrl":"https://github.com/opentelekomcloud/docs-next/tree/main/docs/blueprints/by-use-case/devops/ci-devtron-swr-cce.md","tags":[{"inline":true,"label":"devops","permalink":"/docs-next/pr-preview/pr-205/docs/tags/devops"},{"inline":true,"label":"ci","permalink":"/docs-next/pr-preview/pr-205/docs/tags/ci"},{"inline":true,"label":"cd","permalink":"/docs-next/pr-preview/pr-205/docs/tags/cd"},{"inline":true,"label":"cicd","permalink":"/docs-next/pr-preview/pr-205/docs/tags/cicd"},{"inline":true,"label":"devtron","permalink":"/docs-next/pr-preview/pr-205/docs/tags/devtron"},{"inline":true,"label":"swr","permalink":"/docs-next/pr-preview/pr-205/docs/tags/swr"},{"inline":true,"label":"cce","permalink":"/docs-next/pr-preview/pr-205/docs/tags/cce"}],"version":"current","frontMatter":{"id":"ci-devtron-swr-cce","title":"Build a CI/CD Pipeline with Devtron, SWR and CCE","tags":["devops","ci","cd","cicd","devtron","swr","cce"]},"sidebar":"blueprintsSidebar","previous":{"title":"DevOps","permalink":"/docs-next/pr-preview/pr-205/docs/blueprints/by-use-case/devops/"},"next":{"title":"Build a CI Pipeline with Jenkins, SWR and CCE","permalink":"/docs-next/pr-preview/pr-205/docs/blueprints/by-use-case/devops/ci-jenkins-swr-cce"}}');var r=i(74848),t=i(28453);const l={id:"ci-devtron-swr-cce",title:"Build a CI/CD Pipeline with Devtron, SWR and CCE",tags:["devops","ci","cd","cicd","devtron","swr","cce"]},o="Build a CI/CD Pipeline with Devtron, SWR and CCE",c={},a=[{value:"What is Devtron?",id:"what-is-devtron",level:2},{value:"Key Features",id:"key-features",level:3},{value:"Architecture",id:"architecture",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installing Devtron on CCE",id:"installing-devtron-on-cce",level:2},{value:"Choosing the Right Installation Option",id:"choosing-the-right-installation-option",level:3},{value:"Installing Devtron with Helm Charts",id:"installing-devtron-with-helm-charts",level:3},{value:"Connecting Devtron to OBS for logging and caching",id:"connecting-devtron-to-obs-for-logging-and-caching",level:3},{value:"Accessing the Devtron Dashboard",id:"accessing-the-devtron-dashboard",level:2},{value:"Connecting Devtron to SWR or other private Registries",id:"connecting-devtron-to-swr-or-other-private-registries",level:2},{value:"Adding a Container Registry",id:"adding-a-container-registry",level:3},{value:"Managing Registry Credentials",id:"managing-registry-credentials",level:3},{value:"Use Registry Credentials",id:"use-registry-credentials",level:4},{value:"Specify Image Pull Secret",id:"specify-image-pull-secret",level:4},{value:"Deploying a Sample Application on Devtron and Building a CI/CD Pipeline",id:"deploying-a-sample-application-on-devtron-and-building-a-cicd-pipeline",level:2},{value:"Testing locally (Optional)",id:"testing-locally-optional",level:3},{value:"Deploying the Application with Devtron",id:"deploying-the-application-with-devtron",level:3},{value:"Creating a new Application",id:"creating-a-new-application",level:4},{value:"Configuring the Git Repository",id:"configuring-the-git-repository",level:4},{value:"Configuring Docker Build",id:"configuring-docker-build",level:4},{value:"Configuring the Deployment Template",id:"configuring-the-deployment-template",level:4},{value:"Creating a CI/CD Workflow",id:"creating-a-cicd-workflow",level:4},{value:"Adding Secrets and/or ConfigMaps",id:"adding-secrets-andor-configmaps",level:4},{value:"Triggering the CI Pipeline",id:"triggering-the-ci-pipeline",level:4},{value:"Fetching the LoadBalancer URL",id:"fetching-the-loadbalancer-url",level:4},{value:"Verifying the Deployment",id:"verifying-the-deployment",level:4},{value:"Conclusion",id:"conclusion",level:4},{value:"Appendix (Review of Advanced Options)",id:"appendix-review-of-advanced-options",level:2},{value:"Build and Deploy from Source Code",id:"build-and-deploy-from-source-code",level:4},{value:"Advanced Options",id:"advanced-options",level:4},{value:"Build Stage",id:"build-stage",level:4},{value:"Source type",id:"source-type",level:4},{value:"Branch Fixed",id:"branch-fixed",level:5},{value:"Branch Regex",id:"branch-regex",level:5},{value:"Pull Request",id:"pull-request",level:5},{value:"Tag Creation",id:"tag-creation",level:5},{value:"Scan for Vulnerabilities",id:"scan-for-vulnerabilities",level:4},{value:"Custom Image Tag Pattern",id:"custom-image-tag-pattern",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"build-a-cicd-pipeline-with-devtron-swr-and-cce",children:"Build a CI/CD Pipeline with Devtron, SWR and CCE"})}),"\n",(0,r.jsx)(n.p,{children:"This blueprint covers integrating Devtron with Open Telekom Cloud Container Engine (CCE) for efficient CI/CD pipelines. It details installing Devtron in CCE clusters, emphasizing using containerized Masters and dynamic Agents managed by Kubernetes for optimal resource utilization and self-healing. The Master schedules jobs, which Agents execute within Kubernetes pods. This setup enhances security and maintenance efficiency."}),"\n",(0,r.jsx)(n.h2,{id:"what-is-devtron",children:"What is Devtron?"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://devtron.ai/",children:"Devtron"})," is an open-source software delivery workflow automation platform\ndesigned to streamline the DevOps lifecycle. It provides tools for\ncontinuous integration and continuous deployment (CI/CD), infrastructure\nmanagement, application lifecycle management, and monitoring,\nspecifically tailored for Kubernetes-based applications."]}),"\n",(0,r.jsx)(n.h3,{id:"key-features",children:"Key Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CI/CD Pipelines"}),": Automated pipelines for building, testing, and\ndeploying applications."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Kubernetes Integration"}),": Native support for Kubernetes, enabling\neasy management of Kubernetes clusters and deployments."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Application Management"}),": Tools for managing applications\nthroughout their lifecycle, including versioning, rollback, and\nupdates."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Infrastructure Management"}),": Automation of infrastructure\nprovisioning and management, supporting Infrastructure as Code (IaC)\npractices."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitoring and Logging"}),": Built-in monitoring and logging\ncapabilities to track application performance and troubleshoot\nissues."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Collaboration"}),": Features that facilitate team collaboration,\nincluding role-based access control and audit trails."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Devtron is particularly useful for teams adopting Kubernetes and\nmicroservices architectures, offering a unified platform to manage the\nentire software delivery pipeline."}),"\n",(0,r.jsx)(n.h3,{id:"architecture",children:"Architecture"}),"\n",(0,r.jsx)(n.p,{children:"The architecture of Devtron is designed to be highly modular and\nextensible, integrating seamlessly with Kubernetes and various CI/CD\ntools. Below are the primary components of Devtron:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Devtron Dashboard"}),": The user interface for managing applications,\nCI/CD pipelines, and infrastructure."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CI/CD Integration"}),": Connects with CI/CD tools like Jenkins,\nGitLab CI, and others to automate the build, test, and deployment\nprocesses."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Kubernetes Agents"}),": Deployed within Kubernetes clusters to manage\nand orchestrate deployments, scaling, and monitoring."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Devtron API"}),": Provides RESTful APIs for integrating with other\ntools and services, enabling automation and custom workflows."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Devtron Plugins"}),": Extensible plugins that add functionalities\nsuch as security scanning, GitOps, and more."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/devtron-labs/devtron/main/assets/Architecture.jpg",alt:""})}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsxs)(n.p,{children:["Open Telekom Cloud, and CCE in its extent, ",(0,r.jsx)(n.strong,{children:"do not"})," provide official maintenance and support for Devtron. The maintenance is provided exclusively by the developers of the Devtron. You can read more in the documentation of the platform ",(0,r.jsx)(n.a,{href:"https://docs.devtron.ai/",children:"here"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Before installing Devtron, ensure that your environment meets the\nfollowing minimum requirements:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Kubernetes"})," version ",(0,r.jsx)(n.strong,{children:"1.16 or higher"})," is recommended."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Ensure ",(0,r.jsx)(n.strong,{children:"Helm"})," is installed on your Kubernetes cluster. Follow the official ",(0,r.jsx)(n.a,{href:"https://helm.sh/docs/intro/install/",children:"Helm installation guide"})," for setup instructions."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"The minimum resources required for installing Devtron vary based on the number of applications you plan to manage:"}),"\n",(0,r.jsxs)(n.p,{children:["For Managing ",(0,r.jsx)(n.strong,{children:"Up to 5 Applications"}),":"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Integration"}),(0,r.jsx)(n.th,{children:"CPU"}),(0,r.jsx)(n.th,{children:"Memory"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Devtron with CI/CD"})}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"6 GB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Helm Dashboard by Devtron"})}),(0,r.jsx)(n.td,{children:"1"}),(0,r.jsx)(n.td,{children:"1 GB"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["For Managing ",(0,r.jsx)(n.strong,{children:"More Than 5 Applications"}),":"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Integration"}),(0,r.jsx)(n.th,{children:"CPU"}),(0,r.jsx)(n.th,{children:"Memory"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Devtron with CI/CD"})}),(0,r.jsx)(n.td,{children:"6"}),(0,r.jsx)(n.td,{children:"13 GB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Helm Dashboard by Devtron"})}),(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"3 GB"})]})]})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ensure that the recommended resources are available on your\nKubernetes cluster before proceeding with the Devtron installation."}),"\n",(0,r.jsxs)(n.li,{children:["It is ",(0,r.jsx)(n.strong,{children:"NOT"})," recommended to use burstable CPU VMs for Devtron installation to\nensure consistent performance."]}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"installing-devtron-on-cce",children:"Installing Devtron on CCE"}),"\n",(0,r.jsx)(n.p,{children:"This guide provides a step-by-step process to install Devtron, including\nselecting the appropriate installation repository, installing with Helm\ncharts, accessing the dashboard via port forwarding, and logging in with\nan overview of the dashboard."}),"\n",(0,r.jsx)(n.h3,{id:"choosing-the-right-installation-option",children:"Choosing the Right Installation Option"}),"\n",(0,r.jsx)(n.p,{children:"Devtron offers different installation options based on your\nrequirements. Here's how to decide which option to use:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Devtron with CI/CD"}),": Use this if you need comprehensive CI/CD\nintegration, security scanning, GitOps, debugging, and\nobservability."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Helm Dashboard by Devtron"}),": Choose this if you need a standalone\ninstallation focused on deploying, observing, managing, and\ndebugging existing Helm applications across multiple clusters."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Devtron with CI/CD and GitOps (Argo CD)"}),": Opt for this if you\nwant CI/CD with GitOps capabilities enabled during installation."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"installing-devtron-with-helm-charts",children:"Installing Devtron with Helm Charts"}),"\n",(0,r.jsxs)(n.p,{children:["Follow these steps to install Devtron using Helm charts: In this\ninstruction we use the first option ",(0,r.jsx)(n.strong,{children:"Devtron with CI/CD"}),"."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Add Devtron Helm Repository"}),": Add Devtron Helm repository to your\nlocal Helm client:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm repo add devtron https://helm.devtron.ai\nhelm repo update\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Install Devtron"}),": Install Devtron using the Helm chart:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm install devtron devtron/devtron-operator \\\n--create-namespace --namespace devtroncd \\\n--set installer.modules={cicd}\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Install Devtron"}),": Check the status of the installation:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n devtroncd\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"connecting-devtron-to-obs-for-logging-and-caching",children:"Connecting Devtron to OBS for logging and caching"}),"\n",(0,r.jsx)(n.p,{children:"Follow these steps to connect the OBS blob storage to Devtron:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Create a bucket in OBS"}),": You can create two different buckets one\nfor ",(0,r.jsx)(n.em,{children:"log storage"})," and another one for ",(0,r.jsx)(n.em,{children:"cache storage"}),". In this example\nwe make one bucket named ",(0,r.jsx)(n.code,{children:"devtron"})," for both purposes."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Updating Devtron"}),": Update Devtron configuration using the\nfollowing command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm upgrade devtron devtron/devtron-operator --namespace devtroncd --reuse-values \\\n--set configs.BLOB_STORAGE_PROVIDER=S3 \\\n--set configs.DEFAULT_CACHE_BUCKET=devtron \\\n--set configs.DEFAULT_CACHE_BUCKET_REGION=eu-de \\\n--set configs.DEFAULT_BUILD_LOGS_BUCKET=devtron \\\n--set configs.DEFAULT_CD_LOGS_BUCKET_REGION=eu-de \\\n--set secrets.BLOB_STORAGE_S3_ACCESS_KEY=<access-key\\\n--set secrets.BLOB_STORAGE_S3_SECRET_KEY=<secret-key\\\n--set configs.BLOB_STORAGE_S3_ENDPOINT=https://obs.eu-de.otc.t-systems.com\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["To obtain access-key and secret-key for OBS check ",(0,r.jsx)(n.a,{href:"https://docs.otc.t-systems.com/object-storage-service/permissions-configuration-guide/access_requests/accessing_obs_using_permanent_access_keys.html#obs-40-0007",children:"Accessing OBS\nUsing Permanent Access\nKeys"}),"."]})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"accessing-the-devtron-dashboard",children:"Accessing the Devtron Dashboard"}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.p,{children:"By default, the Devtron service is exposed internally through a\nNodePort. This makes Devtron available on any Kubernetes node IP."}),(0,r.jsxs)(n.p,{children:["Alternatively, a dedicated external IP can be assigned by switching the\nservice type to LoadBalancer. This will provision a cloud load balancer\nthat handles routing external traffic to Jenkins. For details, see\n",(0,r.jsx)(n.a,{href:"https://docs.otc.t-systems.com/cloud-container-engine/umn/network/service/loadbalancer/creating_a_loadbalancer_service.html",children:"Creating a LoadBalancer\nService"}),"."]})]}),"\n",(0,r.jsx)(n.p,{children:"To access the Devtron dashboard, you need to use port forwarding. Follow\nthese steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Port Forward to Access the Dashboard"}),": Forward the port to access\nthe Devtron dashboard from your local machine:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl port-forward svc/devtron-service -n devtroncd 8080:8080\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Visit the Dashboard"}),": Open your web browser and visit\n",(0,r.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"})," to access the Devtron dashboard."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Credentials"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"UserName"}),": ",(0,r.jsx)(n.code,{children:"admin"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Password"}),": Run the following command to get the admin password for Devtron:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl -n devtroncd get secret devtron-secret -o jsonpath='{.data.ADMIN_PASSWORD}' | base64 -d\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"connecting-devtron-to-swr-or-other-private-registries",children:"Connecting Devtron to SWR or other private Registries"}),"\n",(0,r.jsx)(n.p,{children:"Devtron allows you to configure a private image repository to securely\nstore and manage your container images and other artifacts. This guide\nprovides a step-by-step process to add a SWR to Devtron."}),"\n",(0,r.jsx)(n.h3,{id:"adding-a-container-registry",children:"Adding a Container Registry"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Go to ",(0,r.jsx)(n.em,{children:"Global Configurations"})," -> ",(0,r.jsx)(n.em,{children:"Container/OCI Registry"})," from the left sidebar."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/container-registries/add-registry.jpg",alt:"Figure 1: Container/OCI Registry"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.em,{children:"Add Registry"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Figure 2: Add a Registry",src:i(94227).A+"",width:"992",height:"823"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["From the ",(0,r.jsx)(n.em,{children:"Registry provider"})," dropdown, select your desired provider. Select ",(0,r.jsx)(n.em,{children:"other"})," for SWR."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Choose the appropriate registry type:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Private Registry"}),": For authenticated access, requiring credentials. Use this for SWR."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Public Registry"}),": For open access, no credentials needed."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Fill in the following fields:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Registry URL"})}),(0,r.jsxs)(n.td,{children:["URL of your registry. ",(0,r.jsx)(n.code,{children:"swr.{region}.otc.t-systems.com"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Username"})}),(0,r.jsx)(n.td,{children:"Account username."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Password/Token"})}),(0,r.jsx)(n.td,{children:"Account password or token."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Advanced Registry URL Connection Options"})}),(0,r.jsx)(n.td,{children:"Options for secure/insecure connections."})]})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["If you are in region ",(0,r.jsx)(n.code,{children:"eu-de"})," then the Registry URL is ",(0,r.jsx)(n.code,{children:"swr.eu-de.otc.t-systems.com"}),". To obtain an ",(0,r.jsx)(n.em,{children:"Username"})," and\n",(0,r.jsx)(n.em,{children:"Password/Token"})," for accessing SWR, see ",(0,r.jsx)(n.a,{href:"https://docs.otc.t-systems.com/software-repository-container/umn/image_management/obtaining_a_long-term_valid_login_command.html",children:"Obtaining a Long-Term Valid Login\nCommand"}),"."]})}),"\n",(0,r.jsx)(n.p,{children:"and here is a recap of available options:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Name"})}),(0,r.jsxs)(n.td,{children:["Provide a name for your registry. This will appear in the ",(0,r.jsx)(n.em,{children:"Container Registry"})," dropdown in the ",(0,r.jsx)(n.em,{children:"Build Configuration"})," section of your application."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Registry URL"})}),(0,r.jsx)(n.td,{children:"Enter the registry URL"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Authentication Type"})}),(0,r.jsx)(n.td,{children:"Select based on your registry provider."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Push container images"})}),(0,r.jsx)(n.td,{children:"Enable if you plan to push container images to this repository."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Push helm packages"})}),(0,r.jsx)(n.td,{children:"Enable if you plan to push Helm charts to this repository."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Use as chart repository"})}),(0,r.jsx)(n.td,{children:"Enable if you want Devtron to pull Helm charts from this registry."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Set as default registry"})}),(0,r.jsx)(n.td,{children:"Enable to set this registry as the default for your images or artifacts."})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.em,{children:"Save"})," and continue."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"managing-registry-credentials",children:"Managing Registry Credentials"}),"\n",(0,r.jsx)(n.p,{children:"Manage registry credentials for deploying images from private\nregistries. Super-admins can choose to auto-inject credentials or use a\nsecret."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.em,{children:"Manage"})," to configure registry credential access."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Option"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["*",(0,r.jsx)(n.em,{children:"Do not inject credentials to clusters"})]}),(0,r.jsx)(n.td,{children:"Select clusters to exclude from auto-injection."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.em,{children:"Auto-inject credentials to clusters"})}),(0,r.jsx)(n.td,{children:"Select clusters for auto-injection."})]})]})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Define credentials, choose between:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Use Registry Credentials"})," or ",(0,r.jsx)(n.em,{children:"Specify Image Pull Secret"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"use-registry-credentials",children:"Use Registry Credentials"}),"\n",(0,r.jsx)(n.p,{children:"If you use this option selected clusters will be auto-injected with\nregistry credentials."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/container-registries/use-registry-credentials-1.jpg",alt:"Figure 3: Using Registry Credentials"})}),"\n",(0,r.jsx)(n.h4,{id:"specify-image-pull-secret",children:"Specify Image Pull Secret"}),"\n",(0,r.jsx)(n.p,{children:"If you use this option selected clusters will be injected with the\ncredentials provided by the secret specified on that cluster. You can\ncreate a Secret by providing credentials on the command line."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/global-configurations/container-registries/specify-image-pull-secret-1.jpg",alt:"Figure 4: Using Image Pull Secret"})}),"\n",(0,r.jsxs)(n.p,{children:["Create this Secret and name it ",(0,r.jsx)(n.code,{children:"regcred"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl create -n ${namespace} secret docker-registry regcred \\\n--docker-server=${your-registry-server} \\\n--docker-username=${your-name} \\\n--docker-password=${your-pword} \\\n--docker-email=${your-email} \n"})}),"\n",(0,r.jsx)(n.p,{children:"where,"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"namespace"})," is your sub-cluster, e.g., ",(0,r.jsx)(n.code,{children:"devtron-demo"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"your-registry-server"})," is your Private Registry. Use ",(0,r.jsx)(n.code,{children:"swr.${region}.otc.t-systems.com"})," template for SWR."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"your-name"})," is your username"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"your-pword"})," is your password"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"your-email"})," is your email"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["You have successfully set your credentials in the cluster as a Secret\ncalled ",(0,r.jsx)(n.code,{children:"regcred"}),":"]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Typing secrets on the command line may store them in your shell history\nunprotected, and those secrets might also be visible to other users on\nyour PC during the time when kubectl is running."})}),"\n",(0,r.jsxs)(n.p,{children:["Enter the Secret name in the field and click ",(0,r.jsx)(n.em,{children:"Save"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"deploying-a-sample-application-on-devtron-and-building-a-cicd-pipeline",children:"Deploying a Sample Application on Devtron and Building a CI/CD Pipeline"}),"\n",(0,r.jsx)(n.p,{children:"This tutorial will guide you through deploying a Node.js sample\napplication on Devtron and setting up a CI/CD pipeline."}),"\n",(0,r.jsx)(n.h3,{id:"testing-locally-optional",children:"Testing locally (Optional)"}),"\n",(0,r.jsx)(n.p,{children:"First, clone the sample application repository and navigate into the\ndirectory:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/devtron-labs/getting-started-nodejs\ncd getting-started-nodejs\n"})}),"\n",(0,r.jsx)(n.p,{children:"To run the sample application locally, execute:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"node app.js\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Now, open your browser and go to\n",(0,r.jsx)(n.a,{href:"http://localhost:8080/",children:"http://localhost:8080"}),". You should see the\nfollowing output:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{"cities":["Amsterdam","Berlin","New York","San Francisco","Tokyo"]}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"deploying-the-application-with-devtron",children:"Deploying the Application with Devtron"}),"\n",(0,r.jsx)(n.p,{children:"Let's deploy this Node.js application using Devtron. Ensure that your\nglobal configurations are successfully saved and validated before\nproceeding."}),"\n",(0,r.jsx)(n.h4,{id:"creating-a-new-application",children:"Creating a new Application"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Login into your ",(0,r.jsx)(n.em,{children:"Devtron Dashboard"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.em,{children:"Applications"})," and click on ",(0,r.jsx)(n.em,{children:"Create"})," and select\n",(0,r.jsx)(n.em,{children:"Custom app"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Provide an appropriate name for the application, ",(0,r.jsx)(n.code,{children:"sample-app"})," for\nexample, select the project in which you want your app to reside,\nand create it."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"configuring-the-git-repository",children:"Configuring the Git Repository"}),"\n",(0,r.jsx)(n.p,{children:"After creating the app, set up the configurations."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Select ",(0,r.jsx)(n.em,{children:"Github Public"})," as the Git Account."]}),"\n",(0,r.jsxs)(n.li,{children:["Copy the repository URL\n",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.a,{href:"https://github.com/devtron-labs/getting-started-nodejs",children:"https://github.com/devtron-labs/getting-started-nodejs"})})," and paste\nit into the Git repo section of your application."]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.em,{children:"Save"})," and proceed to the next configuration."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"configuring-docker-build",children:"Configuring Docker Build"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Select the repository where you want to store your CI build image.\nSelect either SWR which you configured in\n",(0,r.jsx)(n.a,{href:"#connecting-devtron-to-swr-or-other-private-registries",children:"Connecting Devtron to SWR"})," or\nprovide other image repository."]}),"\n",(0,r.jsxs)(n.li,{children:["Choose the build configuration. We use Dockerfile because this\nrepository provides a default Dockerfile on this path\n",(0,r.jsx)(n.strong,{children:"./Dockerfile"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.em,{children:"Save & Next"})," and proceed to the next configuration."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["You can also use Buildpacks if your selected repository doesn't provide\nany Dockerfile or if you prefer them. For more information about\nBuildpacks visit ",(0,r.jsx)(n.a,{href:"https://buildpacks.io/",children:"Cloud Native Buildpacks"}),"."]})}),"\n",(0,r.jsx)(n.h4,{id:"configuring-the-deployment-template",children:"Configuring the Deployment Template"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Set the container Port: The Node.js application runs on port ",(0,r.jsx)(n.code,{children:"8080"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Set the resource limits and requests:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:'cpu: "0.5"'})," and ",(0,r.jsx)(n.code,{children:"memory: 50Mi"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.em,{children:"Save & Next"})," and proceed to the next configuration."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"creating-a-cicd-workflow",children:"Creating a CI/CD Workflow"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Click on ",(0,r.jsx)(n.em,{children:"New workflow"})," to create a CI/CD workflow to deploy the\napplication."]}),"\n",(0,r.jsxs)(n.li,{children:["Select ",(0,r.jsx)(n.em,{children:"Build and Deploy from Source Code"})," for the type of\npipeline."]}),"\n",(0,r.jsxs)(n.li,{children:["Configure Code Source. For Source type select ",(0,r.jsx)(n.em,{children:"Branch Fixed"})," and\nfor Branch Name enter the branch which you want to pull form here e.g. ",(0,r.jsx)(n.code,{children:"main"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.em,{children:"Create Pipeline"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Add your CD pipeline, choosing the environment where you want to\ndeploy the app."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/workflow-ci-1.jpg",alt:""})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/workflow-ci-2.jpg",alt:""})}),"\n",(0,r.jsx)(n.h4,{id:"adding-secrets-andor-configmaps",children:"Adding Secrets and/or ConfigMaps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Add or create secrets or configmaps as required."}),"\n",(0,r.jsx)(n.li,{children:"These values will be automatically mounted with pods and made\navailable as volumes or environment variables, based on your\nselection."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"triggering-the-ci-pipeline",children:"Triggering the CI Pipeline"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Trigger your CI pipeline by selecting the latest image."}),"\n",(0,r.jsx)(n.li,{children:"Deploy it on your chosen project."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"fetching-the-loadbalancer-url",children:"Fetching the LoadBalancer URL"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"After a successful deployment, check the service manifest."}),"\n",(0,r.jsx)(n.li,{children:"Fetch the LoadBalancer URL from the dashboard present in the App\nDetails section."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"verifying-the-deployment",children:"Verifying the Deployment"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Use the LoadBalancer URL in your browser."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"You should see the following output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{"cities":["Amsterdam","Berlin","New York","San Francisco","Tokyo"]}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(n.p,{children:"By following these steps, you have successfully deployed a Node.js\napplication using Devtron and set up a CI/CD pipeline to automate the\nprocess."}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["For more detailed documentation about the configurations, refer to the\n",(0,r.jsx)(n.a,{href:"https://docs.devtron.ai/devtron/user-guide/creating-application",children:"Devtron User\nGuide"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"appendix-review-of-advanced-options",children:"Appendix (Review of Advanced Options)"}),"\n",(0,r.jsx)(n.h4,{id:"build-and-deploy-from-source-code",children:"Build and Deploy from Source Code"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"Build and Deploy from Source Code"})," workflow allows you to build the\ncontainer image from a source code repository."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["From the ",(0,r.jsx)(n.em,{children:"Applications"})," menu, select your application."]}),"\n",(0,r.jsxs)(n.li,{children:["On the ",(0,r.jsx)(n.em,{children:"App Configuration"})," page, select ",(0,r.jsx)(n.em,{children:"Workflow Editor"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Select ",(0,r.jsx)(n.em,{children:"+ New Workflow"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Select ",(0,r.jsx)(n.em,{children:"Build and Deploy from Source Code"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Enter the following fields on the ",(0,r.jsx)(n.em,{children:"Create build pipeline"})," window:"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-v1.jpg",alt:""})}),"\n",(0,r.jsx)(n.h4,{id:"advanced-options",children:"Advanced Options"}),"\n",(0,r.jsx)(n.p,{children:"The Advanced CI Pipeline includes the following stages:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Pre-build stage"}),": The tasks in this stage are executed before the\nimage is built."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Build stage"}),": In this stage, the build is triggered from the\nsource code that you provide."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Post-build stage"}),": The tasks in this stage will be triggered once\nthe build is complete."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/advanced-options.jpg",alt:""})}),"\n",(0,r.jsx)(n.p,{children:"The Pre-build and Post-build stages allow you to create Pre/Post-Build\nCI tasks."}),"\n",(0,r.jsx)(n.h4,{id:"build-stage",children:"Build Stage"}),"\n",(0,r.jsxs)(n.p,{children:["Go to the ",(0,r.jsx)(n.em,{children:"Build stage"})," tab."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/build-stage-v2.jpg",alt:""})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field Name"}),(0,r.jsx)(n.th,{children:"Required/Optional"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Pipeline Name"}),(0,r.jsx)(n.td,{children:"Required"}),(0,r.jsx)(n.td,{children:"A name for the pipeline"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Source type"}),(0,r.jsx)(n.td,{children:"Required"}),(0,r.jsxs)(n.td,{children:["Select the source type to build the CI pipeline: ",(0,r.jsx)(n.a,{href:"#branch-fixed",children:"Branch Fixed"}),", ",(0,r.jsx)(n.a,{href:"#branch-regex",children:"Branch Regex"}),", ",(0,r.jsx)(n.a,{href:"#pull-request",children:"Pull Request"}),", ",(0,r.jsx)(n.a,{href:"#tag-creation",children:"Tag Creation"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Branch Name"}),(0,r.jsx)(n.td,{children:"Required"}),(0,r.jsx)(n.td,{children:"Branch that triggers the CI build"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Docker build arguments"}),(0,r.jsx)(n.td,{children:"Optional"}),(0,r.jsx)(n.td,{children:"Override docker build configurations for this pipeline.   Key: Field name Value: Field value"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"source-type",children:"Source type"}),"\n",(0,r.jsx)(n.h5,{id:"branch-fixed",children:"Branch Fixed"}),"\n",(0,r.jsxs)(n.p,{children:["This allows you to trigger a CI build whenever there is a code change on\nthe specified branch. Enter the ",(0,r.jsx)(n.strong,{children:"Branch Name"})," of your code repository."]}),"\n",(0,r.jsx)(n.h5,{id:"branch-regex",children:"Branch Regex"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"Branch Regex"})," allows users to easily switch between branches matching the configured Regex before triggering\nthe build pipeline."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/branch-regex.jpg",alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["For example, if the user sets the Branch Regex as ",(0,r.jsx)(n.code,{children:"feature-\\*"}),", then users can trigger from branches such as ",(0,r.jsx)(n.code,{children:"feature-1450"}),", ",(0,r.jsx)(n.code,{children:"feature-hot-fix"})," etc."]}),"\n",(0,r.jsx)(n.h5,{id:"pull-request",children:"Pull Request"}),"\n",(0,r.jsx)(n.p,{children:"This allows you to trigger the CI build when a pull request is created\nin your repository."}),"\n",(0,r.jsx)(n.admonition,{title:"Prerequisites",type:"note",children:(0,r.jsx)(n.p,{children:"Configure the webhook for either GitHub or Bitbucket."})}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"Pull Request"})," source type feature only works for the host GitHub\nor Bitbucket Cloud."]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-3.jpg",alt:""})}),"\n",(0,r.jsx)(n.p,{children:"To trigger the build from specific PRs, you can filter the PRs based on\nthe following keys:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Filter key"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Author"}),(0,r.jsx)(n.td,{children:"Author of the PR"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Source branch name"}),(0,r.jsx)(n.td,{children:"Branch from which the Pull Request is generated"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Target branch name"}),(0,r.jsx)(n.td,{children:"Branch to which the Pull request will be merged"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Title"}),(0,r.jsx)(n.td,{children:"Title of the Pull Request"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"State"}),(0,r.jsx)(n.td,{children:'State of the PR. Default is "open" and cannot be changed'})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-8.jpg",alt:""})}),"\n",(0,r.jsx)(n.p,{children:"Select the appropriate filter and pass the matching condition as a regular expression (regex)."}),"\n",(0,r.jsxs)(n.p,{children:["Devtron uses ",(0,r.jsx)(n.strong,{children:"regexp"})," library, view ",(0,r.jsx)(n.a,{href:"https://yourbasic.org/golang/regexp-cheat-sheet/",children:"regexp cheatsheet"}),". You can\ntest your custom regex from here ",(0,r.jsx)(n.a,{href:"https://regex101.com/r/lHHuaE/1",children:"regex101"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Select ",(0,r.jsx)(n.em,{children:"Create Pipeline"}),"."]}),"\n",(0,r.jsx)(n.h5,{id:"tag-creation",children:"Tag Creation"}),"\n",(0,r.jsx)(n.p,{children:"This allows you to trigger the CI build whenever a new tag is created."}),"\n",(0,r.jsx)(n.admonition,{title:"Prerequisites",type:"note",children:(0,r.jsx)(n.p,{children:"Configure the webhook for either GitHub or Bitbucket."})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-pipeline-9.jpg",alt:""})}),"\n",(0,r.jsxs)(n.p,{children:["To trigger the build from specific tags, you can filter the tags based\non the ",(0,r.jsx)(n.code,{children:"author"})," and/or the ",(0,r.jsx)(n.code,{children:"tag name"}),"."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Filter key"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Author"}),(0,r.jsx)(n.td,{children:"The one who created the tag"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Tag name"}),(0,r.jsx)(n.td,{children:"Name of the tag for which the webhook will be triggered"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Select the appropriate filter and pass the matching condition as a regular expression (regex)."}),"\n",(0,r.jsxs)(n.p,{children:["Select ",(0,r.jsx)(n.em,{children:"Create Pipeline"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"The total timeout for the execution of the CI pipeline is by default set\nas 3600 seconds. This default timeout is configurable according to the\nuse case."})}),"\n",(0,r.jsx)(n.h4,{id:"scan-for-vulnerabilities",children:"Scan for Vulnerabilities"}),"\n",(0,r.jsxs)(n.admonition,{title:"Prerequisites",type:"important",children:[(0,r.jsxs)(n.p,{children:["Install any one of the following integrations from ",(0,r.jsx)(n.em,{children:"Devtron Stack Manager"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/quay/clair",children:"Clair"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://trivy.dev/",children:"Trivy"})}),"\n"]})]}),"\n",(0,r.jsxs)(n.p,{children:["To perform the security scan after the container image is built, enable\nthe ",(0,r.jsx)(n.em,{children:"Scan for vulnerabilities"})," toggle in the build stage."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/scan-for-vulnerabilities-v2.jpg",alt:""})}),"\n",(0,r.jsx)(n.h4,{id:"custom-image-tag-pattern",children:"Custom Image Tag Pattern"}),"\n",(0,r.jsxs)(n.p,{children:["This feature helps you apply custom tags (e.g., ",(0,r.jsx)(n.code,{children:"v1.0.0"}),") to readily distinguish container images within your repository."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Enable the toggle button as shown below."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-image-tag-pattern.jpg",alt:""})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You can write an alphanumeric pattern for your image tag, e.g.,\n",(0,r.jsx)(n.code,{children:"test-v1.0.{x}"}),". Here, ",(0,r.jsx)(n.code,{children:"x"})," is a mandatory variable whose value\nwill incrementally increase with every build. You can also define\nthe value of ",(0,r.jsx)(n.code,{children:"x"})," for the next build trigger in case you want to\nchange it."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-image-tag-version.jpg",alt:""})}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsx)(n.p,{children:"Ensure your custom tag does not start or end with a period (.) or comma (,)"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.em,{children:"Update Pipeline"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Now, go to the ",(0,r.jsx)(n.em,{children:"Build & Deploy"})," tab of your application, and click\n",(0,r.jsx)(n.em,{children:"Select Material"})," in the CI pipeline."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/ci-material.jpg",alt:""})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Choose the git commit you wish to use for building the container\nimage. Click ",(0,r.jsx)(n.em,{children:"Start Build"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/choose-commit.jpg",alt:""})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"The build will initiate and once it is successful, the image tag\nwould reflect at all relevant screens:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Build History"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/build-history.jpg",alt:""})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"CD Pipeline (Image Selection)"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://devtron-public-asset.s3.us-east-2.amazonaws.com/images/creating-application/workflow-ci-pipeline/select-ci-image.jpg",alt:""})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Build will fail if the resulting image tag has already been built in the\npast. This means if there is an existing image with tag ",(0,r.jsx)(n.code,{children:"test-v1.0.0"}),", you cannot build another image\nhaving the same tag ",(0,r.jsx)(n.code,{children:"test-v1.0.0"})," in the\nsame CI pipeline. This error might occur when you reset the value of the\nvariable ",(0,r.jsx)(n.code,{children:"x"})," or when you disable/enable the\ntoggle button for ",(0,r.jsx)(n.em,{children:"Custom image tag\npattern"}),"."]})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},94227:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/en-us_image_A0000001348013634-75f485ea01bb19ace16a41e68ba7ecda.png"},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(96540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);