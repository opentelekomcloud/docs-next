<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-blueprints/by-use-case/security/zitadel/zitadel-as-identity-provider-iam" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">ZITADEL as an Identity Provider for IAM | Architecture Center</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-241/img/open-telekom-cloud-social-card.png"><meta data-rh="true" name="twitter:image" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-241/img/open-telekom-cloud-social-card.png"><meta data-rh="true" property="og:url" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/zitadel-as-identity-provider-iam"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ZITADEL as an Identity Provider for IAM | Architecture Center"><meta data-rh="true" name="description" content="This guide outlines the steps required to integrate ZITADEL with the Identity and Access Management (IAM) of Open Telekom Cloud using the SAML 2.0 standard. The objective is to configure ZITADEL as a trusted external Identity Provider (IdP), enabling federated login for OTC users and services. This setup allows your ZITADEL-managed identities to authenticate against Open Telekom Cloud resources, forming a bridge between your custom IAM solution and the native authentication infrastructure of Open Telekom Cloud."><meta data-rh="true" property="og:description" content="This guide outlines the steps required to integrate ZITADEL with the Identity and Access Management (IAM) of Open Telekom Cloud using the SAML 2.0 standard. The objective is to configure ZITADEL as a trusted external Identity Provider (IdP), enabling federated login for OTC users and services. This setup allows your ZITADEL-managed identities to authenticate against Open Telekom Cloud resources, forming a bridge between your custom IAM solution and the native authentication infrastructure of Open Telekom Cloud."><link data-rh="true" rel="icon" href="/docs-next/pr-preview/pr-241/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/zitadel-as-identity-provider-iam"><link data-rh="true" rel="alternate" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/zitadel-as-identity-provider-iam" hreflang="en"><link data-rh="true" rel="alternate" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/zitadel-as-identity-provider-iam" hreflang="x-default"><link rel="preconnect" href="https://analytics.example.de">
<script async defer="defer" src="https://analytics.example.de/script.js" data-website-id="00000" data-host-url="https://analytics.example.de" data-auto-track data-do-not-track data-cache data-domains="opentelekomcloud.github.io"></script><link rel="stylesheet" href="/docs-next/pr-preview/pr-241/assets/css/styles.e9afe840.css">
<script src="/docs-next/pr-preview/pr-241/assets/js/runtime~main.ae315918.js" defer="defer"></script>
<script src="/docs-next/pr-preview/pr-241/assets/js/main.333a8f6b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs-next/pr-preview/pr-241/"><div class="navbar__logo"><img src="/docs-next/pr-preview/pr-241/img/logo_headline_kombination_m_s_m.png" alt="Open Telekom Cloud Non-Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs-next/pr-preview/pr-241/img/logo_headline_kombination_m_w_m.png" alt="Open Telekom Cloud Non-Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs-next/pr-preview/pr-241/docs/best-practices/">Best Practices</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs-next/pr-preview/pr-241/docs/blueprints/">Blueprints</a></div><div class="navbar__items navbar__items--right"><a href="https://auth.otc.t-systems.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--terminal-link" aria-label="Open Telekom Cloud Console"></a><a href="https://github.com/opentelekomcloud/docs-next" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--github-link" aria-label="GitHub"></a><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_dCNk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs-next/pr-preview/pr-241/docs/blueprints/">Blueprints</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/">By Use Case</a><button aria-label="Collapse sidebar category &#x27;By Use Case&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/ai/">AI &amp; LLMs</a><button aria-label="Expand sidebar category &#x27;AI &amp; LLMs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/analytics/">Analytics</a><button aria-label="Expand sidebar category &#x27;Analytics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/devops/">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/networking/">Networking</a><button aria-label="Expand sidebar category &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/observability/">Observability</a><button aria-label="Expand sidebar category &#x27;Observability&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/">Security</a><button aria-label="Collapse sidebar category &#x27;Security&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/authentik/authentik">Authentik</a><button aria-label="Expand sidebar category &#x27;Authentik&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/cce-vault">Secrets management with CCE and Hashicorp Vault</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/keycloak/keycloak">Keycloak</a><button aria-label="Expand sidebar category &#x27;Keycloak&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/zitadel">ZITADEL</a><button aria-label="Collapse sidebar category &#x27;ZITADEL&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/deploy-zitadel-on-cce">Deploy ZITADEL on CCE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/zitadel-as-identity-provider-iam">ZITADEL as an Identity Provider for IAM</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/storage/">Storage</a><button aria-label="Expand sidebar category &#x27;Storage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-industry/">By Industry</a><button aria-label="Expand sidebar category &#x27;By Industry&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs-next/pr-preview/pr-241/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/"><span itemprop="name">By Use Case</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/"><span itemprop="name">Security</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/zitadel"><span itemprop="name">ZITADEL</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ZITADEL as an Identity Provider for IAM</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ZITADEL as an Identity Provider for IAM</h1></header>
<p>This guide outlines the steps required to integrate ZITADEL with the Identity and Access Management (IAM) of Open Telekom Cloud using the <a href="https://en.wikipedia.org/wiki/SAML_2.0" target="_blank" rel="noopener noreferrer">SAML 2.0</a> standard. The objective is to configure ZITADEL as a trusted external Identity Provider (IdP), enabling federated login for OTC users and services. This setup allows your ZITADEL-managed identities to authenticate against Open Telekom Cloud resources, forming a bridge between your custom IAM solution and the native authentication infrastructure of Open Telekom Cloud.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<p>Before initiating the integration process, make sure the following prerequisites are met:</p>
<ul>
<li><strong>A fully deployed and accessible ZITADEL instance</strong>, reachable via a valid domain with HTTPS enabled. Otherwise, follow the guide: <a href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/deploy-zitadel-on-cce">Deploy ZITADEL on CCE</a>.</li>
<li><strong>Administrator-level access</strong> to both ZITADEL and Open Telekom Cloud&#x27;s <strong>Identity and Access Management (IAM)</strong> console.</li>
<li>A <strong>working knowledge of SAML 2.0</strong>, particularly around concepts such as assertions, metadata exchange, and service provider (SP) vs. identity provider (IdP) roles. If needed, refer to the <a href="https://wiki.oasis-open.org/security/FrontPage#SAML_V2.0_Standard" target="_blank" rel="noopener noreferrer">SAML 2.0 specification</a> for a foundational overview.</li>
</ul>
<p>These requirements ensure that you&#x27;re equipped to configure and validate the trust relationship between the two platforms.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-organization">Creating a new Organization<a href="#creating-a-new-organization" class="hash-link" aria-label="Direct link to Creating a new Organization" title="Direct link to Creating a new Organization">​</a></h2>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>ZITADEL deploys a default organization (configured via the <code>ZITADEL_FIRSTINSTANCE_ORG_*</code> parameters) that is necessary for bootstrapping and administering the instance initially, and it is generally <strong>not recommended</strong> for routine operational use because:</p><ul>
<li>It carries system-level privileges that might not be safe for day-to-day operations.</li>
<li>Default settings may not meet production-grade security requirements.</li>
<li>Separation of system and operational data helps reduce risk and improves manageability.</li>
<li>Tailored organizations allow better control over permissions, policies, and audit management.</li>
</ul><p>For these reasons, it&#x27;s best to use the first organization <strong>strictly for initial setup and administrative purposes</strong>—and then create separate organizations tailored to your application&#x27;s production, testing, or multi-tenant requirements.</p><p>For further details, check out the <a href="https://zitadel.com/docs/concepts/structure/organizations" target="_blank" rel="noopener noreferrer">ZITADEL documentation</a>, which provides more context on security best practices and organization management in ZITADEL.</p></div></div>
<p>Go to the <em>ZITADEL Dashboard</em> and click <em>New Organization</em>:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_12-00-07-68ce0b39a1d38b5d9c6f768e20d17703.png" width="1480" height="822" class="img_ev3q"></p>
<p>Enter the name of your new organization, (e.g. <code>mycompany.com</code>) and click <em>Create</em>:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_12-08-17-05f49d4734eb11ec5b8627f37042976c.png" width="1480" height="822" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-project">Creating a new Project<a href="#creating-a-new-project" class="hash-link" aria-label="Direct link to Creating a new Project" title="Direct link to Creating a new Project">​</a></h2>
<p>Go to the new <em>Organization Dashboard</em> -&gt; <em>Projects</em> -&gt; <em>Owned Projects</em> and click <em>Create New Project</em>:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_12-14-24-c4e9b5fe6694c63ea029de500d9bd36c.png" width="1480" height="822" class="img_ev3q"></p>
<p>and name it after your tenant in Open Telekom Cloud:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_12-19-24-2253b77da5ab68745467ab121598c229.png" width="1480" height="822" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>While naming the ZITADEL project after your Open Telekom Cloud tenant isn&#x27;t strictly required, it does offer clarity—especially in multi-tenant or federated environments. Aligning project names with your organizational structure or tenant identifiers helps maintain consistency, eases traceability, and simplifies access policy management. You&#x27;re free to adapt naming conventions based on your broader application landscape, governance model, or internal naming standards. Prioritize what makes sense for your operational context.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-application">Creating a new Application<a href="#creating-a-new-application" class="hash-link" aria-label="Direct link to Creating a new Application" title="Direct link to Creating a new Application">​</a></h2>
<p>Go to the new <em>Project Dashboard</em> and click <em>New Application</em>:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_12-31-36-808c5eb6c6436a200940780d43ca7a5d.png" width="1480" height="822" class="img_ev3q"></p>
<ol>
<li>Assign a name to the new application and for the application type select <code>SAML</code>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_12-34-37-9868ce6e616088134561d822c325c7f2.png" width="1480" height="822" class="img_ev3q"></p>
<ol start="2">
<li>
<p>In Step 2 of the application setup, configure the SAML integration using Option 1: Metadata URL. This approach allows ZITADEL to fetch the necessary service provider metadata automatically.</p>
<p>Set the metadata URL to: <code>https://auth.otc.t-systems.com/authui/saml/metadata.xml</code></p>
<p>This URL points to the SAML metadata of Open Telekom Cloud’s Identity and Access Management system. After entering the URL, proceed by clicking Continue through the remaining steps of the wizard. No additional configuration is required at this point. Once you exit the wizard, the application will be created with the SP metadata preloaded and ready for further claim mapping and policy setup</p>
</li>
</ol>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_12-50-51-589f483c7853109f55e95ffe5e97b38f.png" width="1480" height="822" class="img_ev3q"></p>
<ol start="3">
<li>Back on the <em>Application Dashboard</em>, enable <strong>Assert Roles on Authentication</strong> and <strong>Check authorization on Authentication</strong> and click <em>Save</em>:</li>
</ol>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_13-08-55-3458fc9900f9b54b25eed53e95afe0d4.png" width="1480" height="822" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-user">Creating a new User<a href="#creating-a-new-user" class="hash-link" aria-label="Direct link to Creating a new User" title="Direct link to Creating a new User">​</a></h3>
<p>Go to the <em>Project Dashboard</em> -&gt; <em>Users</em> -&gt; <em>Users</em> and click <em>New</em>. Fill in the form and enable <strong>Email verified</strong> and <strong>Set initial password</strong> and click <em>Create</em>:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_12-55-32-63a2b3535f45eb2478ef0cb72064000b.png" width="1480" height="822" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>Enabling <strong>Email Verified</strong> at this stage is shown purely for the sake of progressing through the blueprint without the need for multi-factor authentication (MFA), SMS gateway, or SMTP server setup. This shortcut allows testing and validation of the SAML integration without additional infrastructure.</p><p>However, it&#x27;s important to stress that <strong>bypassing email verification in a production environment is strongly discouraged</strong>. Doing so undermines the integrity of user identity assurance and opens the door to impersonation or unauthorized access. In real-world deployments, always enforce verified email addresses through proper delivery mechanisms and integrate MFA where possible to align with security best practices.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-roles--authorizations">Creating Roles &amp; Authorizations<a href="#creating-roles--authorizations" class="hash-link" aria-label="Direct link to Creating Roles &amp; Authorizations" title="Direct link to Creating Roles &amp; Authorizations">​</a></h3>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>This blueprint operates under the assumption that your Open Telekom Cloud IAM environment includes the following two User Groups:</p><table><thead><tr><th>Group</th><th>Policy/Role</th><th>Description</th></tr></thead><tbody><tr><td><strong>rds-admin</strong></td><td>Tenant Guest</td><td>Tenant Guest (Exclude IAM)</td></tr><tr><td></td><td>RDS Administrator</td><td>RDS Administrator</td></tr><tr><td></td><td>Server Administrator</td><td>Server Administrator</td></tr><tr><td><strong>ecs-admin</strong></td><td>ECS Admin</td><td>All permissions of ECS service.</td></tr></tbody></table><p>These groups will later be used in the SAML attribute mapping process, where ZITADEL will assert a user’s group membership as part of the authentication response. The IAM service in Open Telekom Cloud will consume these SAML attributes and dynamically assign (virtual) users to the appropriate group. This enables fine-grained, role-based access control that aligns with your organizational structure and enforces least privilege principles across your cloud environment.</p><p>You can either create these groups directly in your Open Telekom Cloud tenant, or adapt the remainder of this blueprint to align with your own existing IAM group structure. The <strong>key requirement</strong> is that <strong>the group names used in ZITADEL&#x27;s SAML attribute mappings correspond exactly to the group names defined in your Open Telekom Cloud IAM configuration</strong>. This ensures that access control decisions based on group membership are applied correctly during federated login. Whichever approach you choose, consistency between identity assertions and IAM group definitions is essential for maintaining a secure and predictable access model.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-roles">Creating Roles<a href="#creating-roles" class="hash-link" aria-label="Direct link to Creating Roles" title="Direct link to Creating Roles">​</a></h4>
<p>Go to the <em>Project Dashboard</em> -&gt; <em>Roles</em> and click <em>New</em>. Fill in <strong>Key</strong>, <strong>Display Name</strong> and <strong>Group</strong> as: <code>ecs-admin</code>. Repeat for <code>rds-admin</code> and click <em>Save</em>.</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_15-00-46-1d61392b88d6d78d1835149cfc76612d.png" width="1360" height="747" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-authorizations">Creating Authorizations<a href="#creating-authorizations" class="hash-link" aria-label="Direct link to Creating Authorizations" title="Direct link to Creating Authorizations">​</a></h4>
<p>Go to the <em>Project Dashboard</em> -&gt; <em>Authorizations</em> and click <em>New</em>:</p>
<ol>
<li>Select the user we created earlier</li>
</ol>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_15-06-32-6504bfa6416e85b280a4d155bde55519.png" width="1360" height="747" class="img_ev3q"></p>
<ol start="2">
<li>Assign to the user the role(s) you want to test and click <em>Save</em>.</li>
</ol>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_15-07-03-0447972da1a10d6c5c3f7439571d6560.png" width="1360" height="747" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="retrieving-zitadels-saml-20-metadata">Retrieving ZITADEL&#x27;s SAML 2.0 Metadata<a href="#retrieving-zitadels-saml-20-metadata" class="hash-link" aria-label="Direct link to Retrieving ZITADEL&#x27;s SAML 2.0 Metadata" title="Direct link to Retrieving ZITADEL&#x27;s SAML 2.0 Metadata">​</a></h2>
<p>At this point, ZITADEL has already been configured to trust Open Telekom Cloud by consuming its SAML metadata (as outlined in earlier steps). Now, we need to perform the reverse—extract ZITADEL’s own SAML metadata so that it can be registered as a trusted Identity Provider within OTC.</p>
<p>If you’ve deployed ZITADEL using the guide <a href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/deploy-zitadel-on-cce">Deploy ZITADEL on CCE</a>, the metadata is served automatically at the following endpoint: <code>https://$ZITADEL_EXTERNALDOMAIN/saml/v2/metadata</code></p>
<p>Replace <code>$ZITADEL_EXTERNALDOMAIN</code> with the actual fully qualified domain name pointing to your ZITADEL instance. This URL exposes an XML-formatted metadata document containing ZITADEL’s SAML configuration, including its public signing key and SSO endpoints. You’ll use this metadata when registering ZITADEL as an Identity Provider in the OTC IAM console, so download and save it in your workspace as e.g. <strong>metadata.xml</strong>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Exchanging SAML metadata between the identity provider (ZITADEL) and the service provider (Open Telekom Cloud IAM) is a foundational step in establishing mutual trust within a SAML-based authentication flow. The metadata files serve as structured, signed documents that contain the public key infrastructure (PKI) necessary to validate digital signatures on SAML assertions—ensuring that identity claims are authentic and have not been altered in transit.</p><p>Beyond cryptographic trust, SAML metadata also defines key operational endpoints such as the Single Sign-On (SSO) and Single Logout (SLO) endpoint. By exchanging this information up front, both systems can interoperate seamlessly, eliminating the need for manual configuration and significantly reducing the risk of misrouted authentication messages. This automation is critical for ensuring that authentication flows are reliable, secure, and standards-compliant.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-action">Creating a new Action<a href="#creating-a-new-action" class="hash-link" aria-label="Direct link to Creating a new Action" title="Direct link to Creating a new Action">​</a></h2>
<p>If we examine the <strong>metadata.xml</strong> retrieved from ZITADEL, we will notice that it does not include any predefined SAML attribute assertions that map users to roles or groups. By default, ZITADEL exposes only the minimal identity information required for authentication—such as the NameID and basic profile attributes.</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeAuthorityDescriptor</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:metadata</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">ID</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">_fcb399cf-7e22-41d2-bf5c-f451605905e2</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">validUntil</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">2025-04-16T13:36:08.647Z</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">protocolSupportEnumeration</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:protocol</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeService</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:metadata</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">Binding</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:bindings:SOAP</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">Location</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">https://zitadel.example.com/saml/v2/attribute</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">/&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">NameIDFormat</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain">urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token tag" style="color:hsl(355, 65%, 65%)">NameIDFormat</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeProfile</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain">urn:oasis:names:tc:SAML:2.0:profiles:attribute:basic</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeProfile</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:assertion</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">Name</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">Email</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">NameFormat</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:attrname-format:basic</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeValue</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">/&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:assertion</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">Name</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">SurName</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">NameFormat</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:attrname-format:basic</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeValue</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">/&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:assertion</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">Name</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">FirstName</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">NameFormat</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:attrname-format:basic</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeValue</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">/&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:assertion</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">Name</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">FullName</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">NameFormat</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:attrname-format:basic</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeValue</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">/&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:assertion</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">Name</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">UserName</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">NameFormat</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:attrname-format:basic</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeValue</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">/&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:assertion</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">Name</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">UserID</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">NameFormat</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:attrname-format:basic</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeValue</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">/&gt;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token tag" style="color:hsl(355, 65%, 65%)">Attribute</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token tag" style="color:hsl(355, 65%, 65%)">KeyDescriptor</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">urn:oasis:names:tc:SAML:2.0:metadata</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag" style="color:hsl(355, 65%, 65%)"> </span><span class="token tag attr-name" style="color:hsl(29, 54%, 61%)">use</span><span class="token tag attr-value punctuation attr-equals" style="color:hsl(220, 14%, 71%)">=</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag attr-value" style="color:hsl(95, 38%, 62%)">signing</span><span class="token tag attr-value punctuation" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token tag" style="color:hsl(355, 65%, 65%)">KeyDescriptor</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token tag" style="color:hsl(355, 65%, 65%)">AttributeAuthorityDescriptor</span><span class="token tag punctuation" style="color:hsl(220, 14%, 71%)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For Open Telekom Cloud IAM to make authorization decisions based on group membership or roles, we must explicitly configure ZITADEL to include custom SAML attributes in its assertions. To enrich the SAML response with role(s) information, we’ll define a custom <strong>Action</strong> in ZITADEL.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Actions in ZITADEL allow you to inject additional logic during the authentication flow, including modifying the SAML assertion payload before it is sent to the service provider.</p><p>In this case, the Action will append one or more custom attribute statements to the SAML response—such as user roles, or other identity context information as e.g. the Organization ID—that Open Telekom Cloud can then map to IAM groups. This is the mechanism that bridges ZITADEL’s internal user model with Open Telekom Cloud&#x27;s access control expectations, enabling dynamic role assignment based on federated identity.</p><p>The Action will be triggered during SAML login and executed in the context of the authentication pipeline, ensuring all outbound assertions include the required metadata for authorization decisions downstream.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-new-script">Creating new Script<a href="#creating-new-script" class="hash-link" aria-label="Direct link to Creating new Script" title="Direct link to Creating new Script">​</a></h3>
<p>Go to <em>Organization Dashboard</em> -&gt; <em>Actions</em> -&gt; <em>Scripts</em> and click <em>New</em>. Set the <strong>Name</strong> of the script as <code>setCustomAttribute</code>, add this JavaScript function as payload and click <em>Add</em>.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token keyword" style="color:hsl(286, 60%, 67%)">function</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">setCustomAttribute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token parameter">ctx</span><span class="token parameter punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token parameter"> api</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">const</span><span class="token plain"> user </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">v1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">getUser</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    api</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">v1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">attributes</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">setCustomAttribute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">&#x27;OrgID&#x27;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&#x27;&#x27;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> user</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">resourceOwner</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:hsl(286, 60%, 67%)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">v1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">grants</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> </span><span class="token keyword nil" style="color:hsl(286, 60%, 67%)">undefined</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">||</span><span class="token plain"> ctx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">v1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">grants</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">==</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">0</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token keyword control-flow" style="color:hsl(286, 60%, 67%)">return</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">let</span><span class="token plain"> roles </span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    ctx</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">v1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">grants</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">grants</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">forEach</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token parameter">grant</span><span class="token plain"> </span><span class="token arrow operator" style="color:hsl(207, 82%, 66%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        grant</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">roles</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">forEach</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token parameter">role</span><span class="token plain"> </span><span class="token arrow operator" style="color:hsl(207, 82%, 66%)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            roles</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">push</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token plain">role</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    api</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">v1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token property-access">attributes</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">.</span><span class="token method function property-access" style="color:hsl(207, 82%, 66%)">setCustomAttribute</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">(</span><span class="token string" style="color:hsl(95, 38%, 62%)">&#x27;Roles&#x27;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&#x27;&#x27;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:hsl(207, 82%, 66%)">...</span><span class="token plain">roles</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>When creating the custom Action in ZITADEL, it’s oblligatory that the name of the Action and the name of the JavaScript function defined within it are identical.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="binding-script-to-a-flow">Binding Script to a Flow<a href="#binding-script-to-a-flow" class="hash-link" aria-label="Direct link to Binding Script to a Flow" title="Direct link to Binding Script to a Flow">​</a></h3>
<p>To integrate your custom Action into ZITADEL’s authentication process, you need to bind it to a specific authentication flow and define the trigger event that will execute it.</p>
<p>Go to <em>Organization Dashboard</em> -&gt; <em>Actions</em> -&gt; <em>Flows</em>, choose <code>Complement SAMLResponse</code> as <strong>Flow Type</strong>, <code>Pre SAMLResponse creation</code> as <strong>Trigger Type</strong>, <code>setCustomAttribute</code> as <strong>Action</strong> and click <em>Save</em>.</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-16_16-16-52-e761c36315ec45841d3ff58021b4457e.png" width="1332" height="720" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-iam">Configuring IAM<a href="#configuring-iam" class="hash-link" aria-label="Direct link to Configuring IAM" title="Direct link to Configuring IAM">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-new-identity-provider">Creating a new Identity Provider<a href="#creating-a-new-identity-provider" class="hash-link" aria-label="Direct link to Creating a new Identity Provider" title="Direct link to Creating a new Identity Provider">​</a></h3>
<p>Go to <em>Open Telekom Cloud Console</em> -&gt; <em>IAM</em> -&gt; <em>Identity Providers</em> and click <em>Create Identity Provider</em>:</p>
<p>Set the following parameters and click <em>OK</em>.</p>
<ul>
<li><strong>Protocol</strong>: <code>SAML</code></li>
<li><strong>SSO Type</strong>: <code>Virtual user</code></li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Choosing Virtual user allows OTC to create ephemeral user sessions based on SAML assertions without requiring persistent user accounts in IAM. This mode is suitable for scenarios where user identity and group memberships are fully managed by the external IdP (ZITADEL in this case). For more information about Virtual Users check the <a href="https://docs.otc.t-systems.com/identity-access-management/umn/user_guide/identity_providers/virtual_user_sso_via_saml/overview_of_virtual_user_sso_via_saml.html#iam-08-0021" target="_blank" rel="noopener noreferrer">documentation</a> in our Help Center.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-new-identity-provider">Configuring the new Identity Provider<a href="#configuring-the-new-identity-provider" class="hash-link" aria-label="Direct link to Configuring the new Identity Provider" title="Direct link to Configuring the new Identity Provider">​</a></h3>
<p>After your ZITADEL Action is in place and correctly injecting the necessary assertions and the Open Telekom Cloud Identity Provider has been created, navigate to the <em>Identity Providers</em> and click on <em>Modify</em> next to the provider to finalize the trust relationship by uploading ZITADEL&#x27;s metadata to Open Telekom Cloud IAM. Under the <em>Metadata Configuration</em> section click <em>Upload</em> and select the <code>metadata.xml</code> file you retrieved earlier.</p>
<p>This file contains ZITADEL’s SAML configuration, including its public keys and SSO endpoints. Uploading it allows Open Telekom Cloud IAM to trust and process incoming authentication responses from ZITADEL securely, based on signed and validated assertions. Once uploaded, save the configuration to apply the changes.</p>
<p>Click twice <em>OK</em> to apply changes and exit.</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-17_07-40-52-afef92deac656ab58c1d71913d40cb26.png" width="1369" height="721" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-conversion-rules">Configuring the Conversion Rules<a href="#configuring-the-conversion-rules" class="hash-link" aria-label="Direct link to Configuring the Conversion Rules" title="Direct link to Configuring the Conversion Rules">​</a></h3>
<p>Now that the metadata exchange is complete and ZITADEL is trusted by Open Telekom Cloud IAM, the next step is to define conversion rules. These rules map incoming SAML attributes, such as custom roles, to IAM user groups within your Open Telekom Cloud tenant. This mapping is essential for authorization. It ensures that users federated through ZITADEL are granted the correct level of access in OTC based on the attributes included in the SAML assertions.</p>
<p>Return to the <em>IAM</em> -&gt; <em>Identity Providers</em> section in the <em>Open Telekom Cloud IAM Console</em>, locate your configured ZITADEL SAML provider, and click <em>Modify</em>. Scroll to the bottom of the configuration page and click on the <em>Edit Rule</em> link under <em>Identity Conversion Rules</em>. This will open the rule editor where you can define how SAML attributes from ZITADEL are translated into Open Telekom Cloud IAM group memberships.</p>
<p>In the <em>Edit Rule</em> popup, remove the default rule and paste the following conversion logic. This rule maps users from ZITADEL to the appropriate Open Telekom Cloud IAM group(s) based on the <code>Roles</code> attribute included in the SAML assertion:</p>
<p>This rule takes three SAML attributes from the incoming assertion:</p>
<ul>
<li><code>__NAMEID__</code>: the user&#x27;s unique identifier.</li>
<li><code>Roles</code>: a custom attribute representing the user&#x27;s role(s) within the ZITADEL Organization.</li>
<li><code>OrgID</code>: the identifier of the ZITADEL Organization the user belongs to.</li>
</ul>
<p>It then constructs a federated username in the format: <code>&lt;NAMEID&gt;@zitadel/&lt;OrgID&gt;</code></p>
<p>Simultaneously, it assigns the user to a, or more, local IAM group(s) based on the Roles attribute. This dynamic mapping allows for automatic group assignment and user identification in Open Telekom Cloud, based on the structure and semantics of the identity data asserted by ZITADEL.</p>
<p>Once pasted, click twice <em>OK</em> to apply the rule.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockTitle_Ktv7">Identity Conversion Rule</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token property" style="color:hsl(355, 65%, 65%)">&quot;remote&quot;</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> </span><span class="token property" style="color:hsl(355, 65%, 65%)">&quot;type&quot;</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;__NAMEID__&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> </span><span class="token property" style="color:hsl(355, 65%, 65%)">&quot;type&quot;</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;Roles&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"> </span><span class="token property" style="color:hsl(355, 65%, 65%)">&quot;type&quot;</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;OrgID&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token property" style="color:hsl(355, 65%, 65%)">&quot;local&quot;</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">                </span><span class="token property" style="color:hsl(355, 65%, 65%)">&quot;user&quot;</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">                    </span><span class="token property" style="color:hsl(355, 65%, 65%)">&quot;name&quot;</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;{0}@zitadel/{2}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">                </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">                </span><span class="token property" style="color:hsl(355, 65%, 65%)">&quot;group&quot;</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">                    </span><span class="token property" style="color:hsl(355, 65%, 65%)">&quot;name&quot;</span><span class="token operator" style="color:hsl(207, 82%, 66%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;{1}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">                </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">            </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">        </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>These rules will be evaluated at login time, dynamically assigning federated users to the appropriate IAM groups based on the attributes delivered by ZITADEL. This ensures secure, policy-aligned access <strong>without the need for manual user provisioning</strong>.</p><p>You can find more detailed information about <strong>Conversion Rules</strong> in Open Telekom Cloud Help Center:</p><ul>
<li><a href="https://docs.otc.t-systems.com/identity-access-management/umn/user_guide/identity_providers/virtual_user_sso_via_openid_connect/step_2_configure_identity_conversion_rules.html" target="_blank" rel="noopener noreferrer">Configure Identity Conversion Rules</a></li>
<li><a href="https://docs.otc.t-systems.com/identity-access-management/umn/user_guide/identity_providers/syntax_of_identity_conversion_rules.html#en-us-topic-0079620340" target="_blank" rel="noopener noreferrer">Syntax of Identity Conversion Rules</a></li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="validating">Validating<a href="#validating" class="hash-link" aria-label="Direct link to Validating" title="Direct link to Validating">​</a></h2>
<p>Return to the <em>IAM</em> -&gt; <em>Identity Providers</em> section in the <em>Open Telekom Cloud IAM Console</em>, locate your configured ZITADEL SAML provider, Then click <em>View</em> next to your configured Identity Provider. In the details panel, locate the <em>Login Link</em>, copy its value, and open it in an incognito or private browsing session using your preferred browser.</p>
<p>Complete all first-time login steps as prompted, and if the SAML assertions and conversion rules were applied correctly, and the federation flow succeeded, you should be redirected to the Open Telekom Cloud Console, now logged in as a federated user. Your federated identity should reflect the mapped <em>username</em> and <em>organization membership</em> based on the SAML attributes provided by ZITADEL, confirming that the trust relationship and role mappings are functioning as intended.</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-241/assets/images/Screenshot_from_2025-04-17_08-10-39-bf18909958d5a02f98dc181b99fc2ce0.png" width="1915" height="773" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="debugging">Debugging<a href="#debugging" class="hash-link" aria-label="Direct link to Debugging" title="Direct link to Debugging">​</a></h2>
<p>If the SAML federation flow is not working as expected, follow this step-by-step guide to isolate and resolve issues:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-inspect-zitadel-logs">1. Inspect ZITADEL Logs<a href="#1-inspect-zitadel-logs" class="hash-link" aria-label="Direct link to 1. Inspect ZITADEL Logs" title="Direct link to 1. Inspect ZITADEL Logs">​</a></h4>
<p>Check the ZITADEL pod logs for any runtime errors or failed SAML processing:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl logs </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-n</span><span class="token plain"> zitadel </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain">zitadel-pod-name</span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Look for messages related to SAML assertions, Action execution, or failed request handling.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-verify-action-execution">2. Verify Action Execution<a href="#2-verify-action-execution" class="hash-link" aria-label="Direct link to 2. Verify Action Execution" title="Direct link to 2. Verify Action Execution">​</a></h4>
<ul>
<li>Ensure the Action name and the JavaScript function name are <strong>identical</strong>.</li>
<li>Confirm the Action is bound to the correct <strong>Flow</strong> and <strong>Trigger</strong> (<code>PreSAMLResponse</code>).</li>
<li>Use ZITADEL’s audit logs or admin interface to verify that the Action is being executed.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-review-the-saml-assertion">3. Review the SAML Assertion<a href="#3-review-the-saml-assertion" class="hash-link" aria-label="Direct link to 3. Review the SAML Assertion" title="Direct link to 3. Review the SAML Assertion">​</a></h4>
<p>Use a browser extension like <strong>SAML-tracer</strong> to inspect the actual SAML Response from ZITADEL.</p>
<p>Check for:</p>
<ul>
<li>Presence of expected attributes (<code>Roles</code>, <code>OrgID</code>, etc.)</li>
<li>Correct <code>NameID</code> format</li>
<li>Proper digital signature</li>
<li>Matching certificate from metadata</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-validate-metadata-exchange">4. Validate Metadata Exchange<a href="#4-validate-metadata-exchange" class="hash-link" aria-label="Direct link to 4. Validate Metadata Exchange" title="Direct link to 4. Validate Metadata Exchange">​</a></h4>
<p>Make sure metadata was correctly exchanged between both parties:</p>
<ul>
<li>ZITADEL metadata (served at): <code>https://&lt;ZITADEL_EXTERNALDOMAIN&gt;/saml/v2/metadata</code></li>
<li>OTC metadata (configured in ZITADEL): <code>https://auth.otc.t-systems.com/authui/saml/metadata.xml</code></li>
</ul>
<p>Ensure both endpoints are reachable and contain valid XML metadata.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-check-tls-and-dns">5. Check TLS and DNS<a href="#5-check-tls-and-dns" class="hash-link" aria-label="Direct link to 5. Check TLS and DNS" title="Direct link to 5. Check TLS and DNS">​</a></h4>
<p>Verify the following for your ZITADEL domain:</p>
<ul>
<li>DNS <code>A</code> record correctly resolves to your ELB’s <strong>Elastic IP</strong></li>
<li>TLS certificate is valid and trusted</li>
<li>The domain is publicly accessible</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="6-debug-open-telekom-cloud-idp-conversion-rules">6. Debug Open Telekom Cloud IdP Conversion Rules<a href="#6-debug-open-telekom-cloud-idp-conversion-rules" class="hash-link" aria-label="Direct link to 6. Debug Open Telekom Cloud IdP Conversion Rules" title="Direct link to 6. Debug Open Telekom Cloud IdP Conversion Rules">​</a></h4>
<p>In the Open Telekom Cloud IAM Console:</p>
<ol>
<li>Go to <em>Identity Providers</em> -&gt; <em>Modify</em> -&gt; <em>Edit Rules</em></li>
<li>Verify that the rules match the SAML attributes returned by ZITADEL</li>
<li>Use test users to validate whether the expected IAM group is assigned</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="8-test-in-incognito-mode">8. Test in Incognito Mode<a href="#8-test-in-incognito-mode" class="hash-link" aria-label="Direct link to 8. Test in Incognito Mode" title="Direct link to 8. Test in Incognito Mode">​</a></h4>
<p>Always perform SAML login tests in a private browser session to avoid cached credentials or tokens:</p>
<ul>
<li>Go to <em>Identity Providers</em> -&gt; <em>View</em></li>
<li>Copy the <strong>Login Link</strong></li>
<li>Paste it in a new <strong>Incognito/Private Browsing</strong> window</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Additional Tools</div><div class="admonitionContent_BuS1"><ul>
<li><a href="https://chromewebstore.google.com/detail/saml-tracer/mpdajninpobndbfcldcmbpnnbhibjmch" target="_blank" rel="noopener noreferrer">SAML-tracer</a>: Firefox/Chrome Extension to inspect SAML traffic</li>
<li><a href="https://www.samltool.io" target="_blank" rel="noopener noreferrer">https://www.samltool.io</a>: for decoding and validating SAML assertions</li>
</ul></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-241/docs/tags/security">security</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-241/docs/tags/saml">saml</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-241/docs/tags/iam">iam</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-241/docs/tags/zitadel">zitadel</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/opentelekomcloud/docs-next/tree/main/docs/blueprints/by-use-case/security/zitadel/2_zitadel-as-identity-provider-iam.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/security/zitadel/deploy-zitadel-on-cce"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Deploy ZITADEL on CCE</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs-next/pr-preview/pr-241/docs/blueprints/by-use-case/storage/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Storage</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#creating-a-new-organization" class="table-of-contents__link toc-highlight">Creating a new Organization</a></li><li><a href="#creating-a-new-project" class="table-of-contents__link toc-highlight">Creating a new Project</a></li><li><a href="#creating-a-new-application" class="table-of-contents__link toc-highlight">Creating a new Application</a><ul><li><a href="#creating-a-new-user" class="table-of-contents__link toc-highlight">Creating a new User</a></li><li><a href="#creating-roles--authorizations" class="table-of-contents__link toc-highlight">Creating Roles &amp; Authorizations</a></li></ul></li><li><a href="#retrieving-zitadels-saml-20-metadata" class="table-of-contents__link toc-highlight">Retrieving ZITADEL&#39;s SAML 2.0 Metadata</a></li><li><a href="#creating-a-new-action" class="table-of-contents__link toc-highlight">Creating a new Action</a><ul><li><a href="#creating-new-script" class="table-of-contents__link toc-highlight">Creating new Script</a></li><li><a href="#binding-script-to-a-flow" class="table-of-contents__link toc-highlight">Binding Script to a Flow</a></li></ul></li><li><a href="#configuring-iam" class="table-of-contents__link toc-highlight">Configuring IAM</a><ul><li><a href="#creating-a-new-identity-provider" class="table-of-contents__link toc-highlight">Creating a new Identity Provider</a></li><li><a href="#configuring-the-new-identity-provider" class="table-of-contents__link toc-highlight">Configuring the new Identity Provider</a></li><li><a href="#configuring-the-conversion-rules" class="table-of-contents__link toc-highlight">Configuring the Conversion Rules</a></li></ul></li><li><a href="#validating" class="table-of-contents__link toc-highlight">Validating</a></li><li><a href="#debugging" class="table-of-contents__link toc-highlight">Debugging</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="align-items-center" style="margin:0 0 0 32px"><div class="col-10 text-right"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Help Center</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/products-services/roadmap" target="_blank" rel="noopener noreferrer" class="footer__link-item">Portfolio Roadmap</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/products-services/core-services/certifications" target="_blank" rel="noopener noreferrer" class="footer__link-item">Core Services Certifications</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://community.open-telekom-cloud.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Forums</a></li><li class="footer__item"><a href="https://www.youtube.com/playlist?list=PLS60dhorR-hgQ5n5L1boEQh0oVD-_k75p" target="_blank" rel="noopener noreferrer" class="footer__link-item">Webinars<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/sdk.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDKs</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/drivers.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Drivers &amp; Tools</a></li><li class="footer__item"><a href="https://registry.terraform.io/providers/opentelekomcloud/opentelekomcloud/latest/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terraform Provider<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/ansible-collection-cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ansible Collections</a></li><li class="footer__item"><a href="https://designer.otc-service.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud Create</a></li></ul></div><div class="col footer__col"><div class="footer__title">API</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/api.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">REST API</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/api_guidelines/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">REST API Usage Guidelines</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/regions-and-endpoints/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Endpoints</a></li><li class="footer__item"><a href="https://status.otc-service.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status Dashboard</a></li></ul></div></div></div></div></div><scale-telekom-footer type="minimal"><scale-telekom-footer-content><span slot="notice">© T-Systems International GmbH 2025<!-- --> <scale-tag size="small" style="margin:0 0 0 8px" color="orange" type="strong">0.1.PR241-112-3c158d1-ephemeral</scale-tag></span><ul slot="navigation"><li><a href="https://open-telekom-cloud.com/en/contact"> Contact </a></li><li><a href="https://open-telekom-cloud.com/en/data-protection"> Data privacy </a></li><li><a href="https://open-telekom-cloud.com/en/disclaimer-of-liability"> Disclaimer of liabilities </a></li><li><a href="https://open-telekom-cloud.com/en/imprint"> Imprint </a></li></ul></scale-telekom-footer-content></scale-telekom-footer></footer></div>
</body>
</html>