"use strict";(self.webpackChunkdocs_next=self.webpackChunkdocs_next||[]).push([[31396],{95545:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"best-practices/security-services/web-application-firewall/using-lts-to-quickly-query-and-analyze-waf-access-logs","title":"Using LTS to Quickly Query and Analyze WAF Access Logs","description":"After you authorize WAF to access Log Tank Service (LTS), you can use the WAF logs recorded by LTS for quick and efficient real-time analysis, device O&M management, and analysis of service trends.","source":"@site/docs/best-practices/security-services/web-application-firewall/using-lts-to-quickly-query-and-analyze-waf-access-logs.md","sourceDirName":"best-practices/security-services/web-application-firewall","slug":"/best-practices/security-services/web-application-firewall/using-lts-to-quickly-query-and-analyze-waf-access-logs","permalink":"/docs-next/pr-preview/pr-250/docs/best-practices/security-services/web-application-firewall/using-lts-to-quickly-query-and-analyze-waf-access-logs","draft":false,"unlisted":false,"editUrl":"https://github.com/opentelekomcloud/docs-next/tree/main/docs/best-practices/security-services/web-application-firewall/using-lts-to-quickly-query-and-analyze-waf-access-logs.md","tags":[{"inline":true,"label":"waf","permalink":"/docs-next/pr-preview/pr-250/docs/tags/waf"},{"inline":true,"label":"logging","permalink":"/docs-next/pr-preview/pr-250/docs/tags/logging"},{"inline":true,"label":"lts","permalink":"/docs-next/pr-preview/pr-250/docs/tags/lts"}],"version":"current","frontMatter":{"id":"using-lts-to-quickly-query-and-analyze-waf-access-logs","title":"Using LTS to Quickly Query and Analyze WAF Access Logs","tags":["waf","logging","lts"]},"sidebar":"bestPracticesSidebar","previous":{"title":"Combining WAF and Layer-7 Load Balancers to Protect Services over Any Ports","permalink":"/docs-next/pr-preview/pr-250/docs/best-practices/security-services/web-application-firewall/combining-waf-and-layer-7-load-balancers-to-protect-services-over-any-ports"},"next":{"title":"Configuring Anti-Crawler Rules to Prevent Crawler Attacks","permalink":"/docs-next/pr-preview/pr-250/docs/best-practices/security-services/web-application-firewall/configuring-anti-crawler-rules-to-prevent-crawler-attacks"}}');var i=n(74848),c=n(28453);const r={id:"using-lts-to-quickly-query-and-analyze-waf-access-logs",title:"Using LTS to Quickly Query and Analyze WAF Access Logs",tags:["waf","logging","lts"]},a="Using LTS to Quickly Query and Analyze WAF Access Logs",l={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Procedure",id:"procedure",level:2}];function d(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"using-lts-to-quickly-query-and-analyze-waf-access-logs",children:"Using LTS to Quickly Query and Analyze WAF Access Logs"})}),"\n",(0,i.jsxs)(s.p,{children:["After you authorize WAF to access Log Tank Service (LTS), you can use the WAF logs recorded by ",(0,i.jsx)(s.a,{href:"https://www.open-telekom-cloud.com/en/products-services/core-services/log-tank-service",children:"LTS"})," for quick and efficient real-time analysis, device O&M management, and analysis of service trends."]}),"\n",(0,i.jsxs)(s.p,{children:["This practice uses the access log stream ",(0,i.jsx)(s.strong,{children:"lts-waf-access"})," of log group\n",(0,i.jsx)(s.strong,{children:"lts-waf"})," as an example to describe how to use LTS to quickly query\nand analyze logs."]}),"\n",(0,i.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"You have connected the website you want to protect to WAF."}),"\n",(0,i.jsxs)(s.li,{children:["You have ",(0,i.jsx)(s.a,{href:"https://docs.otc.t-systems.com/web-application-firewall-dedicated/umn/enabling_lts_for_waf_logging.html",children:"enabled LTS for WAF\nlogging"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"procedure",children:"Procedure"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Log in to the management console."}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Click ",(0,i.jsx)(s.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001192435242.jpg",alt:"image1"})," in\nthe upper left corner of the management console and select a region\nor project."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Click ",(0,i.jsx)(s.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001237195219.png",alt:"image2"})," in\nthe upper left corner of the page and choose ",(0,i.jsx)(s.em,{children:"Management &\nGovernance"})," -> ",(0,i.jsx)(s.em,{children:"Log Tank Service"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["In the ",(0,i.jsx)(s.em,{children:"Log Group Name"})," column, click the name of the target log\ngroup (for example, ",(0,i.jsx)(s.strong,{children:"lts-group-waf"}),") to go the log stream page."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["In the ",(0,i.jsx)(s.em,{children:"Log Stream Name"})," column, click the name of the log stream\nused for WAF access logs (for example, ",(0,i.jsx)(s.strong,{children:"lts-topic-waf-access"}),").\nThen, select the ",(0,i.jsx)(s.em,{children:"Log Stream"})," tab."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001698121802.png",alt:"Figure 1 Accessing the log stream\npage"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["On the log stream details page, click\n",(0,i.jsx)(s.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001811225769.png",alt:"image3"})," in the\nupper right corner. On the page displayed, click the ",(0,i.jsx)(s.em,{children:"Cloud\nStructured Parsing"})," tab."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Select ",(0,i.jsx)(s.em,{children:"JSON"})," as the log structure, as shown in figure below:"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001236748339.png",alt:"Figure 2\nJSON"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["In the ",(0,i.jsx)(s.em,{children:"Step 1 Select a sample log event."})," area, click ",(0,i.jsx)(s.em,{children:"Select\nfrom existing log events"}),". In the displayed ",(0,i.jsx)(s.em,{children:"Select Log Event"}),"\ndialog box, select a log and click ",(0,i.jsx)(s.em,{children:"OK"}),"."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001192108582.png",alt:"Figure 3 Select Log\nEvent"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["In the ",(0,i.jsx)(s.em,{children:"Step 2 Extract fields"})," area, click ",(0,i.jsx)(s.em,{children:"Intelligent\nExtraction"})," and enable quick analysis for the log field you want to\nanalyze (for example, ",(0,i.jsx)(s.strong,{children:"remote_ip"}),")."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"remote_ip"}),": IP address of a client from which the request\noriginates."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001192348152.png",alt:"Figure 4 Selecting log fields for quick\nanalysis"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Click ",(0,i.jsx)(s.em,{children:"Save"}),". Then, LTS will start a quick analysis and do\nstatistics for logs collected in a certain period."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001192109594.png",alt:"Figure 5 Quickly analysis of access\nlogs"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["In the navigation pane, choose ",(0,i.jsx)(s.em,{children:"Visualization"}),". On the right pane,\nselect a log query time range, enter an SQL statement in the search\nbox, and click ",(0,i.jsx)(s.em,{children:"Query"})," to query the specified log."]}),"\n",(0,i.jsx)(s.p,{children:"You can enter either of the following SQL statements in the search\nbox to query logs of a specified IP address:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"select * where remote_ip = 'xx.xx.xx.xx' \n"})}),"\n",(0,i.jsx)(s.p,{children:"or"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sql",children:"select * where remote_ip like 'xx.xx.xx%'\n"})}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>a});var t=n(96540);const i={},c=t.createContext(i);function r(e){const s=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(c.Provider,{value:s},e.children)}}}]);