"use strict";(self.webpackChunkdocs_next=self.webpackChunkdocs_next||[]).push([[89619],{75662:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"best-practices/security-services/web-application-firewall/configuring-anti-crawler-rules-to-prevent-crawler-attacks","title":"Configuring Anti-Crawler Rules to Prevent Crawler Attacks","description":"WAF provides three anti-crawler policies, bot detection by identifying User-Agent, website anti-crawler by checking browser validity, and CC attack protection by limiting the access frequency, to comprehensively mitigate crawler attacks against your websites.","source":"@site/docs/best-practices/security-services/web-application-firewall/configuring-anti-crawler-rules-to-prevent-crawler-attacks.md","sourceDirName":"best-practices/security-services/web-application-firewall","slug":"/best-practices/security-services/web-application-firewall/configuring-anti-crawler-rules-to-prevent-crawler-attacks","permalink":"/docs-next/pr-preview/pr-250/docs/best-practices/security-services/web-application-firewall/configuring-anti-crawler-rules-to-prevent-crawler-attacks","draft":false,"unlisted":false,"editUrl":"https://github.com/opentelekomcloud/docs-next/tree/main/docs/best-practices/security-services/web-application-firewall/configuring-anti-crawler-rules-to-prevent-crawler-attacks.md","tags":[{"inline":true,"label":"waf","permalink":"/docs-next/pr-preview/pr-250/docs/tags/waf"},{"inline":true,"label":"anti-crawler","permalink":"/docs-next/pr-preview/pr-250/docs/tags/anti-crawler"},{"inline":true,"label":"security","permalink":"/docs-next/pr-preview/pr-250/docs/tags/security"}],"version":"current","frontMatter":{"id":"configuring-anti-crawler-rules-to-prevent-crawler-attacks","title":"Configuring Anti-Crawler Rules to Prevent Crawler Attacks","tags":["waf","anti-crawler","security"]},"sidebar":"bestPracticesSidebar","previous":{"title":"Using LTS to Quickly Query and Analyze WAF Access Logs","permalink":"/docs-next/pr-preview/pr-250/docs/best-practices/security-services/web-application-firewall/using-lts-to-quickly-query-and-analyze-waf-access-logs"},"next":{"title":"RAID Array Creation with EVS Disks","permalink":"/docs-next/pr-preview/pr-250/docs/best-practices/storage/elastic-volume-service/raid-array-creation-with-evs-disks"}}');var n=t(74848),r=t(28453);const c={id:"configuring-anti-crawler-rules-to-prevent-crawler-attacks",title:"Configuring Anti-Crawler Rules to Prevent Crawler Attacks",tags:["waf","anti-crawler","security"]},a="Configuring Anti-Crawler Rules to Prevent Crawler Attacks",l={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Enabling Robot Detection to Identify User-Agent",id:"enabling-robot-detection-to-identify-user-agent",level:2},{value:"Enabling Anti-Crawler Protection to Verify Browser Validity",id:"enabling-anti-crawler-protection-to-verify-browser-validity",level:2},{value:"Configuring CC Attack Protection to Limit Access Frequency",id:"configuring-cc-attack-protection-to-limit-access-frequency",level:2}];function d(e){const i={admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"configuring-anti-crawler-rules-to-prevent-crawler-attacks",children:"Configuring Anti-Crawler Rules to Prevent Crawler Attacks"})}),"\n",(0,n.jsx)(i.p,{children:"WAF provides three anti-crawler policies, bot detection by identifying User-Agent, website anti-crawler by checking browser validity, and CC attack protection by limiting the access frequency, to comprehensively mitigate crawler attacks against your websites."}),"\n",(0,n.jsx)(i.p,{children:"Web crawlers make network information collection and query easy, but\nthey also introduce the following negative impacts:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Web crawlers always consume too much server bandwidth and increase\nserver load as they use specific policies to browser as much\ninformation of high value on a website as possible."}),"\n",(0,n.jsx)(i.li,{children:"Bad actors may use web crawlers to launch DoS attacks against\nwebsites. As a result, websites may fail to provide normal services\ndue to resource exhaustion."}),"\n",(0,n.jsx)(i.li,{children:"Bad actors may use web crawlers to steal mission-critical data on\nyour websites, which will damage your economic interests."}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,n.jsx)(i.p,{children:"The domain name has been connected to WAF."}),"\n",(0,n.jsx)(i.h2,{id:"enabling-robot-detection-to-identify-user-agent",children:"Enabling Robot Detection to Identify User-Agent"}),"\n",(0,n.jsx)(i.p,{children:"If you enable robot detection, WAF can detect and block threats such as\nmalicious crawlers, scanners, and web shells."}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"Log in to the management console."}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Click ",(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001533036717.jpg",alt:"image1"})," in\nthe upper left corner of the management console and select a region\nor project."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Click ",(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001533157169.png",alt:"image2"})," in\nthe upper left corner and choose ",(0,n.jsx)(i.em,{children:"Web Application Firewall"})," under\n",(0,n.jsx)(i.em,{children:"Security"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["In the navigation pane on the left, choose ",(0,n.jsx)(i.em,{children:"Policies"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Click on ",(0,n.jsx)(i.em,{children:"Create Policy"}),", type in a Policy Name and then click on\nthe created Policy after its been created."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Ensure that ",(0,n.jsx)(i.em,{children:"Basic Web Protection"})," is enabled (status:\n",(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001176153064.png",alt:"image3"}),")."]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001716153600.png",alt:"Figure 1 Basic Web Protection configuration\narea"})}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["In ",(0,n.jsx)(i.em,{children:"Basic Web Protection"})," click ",(0,n.jsx)(i.em,{children:"Advanced Settings"})," and enable\n",(0,n.jsx)(i.em,{children:"General Check"})," and ",(0,n.jsx)(i.em,{children:"Webshell Detection"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"Enable Anti-Crawler protection functions based on your business\nneeds."}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001072768952.png",alt:"Figure 2 Feature\nLibrary"})}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["If WAF detects that a malicious crawler or scanner is crawling your\nwebsite, WAF immediately blocks it and logs the event. You can view the\ncrawler protection logs on the ",(0,n.jsx)(i.em,{children:"Events"})," page."]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001182529643.png",alt:"image6"})}),"\n",(0,n.jsx)(i.h2,{id:"enabling-anti-crawler-protection-to-verify-browser-validity",children:"Enabling Anti-Crawler Protection to Verify Browser Validity"}),"\n",(0,n.jsx)(i.p,{children:"If you enable anti-crawler protection, WAF dynamically analyzes website\nservice models and accurately identifies crawler behavior based on data\nrisk control and bot identification approaches."}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"Log in to the management console."}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Click ",(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001533461761.jpg",alt:"image7"})," in\nthe upper left corner of the management console and select a region\nor project."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Click ",(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001483021752.png",alt:"image8"})," in\nthe upper left corner and choose ",(0,n.jsx)(i.em,{children:"Web Application Firewall"})," under\n",(0,n.jsx)(i.em,{children:"Security & Compliance"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["In the navigation pane on the left, choose ",(0,n.jsx)(i.em,{children:"Policies"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Click on ",(0,n.jsx)(i.em,{children:"Create Policy"}),", type in a Policy Name and then click on\nthe created Policy after its been created."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Select the ",(0,n.jsx)(i.em,{children:"JavaScript"})," tab and change ",(0,n.jsx)(i.em,{children:"Status"})," if needed."]}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.em,{children:"JavaScript"})," anti-crawler is disabled by default. To enable it,\nclick ",(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0234013368.png",alt:"image11"})," and\nthen click ",(0,n.jsx)(i.em,{children:"Confirm"})," in the displayed dialog box to toggle on\n",(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0234013391.png",alt:"image12"}),"."]}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"Protective Action"}),": ",(0,n.jsx)(i.em,{children:"Block"}),", ",(0,n.jsx)(i.em,{children:"Verification code"}),", and ",(0,n.jsx)(i.em,{children:"Log\nonly"}),"."]}),"\n",(0,n.jsx)(i.admonition,{type:"note",children:(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"Verification code"}),": If the JavaScript challenge fails, a\nverification code is required. Requests will be blocked unless the\nvisitor enters a correct verification code."]})}),"\n",(0,n.jsx)(i.admonition,{type:"important",children:(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"Cookies must be enabled and JavaScript supported by any browser\nused to access a website protected by anti-crawler protection\nrules."}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"If your service is connected to CDN, exercise caution when using\nthe JS anti-crawler function. CDN caching may impact JS anti-crawler performance and page\naccessibility."}),"\n"]}),"\n"]})}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"Configure a JavaScript-based anti-crawler rule by referring to the table below."}),"\n",(0,n.jsxs)(i.p,{children:["Two protective actions are provided: ",(0,n.jsx)(i.em,{children:"Protect all requests"})," and\n",(0,n.jsx)(i.em,{children:"Protect specified requests"}),"."]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"To protect all requests except requests that hit a specified\nrule"}),"\n",(0,n.jsxs)(i.p,{children:["Set ",(0,n.jsx)(i.em,{children:"Protection Mode"})," to ",(0,n.jsx)(i.em,{children:"Protect all requests"}),". Then, click\n",(0,n.jsx)(i.em,{children:"Exclude Rule"}),", configure the request exclusion rule, and\nclick ",(0,n.jsx)(i.em,{children:"Confirm"}),"."]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001481001694.png",alt:"Figure 3 Exclude\nRule"})}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"To protect a specified request only"}),"\n",(0,n.jsxs)(i.p,{children:["Set ",(0,n.jsx)(i.em,{children:"Protection Mode"})," to ",(0,n.jsx)(i.em,{children:"Protect specified requests"}),", click\n",(0,n.jsx)(i.em,{children:"Add Rule"}),", configure the request rule, and click ",(0,n.jsx)(i.em,{children:"Confirm"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Parameter"}),(0,n.jsx)(i.th,{children:"Description"}),(0,n.jsx)(i.th,{children:"Example Value"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Rule Name"}),(0,n.jsx)(i.td,{children:"Name of the rule"}),(0,n.jsx)(i.td,{children:"waf"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Rule Description"}),(0,n.jsx)(i.td,{children:"A brief description of the rule. This parameter is optional."}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"-"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Effective Date"}),(0,n.jsx)(i.td,{children:"Time the rule takes effect."}),(0,n.jsx)(i.td,{children:"Immediate"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Condition List"}),(0,n.jsx)(i.td,{children:"Parameters for configuring a condition are as follows:  Field: Select the field you want to protect from the drop-down list. Currently, only Path and User Agent are included. Subfield Logic: Select a logical relationship from the drop-down list.   Note  If you set Logic to Include any value, Exclude any value, Equal to any value, Not equal to any value, Prefix is any value, Prefix is not any of them, Suffix is any value, or Suffix is not any of them, you need to select a reference table.  Content: Enter or select the content that matches the condition."}),(0,n.jsx)(i.td,{children:"Path Include /admin"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Priority"}),(0,n.jsx)(i.td,{children:"Rule priority. If you have added multiple rules, rules are matched by priority. The smaller the value you set, the higher the priority."}),(0,n.jsx)(i.td,{children:"5"})]})]})]}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"Table 1"})," Parameters of a JavaScript-based anti-crawler protection\nrule"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"If you enable anti-crawler, web visitors can only access web pages\nthrough a browser."}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001132757446.png",alt:"image13"})}),"\n",(0,n.jsx)(i.h2,{id:"configuring-cc-attack-protection-to-limit-access-frequency",children:"Configuring CC Attack Protection to Limit Access Frequency"}),"\n",(0,n.jsx)(i.p,{children:"A CC attack protection rule uses a specific IP address, cookie, or\nreferer to limit the access to a specific path (URL), mitigating the\nimpact of CC attacks on web services."}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsx)(i.p,{children:"Log in to the management"}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Click ",(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001533701661.jpg",alt:"image14"}),"\nin the upper left corner of the management console and select a\nregion or project."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Click ",(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001533182113.png",alt:"image15"}),"\nin the upper left corner and choose ",(0,n.jsx)(i.em,{children:"Web Application Firewall"}),"\nunder ",(0,n.jsx)(i.em,{children:"Security & Compliance"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["In the navigation pane on the left, choose ",(0,n.jsx)(i.em,{children:"Policies"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["Click on the ",(0,n.jsx)(i.em,{children:"Policy"})," and ofn the displayed page,, keep the",(0,n.jsx)(i.br,{}),"\n",(0,n.jsx)(i.em,{children:"Status"})," toggle on\n(",(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001176153064.png",alt:"image16"}),") for\n",(0,n.jsx)(i.em,{children:"CC Attack Protection"}),"."]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001763942269.png",alt:"Figure 4 CC Attack Protection configuration\narea"})}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:["In ",(0,n.jsx)(i.strong,{children:"CC Attack Protection"})," below ",(0,n.jsx)(i.strong,{children:"Status"})," , click ",(0,n.jsx)(i.strong,{children:"Customize\nRule"})," and then ",(0,n.jsx)(i.strong,{children:"Add rule"}),". The following uses IP address-based\nrate limiting and human-machine verification as examples to describe\nhow to add an IP address-based rate limiting rule, as shown in the figue below:"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0000001490687826.png",alt:"Figure 5 Per IP\naddress"})}),"\n",(0,n.jsx)(i.p,{children:"If the number of access requests exceeds the configured rate limit,\nthe visitors are required to enter a verification code to continue\nthe access."}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:"https://arch-assets-dev.obs.eu-de.otc.t-systems.com/static/img/docs/best-practices/security-services/web-application-firewall/en-us_image_0293910230.png",alt:"image17"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},28453:(e,i,t)=>{t.d(i,{R:()=>c,x:()=>a});var s=t(96540);const n={},r=s.createContext(n);function c(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);