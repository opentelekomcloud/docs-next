"use strict";(self.webpackChunkdocs_next=self.webpackChunkdocs_next||[]).push([[11670],{29663:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"blueprints/by-use-case/collaboration/deploy-formbricks-on-cce","title":"Deploy Formbricks on CCE","description":"This blueprint shows how to run Formbricks on Open Telekom Cloud Cloud Container Engine, giving you a turnkey path to a self-hosted, scalable feedback platform. Formbricks is an open-source, AGPLv3-licensed suite (with a free and a commercial counterpart) that lets you build and deliver in-app, web-embedded, link-based or email surveys without sacrificing data privacy.","source":"@site/docs/blueprints/by-use-case/collaboration/deploy-formbricks-on-cce.md","sourceDirName":"blueprints/by-use-case/collaboration","slug":"/blueprints/by-use-case/collaboration/deploy-formbricks-on-cce","permalink":"/docs-next/pr-preview/pr-292/docs/blueprints/by-use-case/collaboration/deploy-formbricks-on-cce","draft":false,"unlisted":false,"editUrl":"https://github.com/opentelekomcloud/docs-next/tree/main/docs/blueprints/by-use-case/collaboration/deploy-formbricks-on-cce.md","tags":[{"inline":true,"label":"formbricks","permalink":"/docs-next/pr-preview/pr-292/docs/tags/formbricks"},{"inline":true,"label":"collaboration","permalink":"/docs-next/pr-preview/pr-292/docs/tags/collaboration"},{"inline":true,"label":"cce","permalink":"/docs-next/pr-preview/pr-292/docs/tags/cce"},{"inline":true,"label":"surveys","permalink":"/docs-next/pr-preview/pr-292/docs/tags/surveys"},{"inline":true,"label":"feedback","permalink":"/docs-next/pr-preview/pr-292/docs/tags/feedback"}],"version":"current","frontMatter":{"id":"deploy-formbricks-on-cce","title":"Deploy Formbricks on CCE","tags":["formbricks","collaboration","cce","surveys","feedback"]},"sidebar":"blueprintsSidebar","previous":{"title":"Collaboration","permalink":"/docs-next/pr-preview/pr-292/docs/blueprints/by-use-case/collaboration/"},"next":{"title":"DevOps","permalink":"/docs-next/pr-preview/pr-292/docs/blueprints/by-use-case/devops/"}}');var r=s(74848),t=s(28453);const a={id:"deploy-formbricks-on-cce",title:"Deploy Formbricks on CCE",tags:["formbricks","collaboration","cce","surveys","feedback"]},o="Deploy Formbricks on CCE",l={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Creating a PostgreSQL Database",id:"creating-a-postgresql-database",level:2},{value:"Installing pgvector Plugin",id:"installing-pgvector-plugin",level:3},{value:"Installing PostgreSQL Client",id:"installing-postgresql-client",level:4},{value:"Creating a new Database",id:"creating-a-new-database",level:4},{value:"Registering pgvector in the public Schema",id:"registering-pgvector-in-the-public-schema",level:4},{value:"Creating a Redis Instance",id:"creating-a-redis-instance",level:2},{value:"Creating a CCE Cluster",id:"creating-a-cce-cluster",level:2},{value:"Preparing the CCE Cluster",id:"preparing-the-cce-cluster",level:2},{value:"Installing Formbricks using Helm",id:"installing-formbricks-using-helm",level:2},{value:"Preparing Helm Chart Values",id:"preparing-helm-chart-values",level:3},{value:"Installing Helm Chart",id:"installing-helm-chart",level:3},{value:"Verification",id:"verification",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Clean Pending Migrations",id:"clean-pending-migrations",level:3},{value:"Drop Database",id:"drop-database",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"deploy-formbricks-on-cce",children:"Deploy Formbricks on CCE"})}),"\n",(0,r.jsxs)(n.p,{children:["This blueprint shows how to run Formbricks on Open Telekom Cloud Cloud Container Engine, giving you a turnkey path to a self-hosted, scalable feedback platform. ",(0,r.jsx)(n.a,{href:"https://formbricks.com/",children:"Formbricks"})," is an open-source, ",(0,r.jsx)(n.a,{href:"https://www.tldrlegal.com/license/gnu-affero-general-public-license-v3-agpl-3-0",children:"AGPLv3-licensed"})," suite (with a free and a commercial counterpart) that lets you build and deliver in-app, web-embedded, link-based or email surveys without sacrificing data privacy."]}),"\n",(0,r.jsx)(n.p,{children:"Formbricks includes a no-code survey editor, real-time response tracking and analysis, and the flexibility to target user groups based on their actions or attributes. Hosting on CCE combines those benefits with the operational simplicity and enterprise-grade SLAs of Open Telekom Cloud, so you can focus on gathering insights rather worrying where your data is saved."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["a ",(0,r.jsx)(n.strong,{children:"Cloud Container Engine (CCE) cluster"})]}),"\n",(0,r.jsxs)(n.li,{children:["a Redis instance in ",(0,r.jsx)(n.strong,{children:"Distributed Cache Service (DCS)"})]}),"\n",(0,r.jsxs)(n.li,{children:["a PostgreSQL instance in ",(0,r.jsx)(n.strong,{children:"Relational Database Service (RDS)"})]}),"\n",(0,r.jsxs)(n.li,{children:["a bastion host in ",(0,r.jsx)(n.strong,{children:"Elastic Cloud Service (ECS)"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-postgresql-database",children:"Creating a PostgreSQL Database"}),"\n",(0,r.jsx)(n.p,{children:"Formbricks requires persistent storage to retain data and configuration across pod restarts. While it's technically feasible to deploy a PostgreSQL instance directly within the CCE cluster, this approach introduces operational complexity and shifts responsibility for database management to the application team. A more efficient solution is to leverage Open Telekom Cloud's Relational Database Service (RDS). It provides a scalable, fully managed PostgreSQL backend that integrates seamlessly with other managed services on the platform, significantly reducing administrative overhead and ensuring high availability and operational resilience."}),"\n",(0,r.jsx)(n.p,{children:"This step involves provisioning a PostgreSQL database instance via Open Telekom Cloud\u2019s RDS service. Select an instance class and storage configuration that align with your anticipated workload\u2014consider factors such as expected connection volume, data growth, and performance requirements. For production environments, it's recommended to opt for a compute-optimized or memory-optimized instance class, along with provisioned IOPS storage if consistent performance is critical. This ensures that Formbricks operates reliably under load and can scale as demand increases."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(66366).A+"",width:"1918",height:"791"})}),"\n",(0,r.jsx)(n.p,{children:"When provisioning the PostgreSQL instance, ensure the following network and security configurations are in place:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create two Security Groups, ",(0,r.jsx)(n.code,{children:"rds-instances"})," and ",(0,r.jsx)(n.code,{children:"rds-clients"}),", as described in best practice: ",(0,r.jsx)(n.a,{href:"/docs-next/pr-preview/pr-292/docs/best-practices/databases/relational-database-service/configure-sg-for-rds-instances",children:"Configure Security Groups for PostgreSQL RDS Instances and Clients"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Deploy the RDS instance within the same Virtual Private Cloud (VPC) as your CCE cluster to enable low-latency, private network communication between the application and the database."}),"\n",(0,r.jsxs)(n.li,{children:["Attach the previously created ",(0,r.jsx)(n.code,{children:"rds-instances"})," Security Group to the RDS instance. This group must allow inbound traffic on port ",(0,r.jsx)(n.code,{children:"5432"})," from the Subnet or Security Group associated with the CCE nodes to enable secure database access."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(44789).A+"",width:"2738",height:"954"})}),"\n",(0,r.jsx)(n.h3,{id:"installing-pgvector-plugin",children:"Installing pgvector Plugin"}),"\n",(0,r.jsxs)(n.p,{children:["Navigate to ",(0,r.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,r.jsx)(n.em,{children:"Relational Database Service"}),", choose your instance and then click ",(0,r.jsx)(n.em,{children:"Plugins"}),". Search for the plugin ",(0,r.jsx)(n.strong,{children:"vector"})," and click ",(0,r.jsx)(n.em,{children:"Install"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(84266).A+"",width:"1852",height:"741"})}),"\n",(0,r.jsx)(n.p,{children:"Installing the plugin is instantenous but we need afterwards to enable it. Connect, via SSH, to your bastion host and perform the following steps:"}),"\n",(0,r.jsx)(n.h4,{id:"installing-postgresql-client",children:"Installing PostgreSQL Client"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install postgresql-client\n"})}),"\n",(0,r.jsx)(n.h4,{id:"creating-a-new-database",children:"Creating a new Database"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'psql -h <RDS_INSTANCE_FLOATING_IP> -U root -d postgres -c "CREATE DATABASE formbricks;"\n'})}),"\n",(0,r.jsx)(n.h4,{id:"registering-pgvector-in-the-public-schema",children:"Registering pgvector in the public Schema"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"psql -h <RDS_INSTANCE_FLOATING_IP> -U root -d formbricks -c \"SELECT control_extension('create','vector','public');\"\n"})}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-redis-instance",children:"Creating a Redis Instance"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to ",(0,r.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,r.jsx)(n.em,{children:"Distributed Cache Service (for Redis)"})," -> ",(0,r.jsx)(n.em,{children:"Cache Manager"})," and click ",(0,r.jsx)(n.em,{children:"Create DCS Instance"}),". Choose the desirable ",(0,r.jsx)(n.strong,{children:"Engine"})," and ",(0,r.jsx)(n.strong,{children:"Instance Specifications"})," (a ",(0,r.jsx)(n.code,{children:"redis.ha.xu1.large.r2.1"})," flavor will suffice for this blueprint, but for production environments\nadjust to your needs estimations.)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(64496).A+"",width:"1853",height:"738"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"Make sure you place the instance in the same VPC as your CCE cluster."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(69992).A+"",width:"1853",height:"738"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Choose ",(0,r.jsx)(n.strong,{children:"Yes"})," for ",(0,r.jsx)(n.strong,{children:"Password Protected"})," instance and provide the credentials."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Finally, click ",(0,r.jsx)(n.em,{children:"Create Now"})," and wait till the instance is been provisioned. Then enter the information dashboard of the instance and note down the\n",(0,r.jsx)(n.strong,{children:"Connection Address"}),", as we are going to need it later to configure the Helm Chart values."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(45503).A+"",width:"1852",height:"741"})}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-cce-cluster",children:"Creating a CCE Cluster"}),"\n",(0,r.jsx)(n.p,{children:"To proceed with the setup, you'll need to provision a Cloud Container Engine (CCE) cluster. Use the Open Telekom Cloud wizard for cluster creation, and pay close attention to the following configuration specifics:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"High Availability (HA)"}),": For this blueprint, a non HA-cluster was used which is not advised for production workloads. However, if your workload demands fault tolerance and availability guarantees, consider enabling HA during creation\u2014as this setting is immutable post-deployment."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Network Placement"}),": Ensure the CCE cluster is provisioned within the ",(0,r.jsx)(n.strong,{children:"same VPC"})," as the RDS instance to facilitate secure and low-latency communication."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Subnet Configuration"}),": If you're using a single Subnet for both services, place the CCE worker nodes in the ",(0,r.jsx)(n.strong,{children:"same Subnet"})," as the RDS instance to align with the predefined security group and routing rules."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(65988).A+"",width:"1884",height:"1046"})}),"\n",(0,r.jsxs)(n.p,{children:["After the CCE cluster has been created, proceed to add worker nodes using the wizard. Once all nodes are in a ",(0,r.jsx)(n.strong,{children:"Running"})," or ",(0,r.jsx)(n.strong,{children:"Ready"})," state, you\u2019ll need to update their network configuration to enable outbound connectivity to the database."]}),"\n",(0,r.jsxs)(n.p,{children:["For each worker node, attach the previously created ",(0,r.jsx)(n.code,{children:"rds-client"})," Security Group in addition to any existing group already associated with the node. This step ensures that outbound traffic on port ",(0,r.jsx)(n.code,{children:"5432"}),"\u2014required for connecting to the RDS instance\u2014is permitted, establishing a secure and functional path between your application layer and the database backend."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(6527).A+"",width:"2666",height:"1198"})}),"\n",(0,r.jsxs)(n.admonition,{type:"caution",children:[(0,r.jsx)(n.p,{children:"Decide on the access method you'll use to interact with the CCE cluster post-deployment. There are two main options:"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Assigning an Elastic IP (EIP)"})," and allowing direct access over the public Internet."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Provisioning a bastion host"})," in a public Subnet within the same VPC, and using it as a secure jump point to reach internal resources."]}),"\n"]}),(0,r.jsxs)(n.p,{children:["While the first option is quicker to set up, ",(0,r.jsx)(n.strong,{children:"the recommended approach is to use a bastion host"}),". This method significantly reduces the attack surface by isolating the cluster from direct Internet exposure. The bastion can be tightly locked down with security groups and monitored more easily, aligning with best practices for secure infrastructure access."]})]}),"\n",(0,r.jsx)(n.h2,{id:"preparing-the-cce-cluster",children:"Preparing the CCE Cluster"}),"\n",(0,r.jsx)(n.p,{children:"Before deploying our workload, the CCE cluster must be equipped with a set of foundational components. In this section, we'll install and configure essential prerequisites such as the NGINX Ingress Controller for routing external traffic, cert-manager for managing TLS certificates, and other supporting workloads. These components establish the baseline infrastructure required to expose services securely and ensure smooth operation of the application stack within the Kubernetes environment."}),"\n",(0,r.jsxs)(n.p,{children:["Follow the guidelines in the best practice ",(0,r.jsx)(n.a,{href:"/docs-next/pr-preview/pr-292/docs/best-practices/containers/cloud-container-engine/prepare-cce-for-external-workloads",children:"Prepare CCE to Expose Workloads"})," before proceeding to the next steps."]}),"\n",(0,r.jsx)(n.h2,{id:"installing-formbricks-using-helm",children:"Installing Formbricks using Helm"}),"\n",(0,r.jsx)(n.h3,{id:"preparing-helm-chart-values",children:"Preparing Helm Chart Values"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Download the default Helm Chart values from ",(0,r.jsx)(n.a,{href:"https://github.com/formbricks/formbricks/blob/main/helm-chart/values.yaml",children:"https://github.com/formbricks/formbricks/blob/main/helm-chart/values.yaml"})," and save it\nin your working directory."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under the ",(0,r.jsx)(n.code,{children:"env"})," stanza add the variable ",(0,r.jsx)(n.code,{children:"EMAIL_VERIFICATION_DISABLED"})," with value ",(0,r.jsx)(n.code,{children:"1"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'  env:\n    DOCKER_CRON_ENABLED:\n        value: "0"\n    EMAIL_VERIFICATION_DISABLED:\n        value: "1"\n'})}),"\n",(0,r.jsxs)(n.admonition,{type:"important",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Do not disable email verification in production"}),"! We are setting ",(0,r.jsx)(n.code,{children:"EMAIL_VERIFICATION_DISABLED"})," here to ",(0,r.jsx)(n.code,{children:"true"})," only for demonstration purposes."]}),(0,r.jsxs)(n.p,{children:["More on the SMTP configuration of Formbricks can be found ",(0,r.jsx)(n.a,{href:"https://formbricks.com/docs/self-hosting/configuration/smtp#smtp-configuration",children:"here"}),"."]})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under the ",(0,r.jsx)(n.code,{children:"ingress"})," stanza set the variables values as following:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ingress.enabled"})," to ",(0,r.jsx)(n.code,{children:"true"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ingressClassName"})," to ",(0,r.jsx)(n.code,{children:"nginx"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tls.hosts"})," and ",(0,r.jsx)(n.code,{children:"hosts.host"})," as the FQDN under which you wish to expose this workload"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"annotations.cert-manager.io/cluster-issuer"})," as the ",(0,r.jsx)(n.code,{children:"ClusterIssuer"})," you created in the previous steps (e.g.: ",(0,r.jsx)(n.code,{children:"opentelekomcloud-letsencrypt"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"e.g.:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'ingress:\n    enabled: true  \n    ingressClassName: nginx  \n    hosts:\n        - host: <YOUR.(SUB)DOMAIN.ADDRESS>\n        paths:\n            - path: /\n            pathType: "Prefix"\n            serviceName: "formbricks"\n    annotations: \n        cert-manager.io/cluster-issuer: "opentelekomcloud-letsencrypt"\n        nginx.ingress.kubernetes.io/force-ssl-redirect: "true"\n    tls:\n        - hosts:\n            - <YOUR.(SUB)DOMAIN.ADDRESS>\n        secretName: formbricks-tls\n\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under the ",(0,r.jsx)(n.code,{children:"redis"})," stanza set the variables values as following:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"redis.enabled"})," to ",(0,r.jsx)(n.code,{children:"false"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"redis.architecture"})," to ",(0,r.jsx)(n.code,{children:"replication"})," (as long as you have created a Master/StandBy Redis instance, otherwise set to ",(0,r.jsx)(n.code,{children:"standalone"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"redis.externalRedisUrl"})," to the ",(0,r.jsx)(n.strong,{children:"Connection Address"})," we noted down in a previous step"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"e.g.:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"redis:\n    enabled: false  \n    externalRedisUrl: <CONNECTION_ADDRESS>\n    architecture: replication\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Under the ",(0,r.jsx)(n.code,{children:"postgresql"})," stanza set the variables values as following:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"postgresql.enabled"})," to ",(0,r.jsx)(n.code,{children:"false"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"postgresql.externalRedisUrl"})," to ",(0,r.jsx)(n.code,{children:"postgresql://formbricks:<RDS_ROOT_PASSWORD>@<RDS_FLOATING_IP>:5432/formbricks"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"e.g.:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'postgresql:\n    enabled: false  \n    externalDatabaseUrl: "postgresql://formbricks:<RDS_ROOT_PASSWORD>@<RDS_FLOATING_IP>:5432/formbricks"\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsxs)(n.p,{children:["Setting ",(0,r.jsx)(n.code,{children:"redis.enabled"})," and ",(0,r.jsx)(n.code,{children:"postgresql.enabled"})," to ",(0,r.jsx)(n.code,{children:"false"})," instructs the Helm Chart to connect to external services and to not deploy dedicated ones for the Formbricks workload in the cluster."]})}),"\n",(0,r.jsx)(n.h3,{id:"installing-helm-chart",children:"Installing Helm Chart"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm upgrade --install formbricks oci://ghcr.io/formbricks/helm-charts/formbricks \\ \n-n formbricks \\ \n--create-namespace \\\n-f values.yaml\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Assuming you saved the default values in the previous step as ",(0,r.jsx)(n.strong,{children:"values.yaml"})]})}),"\n",(0,r.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Open a browser and navigate to https://",(0,r.jsx)(n.code,{children:"hosts.host"})," where you will be prompted to create the root account of your installation:"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(23021).A+"",width:"1912",height:"928"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Inspect the certificate, and proceed entering your desired credentials and click ",(0,r.jsx)(n.em,{children:"Continue with Email"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["You will be redirected to the login page. Click ",(0,r.jsx)(n.em,{children:"Login with Email"})," and enter the admin credentials you just provisioned:"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(98073).A+"",width:"1912",height:"927"})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:["Setup your first organization and project and click ",(0,r.jsx)(n.em,{children:"Continue"})," through the wizard:"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(56419).A+"",width:"1912",height:"927"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image",src:s(86248).A+"",width:"1912",height:"927"})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.strong,{children:"formbricks"})," ",(0,r.jsx)(n.code,{children:"Pod"})," doesn't manage to enter in ",(0,r.jsx)(n.code,{children:"Running"})," status, and the reason is a migration error, you need either to clean\nthe pending migrations table or drop the formbricks database in its entirety and start over. Regardsless which course of action you choose, you then need to terminate the ",(0,r.jsx)(n.code,{children:"Pod"})," and let the ",(0,r.jsx)(n.code,{children:"Deployment"})," recreate it."]}),"\n",(0,r.jsx)(n.admonition,{type:"important",children:(0,r.jsx)(n.p,{children:"If there are pending migrations, even if you correct the source of the problem, the installation process will refuse to continue. For that reason\nwe need to perform one of these two clean up actions before trying again."})}),"\n",(0,r.jsx)(n.h3,{id:"clean-pending-migrations",children:"Clean Pending Migrations"}),"\n",(0,r.jsx)(n.p,{children:"In your bastion host execute the following commands:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"psql -h <RDS_INSTANCE_FLOATING_IP> -U root -d formbricks \n"})}),"\n",(0,r.jsxs)(n.p,{children:["and then at the ",(0,r.jsx)(n.strong,{children:"psql"})," prompt run:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"DELETE FROM public.\"_prisma_migrations\"\n WHERE migration_name = '20241017124431_add_documents_and_insights';\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Replace ",(0,r.jsx)(n.code,{children:"20241017124431_add_documents_and_insights"})," with the actual value you will encounter in the formbricks ",(0,r.jsx)(n.code,{children:"Pod"})," logs."]})}),"\n",(0,r.jsx)(n.h3,{id:"drop-database",children:"Drop Database"}),"\n",(0,r.jsx)(n.p,{children:"In your bastion host execute the following commands:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"psql -h <RDS_INSTANCE_FLOATING_IP> -U root -d postgres \n"})}),"\n",(0,r.jsxs)(n.p,{children:["and then at the ",(0,r.jsx)(n.strong,{children:"psql"})," prompt run:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- terminate any open connections to formbricks\nSELECT pg_terminate_backend(pid)\n  FROM pg_stat_activity\n WHERE datname = 'formbricks';\n\n-- drop the database\nDROP DATABASE IF EXISTS formbricks;\n\n-- drop the application role (optional)\nDROP ROLE IF EXISTS formbricks;\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},64496:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Screenshot_from_2025-06-30_11-27-46-2b8640ad9f538c083f4691c03e41aee6.png"},69992:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Screenshot_from_2025-06-30_11-28-07-11b8c2790919a714dcf8aa7dffb85ecc.png"},45503:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Screenshot_from_2025-06-30_11-31-51-64b3ecac6bec9e320886e81fff73ed1f.png"},84266:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Screenshot_from_2025-07-01_08-47-52-4a6410200001bc09c2032c9f09fb006a.png"},23021:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Screenshot_from_2025-07-01_11-01-19-179b054a5fb9aefadaff3d55cba41557.png"},98073:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Screenshot_from_2025-07-01_11-01-28-984214c6faabed49d636178d78028213.png"},56419:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Screenshot_from_2025-07-01_11-01-48-9d3f50ca5e36e47eac53f8a8768faa3a.png"},86248:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Screenshot_from_2025-07-01_11-02-19-80e2e2c303cbecc56df16c4907774277.png"},44789:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/SCR-20231208-ka7-c4da47db72eb78e7b3db4ab32b2107ae.png"},65988:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/SCR-20231211-fp6-8a560149b7f7389e0dccb3d85317b310.png"},6527:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/SCR-20231211-g7y-fd08313314be51ab168179be8402cf02.png"},66366:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/Screenshot_from_2025-04-16_10-54-16-2f0631d8cb9a7235c63756bd46aaee6c.png"},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var i=s(96540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);