<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-blueprints/by-use-case/analytics/umami/using-rds-postgresql-to-setup-umami-on-ecs" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Using RDS for PostgreSQL to Set Up Umami on ECS | Architecture Center</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-314/img/open-telekom-cloud-social-card.png"><meta data-rh="true" name="twitter:image" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-314/img/open-telekom-cloud-social-card.png"><meta data-rh="true" property="og:url" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/umami/using-rds-postgresql-to-setup-umami-on-ecs"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Using RDS for PostgreSQL to Set Up Umami on ECS | Architecture Center"><meta data-rh="true" name="description" content="In this blueprint we are going to set up Umami on Open Telekom Cloud leveraging an Elastic Cloud Server (ECS), while using Relational Database Service (RDS) for PostgreSQL to manage the database."><meta data-rh="true" property="og:description" content="In this blueprint we are going to set up Umami on Open Telekom Cloud leveraging an Elastic Cloud Server (ECS), while using Relational Database Service (RDS) for PostgreSQL to manage the database."><link data-rh="true" rel="icon" href="/docs-next/pr-preview/pr-314/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/umami/using-rds-postgresql-to-setup-umami-on-ecs"><link data-rh="true" rel="alternate" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/umami/using-rds-postgresql-to-setup-umami-on-ecs" hreflang="en"><link data-rh="true" rel="alternate" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/umami/using-rds-postgresql-to-setup-umami-on-ecs" hreflang="x-default"><link rel="preconnect" href="https://analytics.example.de">
<script async defer="defer" src="https://analytics.example.de/script.js" data-website-id="00000" data-host-url="https://analytics.example.de" data-auto-track data-do-not-track data-cache data-domains="opentelekomcloud.github.io"></script><link rel="stylesheet" href="/docs-next/pr-preview/pr-314/assets/css/styles.d1c47af3.css">
<script src="/docs-next/pr-preview/pr-314/assets/js/runtime~main.9ba4cfc8.js" defer="defer"></script>
<script src="/docs-next/pr-preview/pr-314/assets/js/main.6e80f16f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs-next/pr-preview/pr-314/"><div class="navbar__logo"><img src="/docs-next/pr-preview/pr-314/img/logo_headline_kombination_m_s_m.png" alt="Open Telekom Cloud Non-Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs-next/pr-preview/pr-314/img/logo_headline_kombination_m_w_m.png" alt="Open Telekom Cloud Non-Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/docs-next/pr-preview/pr-314/docs/best-practices/">Best Practices</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs-next/pr-preview/pr-314/docs/blueprints/">Blueprints</a><a class="navbar__item navbar__link" href="/docs-next/pr-preview/pr-314/templates">Templates</a><a class="navbar__item navbar__link" href="/docs-next/pr-preview/pr-314/webinars">Webinars</a></div><div class="navbar__items navbar__items--right"><a href="https://auth.otc.t-systems.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--terminal-link" aria-label="Open Telekom Cloud Console"></a><a href="https://github.com/opentelekomcloud/docs-next" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--github-link" aria-label="GitHub"></a><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_dCNk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs-next/pr-preview/pr-314/docs/blueprints/">Blueprints</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/">By Use Case</a><button aria-label="Collapse sidebar category &#x27;By Use Case&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/ai/">AI &amp; LLMs</a><button aria-label="Expand sidebar category &#x27;AI &amp; LLMs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/">Analytics</a><button aria-label="Collapse sidebar category &#x27;Analytics&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/deploy-clickhouse-cce">Deploy ClickHouse on CCE</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/umami/umami">Umami</a><button aria-label="Collapse sidebar category &#x27;Umami&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/umami/deploy-umami-cce">Deploy Umami on CCE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/umami/using-rds-postgresql-to-setup-umami-on-ecs">Using RDS for PostgreSQL to Set Up Umami on ECS</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/collaboration/">Collaboration</a><button aria-label="Expand sidebar category &#x27;Collaboration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/devops/">DevOps</a><button aria-label="Expand sidebar category &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/networking/">Networking</a><button aria-label="Expand sidebar category &#x27;Networking&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/observability/">Observability</a><button aria-label="Expand sidebar category &#x27;Observability&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/security/">Security</a><button aria-label="Expand sidebar category &#x27;Security&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/sovereignty/">Sovereignty</a><button aria-label="Expand sidebar category &#x27;Sovereignty&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/storage/">Storage</a><button aria-label="Expand sidebar category &#x27;Storage&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-industry/">By Industry</a><button aria-label="Expand sidebar category &#x27;By Industry&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs-next/pr-preview/pr-314/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/"><span itemprop="name">By Use Case</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/"><span itemprop="name">Analytics</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/umami/umami"><span itemprop="name">Umami</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Using RDS for PostgreSQL to Set Up Umami on ECS</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Using RDS for PostgreSQL to Set Up Umami on ECS</h1></header>
<p>In this blueprint we are going to set up Umami on Open Telekom Cloud leveraging an Elastic Cloud Server (ECS), while using Relational Database Service (RDS) for PostgreSQL to manage the database.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<p>We are going to need, create and configure the following components:</p>
<ul>
<li>a PostgreSQL Instance in RDS: RDS automates database management tasks like backups, patching, and scaling. It simplifies deploying a PostgreSQL instance without needing to manage the infrastructure directly.</li>
<li>an ECS Server for Umami: The server will be used to run Umami&#x27;s application layer. You will install and configure Umami on this ECS instance, which will interact with the PostgreSQL database.</li>
<li>Networking: Set up secure network configurations between your ECS and RDS, ensuring communication between the Umami application and the PostgreSQL instance.</li>
<li>Deployment: After configuring the ECS and connecting it to the RDS database, you can deploy Umami, connect it to the database, and start monitoring your web traffic.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-ecs-server">Creating an ECS Server<a href="#creating-an-ecs-server" class="hash-link" aria-label="Direct link to Creating an ECS Server" title="Direct link to Creating an ECS Server">​</a></h2>
<p>Click on the console <em>Elastic Cloud Server</em>-&gt;<em>Create ECS</em> and pick the flavor and operating system that suits your needs. Make sure though, you place it in the same VPC/Subnet that you are planning to install your RDS DB instance. For this blueprint we are going to set up Ubuntu 22.04 on a <em>s7n.large.4</em> flavor. Consequently some of the commands that are going to be executed later, will assume you are working on a Ubuntu (or Debian-based) distribution.</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-10 12-40-41-48046a1cc376d9140e88829a281f11d2.png" width="1927" height="758" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-postgresql-database">Creating a PostgreSQL Database<a href="#creating-a-postgresql-database" class="hash-link" aria-label="Direct link to Creating a PostgreSQL Database" title="Direct link to Creating a PostgreSQL Database">​</a></h2>
<p>We are going to create a single, non highly available PostgreSQL v16. In <em>Relational Database Service</em> click <em>Create DB Instance</em>:</p>
<p><img decoding="async" loading="lazy" alt="Create a Database Wizard Part 1" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot_from_2024-09-09_12-51-39-d8de9e5f86691bbad206531018ea4238.png" width="1918" height="857" class="img_ev3q"></p>
<p>Make sure you place the database server in the same VPC/Subnet that the ECS instance lives. Choose the flavor of your liking, provide the <strong>root</strong> password and press <em>Create Now</em>. For the time being, we are going to make no changes in the Security Groups; we are going to fix this in the next step.</p>
<p><img decoding="async" loading="lazy" alt="Create a Database Wizard Part 2" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot_from_2024-09-09_12-52-14-75a03a7b900274a63da2848fcd41f778.png" width="1918" height="857" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Picking a single non-HA instance is just for demonstration purposes and <strong>not</strong> suitable for production. While implementing this blueprint adjust instances and replicas according to your needs and volume projections.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-cryptographic-functions-plugins">Installing Cryptographic Functions Plugins<a href="#installing-cryptographic-functions-plugins" class="hash-link" aria-label="Direct link to Installing Cryptographic Functions Plugins" title="Direct link to Installing Cryptographic Functions Plugins">​</a></h3>
<p>In <em>Relational Database Service</em> click your instance and then navigate to <em>Plugins</em>. Search the list for the plugin <strong>pgcrypto</strong>, and install it by click the <em>Install</em> link.</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-10 13-14-30-b2155a9abea98f8f2ab02d61100e09e1.png" width="1911" height="449" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="establishing-connectivity">Establishing Connectivity<a href="#establishing-connectivity" class="hash-link" aria-label="Direct link to Establishing Connectivity" title="Direct link to Establishing Connectivity">​</a></h2>
<p>In <em>Relational Database Service</em> click your instance and then navigate to <em>Connectivity &amp; Security</em> and under <em>Connection Topology</em> choose <em>Private Connection</em>:</p>
<p><img decoding="async" loading="lazy" alt="Establishing Connectivity" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-09 13-53-46-4f318fda9a47444235f3427239019645.png" width="1273" height="517" class="img_ev3q"></p>
<p>In this blueprint, we are interested in variant 2, where our database instance (with floating IP <code>172.16.0.30</code>) needs to establish two-way communication with the ECS(B) instance, which in our case is the ECS instance that hold the Umami installation. For that matter we need to create two Security Groups, one that will allow inbound connections to port <code>5432</code> and will be assigned to our RDS instance and a second one that will allow outbound connections from port <code>5432</code> and will be assigned to the ECS instance that our workload will run.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-security-group-for-rds">Creating Security Group for RDS<a href="#creating-security-group-for-rds" class="hash-link" aria-label="Direct link to Creating Security Group for RDS" title="Direct link to Creating Security Group for RDS">​</a></h3>
<p><img decoding="async" loading="lazy" alt="Adding Inbound Rules for RDS Instances" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-09 14-03-16-24aa5365d66fc8d76623afb90b90e54d.png" width="1620" height="438" class="img_ev3q"></p>
<p>For additional security, make sure you set as <strong>Source</strong> the CIDR of the your Subnet (in this case <code>172.16.0.0/24</code>); in that way you prohibit anyone access your database outside your VPC/Subnet.</p>
<p>Go back to the <em>Connectivity &amp; Security</em> panel of your database and replace under <em>Security Group Rules</em> -&gt; <em>Security Group</em>, the default Security Group with the one we just created:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-09 14-12-28-0193458b15b4951e390b09835de0e24e.png" width="1657" height="733" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-security-group-for-ecs">Creating Security Group for ECS<a href="#creating-security-group-for-ecs" class="hash-link" aria-label="Direct link to Creating Security Group for ECS" title="Direct link to Creating Security Group for ECS">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-outbound-rule-for-postgresql">Creating Outbound Rule for PostgreSQL<a href="#creating-outbound-rule-for-postgresql" class="hash-link" aria-label="Direct link to Creating Outbound Rule for PostgreSQL" title="Direct link to Creating Outbound Rule for PostgreSQL">​</a></h4>
<p><img decoding="async" loading="lazy" alt="Adding Outbound Rules for ECS" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-09 14-10-01-c41986ffd22ab5902b77d69c31693df0.png" width="1620" height="438" class="img_ev3q"></p>
<p>In the same notion, set as <strong>Destination</strong> the CIDR of the your Subnet (in this case <code>172.16.0.0/24</code>).</p>
<p>On our ECS instance, click <em>Security Groups</em> -&gt; <em>Change Security Group</em>, and add additionally the new Security Group to the list.</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-09 14-16-19-5c98dae3a20fb1315ccd921e8b980cd3.png" width="1686" height="469" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-inbound-rule-for-ssh">Creating Inbound Rule for SSH<a href="#creating-inbound-rule-for-ssh" class="hash-link" aria-label="Direct link to Creating Inbound Rule for SSH" title="Direct link to Creating Inbound Rule for SSH">​</a></h4>
<p>You are going to need an additionnal inbound rule to allow actors accessing this ECS Server via SSH. Add in the existing Security Group (or create new one for finer granularity of permissions and reusability among more instances) port <code>22</code> in the <em>Inbound Rules</em> list, and set the value of <strong>Remote End</strong> as <code>0.0.0.0/24</code>.</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-10 12-47-36-76318568b043049279dc040ae9d07808.png" width="1922" height="522" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>How you are going to establish this SSH connection, is entirely up to you. You can use a bastion or an Elastic IP bound to your ECS or a DNAT Rule in a NAT Gateway. Depends on your needs and your assessment.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-inbound-rule-for-umami">Creating Inbound Rule for Umami<a href="#creating-inbound-rule-for-umami" class="hash-link" aria-label="Direct link to Creating Inbound Rule for Umami" title="Direct link to Creating Inbound Rule for Umami">​</a></h4>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-umami">Deploying Umami<a href="#deploying-umami" class="hash-link" aria-label="Direct link to Deploying Umami" title="Direct link to Deploying Umami">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-database">Creating the Database<a href="#creating-the-database" class="hash-link" aria-label="Direct link to Creating the Database" title="Direct link to Creating the Database">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-postgresql-client-tools">Installing the PostgreSQL client tools<a href="#installing-the-postgresql-client-tools" class="hash-link" aria-label="Direct link to Installing the PostgreSQL client tools" title="Direct link to Installing the PostgreSQL client tools">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">apt-get</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-y</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">install</span><span class="token plain"> postgresql-client-14</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-the-umami-database">Creating the Umami Database<a href="#creating-the-umami-database" class="hash-link" aria-label="Direct link to Creating the Umami Database" title="Direct link to Creating the Umami Database">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">createdb umami </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--host</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token number" style="color:hsl(29, 54%, 61%)">172.16</span><span class="token plain">.0.30 </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--username</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>You will be asked to provide the root password you&#x27;ve set during the installation.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-roles-and-assign-privileges">Creating Roles and Assign Privileges<a href="#creating-roles-and-assign-privileges" class="hash-link" aria-label="Direct link to Creating Roles and Assign Privileges" title="Direct link to Creating Roles and Assign Privileges">​</a></h4>
<p>Connect to database:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">psql </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-h</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">172.16</span><span class="token plain">.0.30 </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--username</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token plain">root umami</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Create Role &amp; Privileges and make sure the Cryptographics Functions Plugin is on:</p>
<div class="language-SQL language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token keyword" style="color:hsl(286, 60%, 67%)">CREATE</span><span class="token plain"> ROLE umami </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">WITH</span><span class="token plain"> LOGIN PASSWORD &#x27;{</span><span class="token keyword" style="color:hsl(286, 60%, 67%)">value</span><span class="token plain">}’</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">ALL</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">PRIVILEGES</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">ON</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">DATABASE</span><span class="token plain"> umami </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">TO</span><span class="token plain"> umami</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">\c umami </span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">CREATE</span><span class="token plain"> EXTENSION </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">IF</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">EXISTS</span><span class="token plain"> pgcrypto</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token keyword" style="color:hsl(286, 60%, 67%)">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">ALL</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">PRIVILEGES</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">ON</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">SCHEMA</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">public</span><span class="token plain"> </span><span class="token keyword" style="color:hsl(286, 60%, 67%)">TO</span><span class="token plain"> umami</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>Replace <code>{value}</code> with your own password!</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-docker">Installing Docker<a href="#installing-docker" class="hash-link" aria-label="Direct link to Installing Docker" title="Direct link to Installing Docker">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setup-dockers-apt-repository">Setup Docker&#x27;s apt repository<a href="#setup-dockers-apt-repository" class="hash-link" aria-label="Direct link to Setup Docker&#x27;s apt repository" title="Direct link to Setup Docker&#x27;s apt repository">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">install</span><span class="token plain"> ca-certificates </span><span class="token function" style="color:hsl(207, 82%, 66%)">curl</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-m</span><span class="token plain"> 0755 </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-d</span><span class="token plain"> /etc/apt/keyrings</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-fsSL</span><span class="token plain"> https://download.docker.com/linux/ubuntu/gpg </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-o</span><span class="token plain"> /etc/apt/keyrings/docker.asc</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">chmod</span><span class="token plain"> a+r /etc/apt/keyrings/docker.asc</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">echo</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;deb [arch=</span><span class="token string variable" style="color:hsl(207, 82%, 66%)">$(</span><span class="token string variable" style="color:hsl(207, 82%, 66%)">dpkg --print-architecture</span><span class="token string variable" style="color:hsl(207, 82%, 66%)">)</span><span class="token string" style="color:hsl(95, 38%, 62%)"> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token string" style="color:hsl(95, 38%, 62%)">  </span><span class="token string variable" style="color:hsl(207, 82%, 66%)">$(</span><span class="token string variable builtin class-name" style="color:hsl(29, 54%, 61%)">.</span><span class="token string variable" style="color:hsl(207, 82%, 66%)"> /etc/os-release </span><span class="token string variable operator" style="color:hsl(207, 82%, 66%)">&amp;&amp;</span><span class="token string variable" style="color:hsl(207, 82%, 66%)"> </span><span class="token string variable builtin class-name" style="color:hsl(29, 54%, 61%)">echo</span><span class="token string variable" style="color:hsl(207, 82%, 66%)"> </span><span class="token string variable string" style="color:hsl(95, 38%, 62%)">&quot;</span><span class="token string variable string variable" style="color:hsl(207, 82%, 66%)">$VERSION_CODENAME</span><span class="token string variable string" style="color:hsl(95, 38%, 62%)">&quot;</span><span class="token string variable" style="color:hsl(207, 82%, 66%)">)</span><span class="token string" style="color:hsl(95, 38%, 62%)"> stable&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">|</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">tee</span><span class="token plain"> /etc/apt/sources.list.d/docker.list </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&gt;</span><span class="token plain"> /dev/null</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">apt-get</span><span class="token plain"> update</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="instal-the-docker-packages">Instal the Docker packages<a href="#instal-the-docker-packages" class="hash-link" aria-label="Direct link to Instal the Docker packages" title="Direct link to Instal the Docker packages">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">install</span><span class="token plain"> docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="post-installation-steps">Post-Installation Steps<a href="#post-installation-steps" class="hash-link" aria-label="Direct link to Post-Installation Steps" title="Direct link to Post-Installation Steps">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">groupadd</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">usermod</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-aG</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> </span><span class="token environment constant" style="color:hsl(29, 54%, 61%)">$USER</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">newgrp </span><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-umami-as-docker-container">Installing Umami as Docker Container<a href="#installing-umami-as-docker-container" class="hash-link" aria-label="Direct link to Installing Umami as Docker Container" title="Direct link to Installing Umami as Docker Container">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-app_secret-and-export-credentials">Create an APP_SECRET and export Credentials<a href="#create-an-app_secret-and-export-credentials" class="hash-link" aria-label="Direct link to Create an APP_SECRET and export Credentials" title="Direct link to Create an APP_SECRET and export Credentials">​</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">APP_SECRET</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token variable" style="color:hsl(207, 82%, 66%)">$(</span><span class="token variable" style="color:hsl(207, 82%, 66%)">openssl rand </span><span class="token variable number" style="color:hsl(29, 54%, 61%)">30</span><span class="token variable" style="color:hsl(207, 82%, 66%)"> </span><span class="token variable operator" style="color:hsl(207, 82%, 66%)">|</span><span class="token variable" style="color:hsl(207, 82%, 66%)"> openssl base64 </span><span class="token variable parameter variable" style="color:hsl(207, 82%, 66%)">-A</span><span class="token variable" style="color:hsl(207, 82%, 66%)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">PSQL_HOST</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token number" style="color:hsl(29, 54%, 61%)">172.16</span><span class="token plain">.0.30</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">PSQL_ROOT_PASSWORD</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">value</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Replace <code>PSQL_HOST</code> and <code>PSQL_ROOT_PASSWORD</code> values with your own ones.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-docker-compose-file">Create a Docker Compose file<a href="#create-a-docker-compose-file" class="hash-link" aria-label="Direct link to Create a Docker Compose file" title="Direct link to Create a Docker Compose file">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockTitle_Ktv7">docker-compose.yml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">version</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&#x27;3&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">services</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">umami</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">image</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> ghcr.io/umami</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">software/umami</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">postgresql</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">ports</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;3000:3000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">environment</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">DATABASE_URL</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> postgresql</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">//root</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">$</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">PSQL_ROOT_PASSWORD</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">@$</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">PSQL_HOST</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain">5432/umami</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">DATABASE_TYPE</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> postgresql</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">APP_SECRET</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">APP_SECRET</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">restart</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> always</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">    </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">healthcheck</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">test</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;CMD-SHELL&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">,</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;curl http://localhost:3000/api/heartbeat&quot;</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">interval</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> 5s</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">timeout</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> 5s</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">      </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">retries</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> compose up </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exposing-umami">Exposing Umami<a href="#exposing-umami" class="hash-link" aria-label="Direct link to Exposing Umami" title="Direct link to Exposing Umami">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-an-elastic-load-balancer">Creating an Elastic Load Balancer<a href="#creating-an-elastic-load-balancer" class="hash-link" aria-label="Direct link to Creating an Elastic Load Balancer" title="Direct link to Creating an Elastic Load Balancer">​</a></h3>
<p>Navigate to <em>Network Console</em>-&gt;<em>Elastic Load Balancing</em> and click <em>Create Elastic Load Balancer</em>. Choose to create <em>Shared Load Balancer</em> and choose <em>New EIP</em> so the new ELB is automatically bound to a new elastic IP:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-10 14-32-38-565246c0f934d660226ff7f35f41b3d6.png" width="1909" height="733" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-listener">Creating a Listener<a href="#creating-a-listener" class="hash-link" aria-label="Direct link to Creating a Listener" title="Direct link to Creating a Listener">​</a></h3>
<p>Choose your Elastic Load Balancer from the console and click <em>Add Listener</em>:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-10 14-38-26-c34991ddcef9a545bc47ba885fb3fe3d.png" width="1910" height="521" class="img_ev3q"></p>
<p>Configure <em>Frontend Protocol</em> as <code>TCP</code>, and <em>Frontend Port</em> as <code>80</code>:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-10 14-38-50-c76eef3d86b407faf2127d5fe170d77d.png" width="1918" height="751" class="img_ev3q"></p>
<p>Configure a new Routing Policy, supported by a new Backend Server Group and set <em>Backend Protocol</em> as <code>TCP</code>:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-10 14-39-09-405897246fe08908445ba62465589f19.png" width="1918" height="751" class="img_ev3q"></p>
<p>Next, you need to add members to the newly created Backend Group. Click <em>Add Backend Server</em> and choose the Umami ECS Instance from the list:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-10 14-39-38-7c470b84a97f63e1215a59ca58e98ffc.png" width="1918" height="751" class="img_ev3q"></p>
<p>and set the Backend Port to <code>3000</code>:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/docs-next/pr-preview/pr-314/assets/images/Screenshot from 2024-09-10 14-39-50-2cc97d77af570ce26e2dec2190be4461.png" width="1918" height="751" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="verification">Verification<a href="#verification" class="hash-link" aria-label="Direct link to Verification" title="Direct link to Verification">​</a></h2>
<p>Open in a browser the address: <code>http://ELB_EIP</code> and you should now land at the logon page of Umami:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="data:image/png;base64,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" width="918" height="468" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Umami uses <code>admin</code>/<code>umami</code> as default credentials. <strong>Change them immediatelly after you log in!</strong></p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-314/docs/tags/umami">umami</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-314/docs/tags/analytics">analytics</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-314/docs/tags/ecs">ecs</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-314/docs/tags/rds">rds</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-314/docs/tags/postgresql">postgresql</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/opentelekomcloud/docs-next/tree/main/docs/blueprints/by-use-case/analytics/umami/using-rds-postgresql-to-setup-umami-on-ecs.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/analytics/umami/deploy-umami-cce"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Deploy Umami on CCE</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs-next/pr-preview/pr-314/docs/blueprints/by-use-case/collaboration/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Collaboration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#creating-an-ecs-server" class="table-of-contents__link toc-highlight">Creating an ECS Server</a></li><li><a href="#creating-a-postgresql-database" class="table-of-contents__link toc-highlight">Creating a PostgreSQL Database</a><ul><li><a href="#installing-cryptographic-functions-plugins" class="table-of-contents__link toc-highlight">Installing Cryptographic Functions Plugins</a></li></ul></li><li><a href="#establishing-connectivity" class="table-of-contents__link toc-highlight">Establishing Connectivity</a><ul><li><a href="#creating-security-group-for-rds" class="table-of-contents__link toc-highlight">Creating Security Group for RDS</a></li><li><a href="#creating-security-group-for-ecs" class="table-of-contents__link toc-highlight">Creating Security Group for ECS</a></li></ul></li><li><a href="#deploying-umami" class="table-of-contents__link toc-highlight">Deploying Umami</a><ul><li><a href="#creating-the-database" class="table-of-contents__link toc-highlight">Creating the Database</a></li><li><a href="#installing-docker" class="table-of-contents__link toc-highlight">Installing Docker</a></li><li><a href="#installing-umami-as-docker-container" class="table-of-contents__link toc-highlight">Installing Umami as Docker Container</a></li></ul></li><li><a href="#exposing-umami" class="table-of-contents__link toc-highlight">Exposing Umami</a><ul><li><a href="#creating-an-elastic-load-balancer" class="table-of-contents__link toc-highlight">Creating an Elastic Load Balancer</a></li><li><a href="#creating-a-listener" class="table-of-contents__link toc-highlight">Creating a Listener</a></li></ul></li><li><a href="#verification" class="table-of-contents__link toc-highlight">Verification</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="align-items-center" style="margin:0 0 0 32px"><div class="col-10 text-right"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Help Center</a></li><li class="footer__item"><a class="footer__link-item" href="/docs-next/pr-preview/pr-314/portfolio">Portfolio Navigator</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/products-services/roadmap" target="_blank" rel="noopener noreferrer" class="footer__link-item">Portfolio Roadmap</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/support/release-notes" target="_blank" rel="noopener noreferrer" class="footer__link-item">Release Notes</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/products-services/core-services/certifications" target="_blank" rel="noopener noreferrer" class="footer__link-item">Core Services Certifications</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://marketplace.otc.t-systems.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Marketplace</a></li><li class="footer__item"><a href="https://community.open-telekom-cloud.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Portal</a></li><li class="footer__item"><a href="https://www.youtube.com/playlist?list=PLS60dhorR-hgQ5n5L1boEQh0oVD-_k75p" target="_blank" rel="noopener noreferrer" class="footer__link-item">Webinars in YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/sdk.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDKs</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/drivers.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Drivers &amp; Tools</a></li><li class="footer__item"><a href="https://registry.terraform.io/providers/opentelekomcloud/opentelekomcloud/latest/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terraform Provider<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/ansible-collection-cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ansible Collections</a></li><li class="footer__item"><a href="https://designer.otc-service.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud Create</a></li></ul></div><div class="col footer__col"><div class="footer__title">API</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/api.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">REST API</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/api_guidelines/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">REST API Usage Guidelines</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/regions-and-endpoints/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Endpoints</a></li><li class="footer__item"><a href="https://status.otc-service.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status Dashboard</a></li></ul></div></div></div></div></div><scale-telekom-footer type="minimal"><scale-telekom-footer-content><span slot="notice">© T-Systems International GmbH 2025<!-- --> <scale-tag size="small" style="margin:0 0 0 8px" color="orange" type="strong">0.1.PR314-210-6789e3c-ephemeral</scale-tag></span><ul slot="navigation"><li><a href="https://open-telekom-cloud.com/en/contact"> Contact </a></li><li><a href="https://open-telekom-cloud.com/en/data-protection"> Data privacy </a></li><li><a href="https://open-telekom-cloud.com/en/disclaimer-of-liability"> Disclaimer of liabilities </a></li><li><a href="https://open-telekom-cloud.com/en/imprint"> Imprint </a></li></ul></scale-telekom-footer-content></scale-telekom-footer></footer></div>
</body>
</html>