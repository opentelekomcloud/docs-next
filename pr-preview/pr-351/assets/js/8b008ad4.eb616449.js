"use strict";(self.webpackChunkdocs_next=self.webpackChunkdocs_next||[]).push([[48628],{48714:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"blueprints/by-use-case/sovereignty/nextcloud/realtime-collaboration-with-collabora-online","title":"Real-Time Collaboration with Collabora Online","description":"Collabora Online is a web-based office suite built on LibreOffice and integrates seamlessly with Nextcloud to provide real-time collaborative document editing. It enables multiple users to simultaneously edit documents, spreadsheets, and presentations directly within the browser while maintaining full compatibility with Microsoft Office and OpenDocument formats. By deploying Collabora Online as a backend service, Nextcloud transforms from a simple file storage platform into a comprehensive collaborative workspace that rivals commercial solutions like Google Workspace or Microsoft Office 365, all while keeping your data under your complete control.","source":"@site/docs/blueprints/by-use-case/sovereignty/nextcloud/3_realtime-collaboration-with-collabora-online.md","sourceDirName":"blueprints/by-use-case/sovereignty/nextcloud","slug":"/blueprints/by-use-case/sovereignty/nextcloud/realtime-collaboration-with-collabora-online","permalink":"/docs-next/pr-preview/pr-351/docs/blueprints/by-use-case/sovereignty/nextcloud/realtime-collaboration-with-collabora-online","draft":false,"unlisted":false,"editUrl":"https://github.com/opentelekomcloud/docs-next/tree/main/docs/blueprints/by-use-case/sovereignty/nextcloud/3_realtime-collaboration-with-collabora-online.md","tags":[{"inline":true,"label":"nextcloud","permalink":"/docs-next/pr-preview/pr-351/docs/tags/nextcloud"},{"inline":true,"label":"storage","permalink":"/docs-next/pr-preview/pr-351/docs/tags/storage"},{"inline":true,"label":"office","permalink":"/docs-next/pr-preview/pr-351/docs/tags/office"},{"inline":true,"label":"collaboration","permalink":"/docs-next/pr-preview/pr-351/docs/tags/collaboration"},{"inline":true,"label":"sovereignty","permalink":"/docs-next/pr-preview/pr-351/docs/tags/sovereignty"}],"version":"current","sidebarPosition":3,"frontMatter":{"id":"realtime-collaboration-with-collabora-online","title":"Real-Time Collaboration with Collabora Online","tags":["nextcloud","storage","office","collaboration","sovereignty"]},"sidebar":"blueprintsSidebar","previous":{"title":"Deploy Nextcloud on CCE","permalink":"/docs-next/pr-preview/pr-351/docs/blueprints/by-use-case/sovereignty/nextcloud/deploy-nextcloud-on-cce"},"next":{"title":"Real-Time Communication with Nextcloud Talk","permalink":"/docs-next/pr-preview/pr-351/docs/blueprints/by-use-case/sovereignty/nextcloud/realtime-communication-with-nextcloud-talk"}}');var i=l(74848),r=l(28453);const t={id:"realtime-collaboration-with-collabora-online",title:"Real-Time Collaboration with Collabora Online",tags:["nextcloud","storage","office","collaboration","sovereignty"]},s="Real-Time Collaboration with Collabora Online",a={},c=[{value:"Deploy Collabora Online",id:"deploy-collabora-online",level:2},{value:"Helm Chart Values",id:"helm-chart-values",level:3},{value:"Upgrading Nextcloud",id:"upgrading-nextcloud",level:3},{value:"Enabling Collabora Online on Nextcloud",id:"enabling-collabora-online-on-nextcloud",level:3},{value:"Configuring Collabora Online",id:"configuring-collabora-online",level:3},{value:"Verifying Collaboration",id:"verifying-collaboration",level:2},{value:"Creating a Shared Document",id:"creating-a-shared-document",level:3},{value:"Sharing the Document",id:"sharing-the-document",level:3},{value:"Verifying Real-time Collaboration",id:"verifying-real-time-collaboration",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"real-time-collaboration-with-collabora-online",children:"Real-Time Collaboration with Collabora Online"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://www.collaboraonline.com/",children:"Collabora Online"})," is a web-based office suite built on ",(0,i.jsx)(n.a,{href:"https://www.libreoffice.org/",children:"LibreOffice"})," and integrates seamlessly with Nextcloud to provide real-time collaborative document editing. It enables multiple users to simultaneously edit documents, spreadsheets, and presentations directly within the browser while maintaining full compatibility with Microsoft Office and OpenDocument formats. By deploying Collabora Online as a backend service, Nextcloud transforms from a simple file storage platform into a comprehensive collaborative workspace that rivals commercial solutions like Google Workspace or Microsoft Office 365, all while keeping your data under your complete control."]}),"\n",(0,i.jsx)(n.h2,{id:"deploy-collabora-online",children:"Deploy Collabora Online"}),"\n",(0,i.jsx)(n.h3,{id:"helm-chart-values",children:"Helm Chart Values"}),"\n",(0,i.jsxs)(n.p,{children:["Add these values to your ",(0,i.jsx)(n.strong,{children:"values.yaml"})," file created in ",(0,i.jsx)(n.a,{href:"/docs-next/pr-preview/pr-351/docs/blueprints/by-use-case/sovereignty/nextcloud/deploy-nextcloud-on-cce#configuring-helm-chart-values",children:"Deploy Nextcloud on CCE -> Configuring Helm Chart Values"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"collabora"})," field specifies whether to enable Collabora Online as a backend service for your Nextcloud deployment."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'collabora:\n  enabled: true\n  replicaCount: 1\n\n  image:\n    tag: "25.04.2.2.1"\n\n  collabora:\n    ## HTTPS nextcloud domain, if needed\n    aliasgroups:\n      - host: "https://nextcloud.example.com:443"\n\n    # set extra parameters for collabora\n    # you may need to add --o:ssl.termination=true\n    extra_params: --o:ssl.enable=false --o:ssl.termination=true\n\n    ## Specify server_name when the hostname is not reachable directly for\n    # example behind reverse-proxy. example: collabora.domain\n    server_name: collabora.example.com\n\n    existingSecret:\n      # set to true to to get collabora admin credentials from an existin secret\n      # if set, ignores collabora.collabora.username and password\n      enabled: true\n      # name of existing Kubernetes Secret with collboara admin credentials\n      secretName: "nextcloud-collabora"\n      usernameKey: "username"\n      passwordKey: "password"\n\n  # # setup ingress\n  ingress:\n    # enable ingress for collabora online\n    enabled: true\n    className: "nginx"\n    # please check collabora values.yaml for nginx/haproxy annotations examples\n    annotations: \n      nginx.ingress.kubernetes.io/upstream-hash-by: "$arg_WOPISrc"\n      nginx.ingress.kubernetes.io/proxy-body-size: "0"\n      nginx.ingress.kubernetes.io/proxy-read-timeout: "600"\n      nginx.ingress.kubernetes.io/proxy-send-timeout: "600"\n      kubernetes.io/tls-acme: "true"\n      cert-manager.io/cluster-issuer: opentelekomcloud-letsencrypt\n    hosts:\n      - host: collabora.example.com\n        paths:\n        - path: /\n          pathType: ImplementationSpecific\n    tls:\n     - secretName: collabora-ingress-tls\n       hosts:\n         - collabora.example.com\n'})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"enabled"}),": Determines whether to enable Collabora Online as a backend service for Nextcloud."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"replicaCount"}),": Specifies the number of replicas (instances) of the Collabora container to run. In this example, it is set to ",(0,i.jsx)(n.code,{children:"1"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"image"}),": ",(0,i.jsx)(n.code,{children:"tag: 25.04.2.2.1"})," specifies the tag or version of the Collabora image to use."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"collabora"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"aliasgroups"}),": Defines a list of alias groups for the Collabora service. This field is used to specify the HTTPS Nextcloud domain if needed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"extra_params: --o:ssl.enable=false --o:ssl.termination=true"}),": Allows you to pass extra parameters to the Collabora container. These parameters relate to SSL/TLS settings for the Collabora service."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"server_name: collabora.example.com"}),": Specifies the server name for the Collabora service when the hostname is not directly reachable (e.g., behind a reverse proxy)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"existingSecret"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"enabled: true"}),": Determines whether to use an existing secret to retrieve Collabora admin credentials."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"secretName: collabora"}),": Specifies the name of the existing Kubernetes Secret with Collabora admin credentials."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"usernameKey"})," and ",(0,i.jsx)(n.code,{children:"passwordKey"}),": Specify the keys within the existing secret where the Collabora username and password are stored, respectively."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"ingress"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"enabled: true"}),": Enables ingress for Collabora Online."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"className: nginx"}),": Specifies the class name of the ingress controller (in this case, ",(0,i.jsx)(n.code,{children:"nginx"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"annotations"}),": Provides additional annotations for the ingress resource. These include settings related to upstream hashing, proxy body size, and TLS/SSL certificates managed by cert-manager."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hosts"}),": Defines a list of hosts for the ingress resource."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tls"}),": Specifies the secret name for the TLS certificate used by Collabora."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"upgrading-nextcloud",children:"Upgrading Nextcloud"}),"\n",(0,i.jsx)(n.p,{children:"Run the following command to upgrade Nextcloud with Collabora enabled:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm -n nextcloud upgrade \\\n--install nextcloud nextcloud/nextcloud \\\n-f values.yaml \\\n--version 6.6.10\n"})}),"\n",(0,i.jsx)(n.h3,{id:"enabling-collabora-online-on-nextcloud",children:"Enabling Collabora Online on Nextcloud"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["First, log in to your Nextcloud. Click on your user account, then select ",(0,i.jsx)(n.strong,{children:"Apps"})," in the menu."]}),"\n",(0,i.jsxs)(n.li,{children:["Search for ",(0,i.jsx)(n.strong,{children:"Collabora Online \u2013 Built-in CODE Server"})," and click ",(0,i.jsx)(n.strong,{children:"Download and enable"})," to install it."]}),"\n",(0,i.jsxs)(n.li,{children:["Also install ",(0,i.jsx)(n.strong,{children:"Nextcloud Office"})," if it's not already installed."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:l(45775).A+"",width:"2560",height:"1440"})}),"\n",(0,i.jsx)(n.h3,{id:"configuring-collabora-online",children:"Configuring Collabora Online"}),"\n",(0,i.jsx)(n.p,{children:"Now configure Nextcloud to use the Collabora Online service that was created by the new chart."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Click on your user account, then select ",(0,i.jsx)(n.strong,{children:"Administration settings"}),". From the left menu under the ",(0,i.jsx)(n.strong,{children:"Administration"})," section, select ",(0,i.jsx)(n.strong,{children:"Office"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Select the ",(0,i.jsx)(n.strong,{children:"Use your own server"})," option and provide the ",(0,i.jsx)(n.strong,{children:"Collabora Domain"})," you specified in the Helm values earlier."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Save"}),". You should see a notification saying ",(0,i.jsx)(n.strong,{children:"Collabora Online server is reachable"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:l(87086).A+"",width:"1254",height:"917"})}),"\n",(0,i.jsx)(n.h2,{id:"verifying-collaboration",children:"Verifying Collaboration"}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-shared-document",children:"Creating a Shared Document"}),"\n",(0,i.jsx)(n.p,{children:"To verify that collaboration is working, create a shared document in Nextcloud. Follow these steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Log in to your Nextcloud and navigate to the folder where you want to create a new file."}),"\n",(0,i.jsxs)(n.li,{children:["Click the ",(0,i.jsx)(n.strong,{children:"+ New"})," button to create a new file."]}),"\n",(0,i.jsx)(n.li,{children:"Select the type of file you want to create (e.g., Word document, spreadsheet, presentation)."}),"\n",(0,i.jsxs)(n.li,{children:["Give the file a name and click ",(0,i.jsx)(n.strong,{children:"Create"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"sharing-the-document",children:"Sharing the Document"}),"\n",(0,i.jsx)(n.p,{children:"Share the document with another user by following these steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Click on the share icon of the newly created file."}),"\n",(0,i.jsxs)(n.li,{children:["Click on the ",(0,i.jsx)(n.strong,{children:"Sharing"})," tab and enter the username or email address of the person you want to share the document with."]}),"\n",(0,i.jsxs)(n.li,{children:["Select the permission level and click ",(0,i.jsx)(n.strong,{children:"Save share"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The user you shared the document with should now receive an email invitation to edit the file. Alternatively, they can view all files shared with them by clicking on ",(0,i.jsx)(n.strong,{children:"Shares"})," in the left panel. They can then access the file through Nextcloud and start editing it in real time."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:l(9328).A+"",width:"1183",height:"581"})}),"\n",(0,i.jsx)(n.h3,{id:"verifying-real-time-collaboration",children:"Verifying Real-time Collaboration"}),"\n",(0,i.jsx)(n.p,{children:"To verify that real-time collaboration is working, follow these steps:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Have two users (User A and User B) open the shared document simultaneously."}),"\n",(0,i.jsx)(n.li,{children:"User A makes some changes to the document by typing a sentence."}),"\n",(0,i.jsx)(n.li,{children:"User B should see the changes made by User A in real time, without needing to reload the page or refresh the browser."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If you see these changes reflected on User B's screen, it means that collaboration is working correctly."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},87086:(e,n,l)=>{l.d(n,{A:()=>o});const o=l.p+"assets/images/collabora-configure-4097829058c8b663c056beae1b3450e4.png"},45775:(e,n,l)=>{l.d(n,{A:()=>o});const o=l.p+"assets/images/collabora-install-2e9a5c87c721b3848ab8536413b8e3d8.png"},9328:(e,n,l)=>{l.d(n,{A:()=>o});const o=l.p+"assets/images/collabora-test-57af9d894294904e52e46169d1a81f91.png"},28453:(e,n,l)=>{l.d(n,{R:()=>t,x:()=>s});var o=l(96540);const i={},r=o.createContext(i);function t(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);