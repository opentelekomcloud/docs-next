"use strict";(self.webpackChunkdocs_next=self.webpackChunkdocs_next||[]).push([[38031],{17932:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"blueprints/by-use-case/devops/dokploy/deploy-dokploy-on-ecs","title":"Deploy Dokploy on ECS","description":"The first part of the blueprint explains how to deploy a highly available Dokploy platform on a fleet of Elastic Cloud Servers (ECS). It covers the configuration of the required Open Telekom Cloud services, including VPC, NAT Gateway, Elastic Load Balancer, RDS, and DCS,","source":"@site/docs/blueprints/by-use-case/devops/dokploy/deploy-dokploy-on-ecs.mdx","sourceDirName":"blueprints/by-use-case/devops/dokploy","slug":"/blueprints/by-use-case/devops/dokploy/deploy-dokploy-on-ecs","permalink":"/docs-next/pr-preview/pr-359/docs/blueprints/by-use-case/devops/dokploy/deploy-dokploy-on-ecs","draft":false,"unlisted":false,"editUrl":"https://github.com/opentelekomcloud/docs-next/tree/main/docs/blueprints/by-use-case/devops/dokploy/deploy-dokploy-on-ecs.mdx","tags":[{"inline":true,"label":"dokploy","permalink":"/docs-next/pr-preview/pr-359/docs/tags/dokploy"},{"inline":true,"label":"paas","permalink":"/docs-next/pr-preview/pr-359/docs/tags/paas"},{"inline":true,"label":"ecs","permalink":"/docs-next/pr-preview/pr-359/docs/tags/ecs"},{"inline":true,"label":"docker","permalink":"/docs-next/pr-preview/pr-359/docs/tags/docker"},{"inline":true,"label":"swarm","permalink":"/docs-next/pr-preview/pr-359/docs/tags/swarm"}],"version":"current","sidebarPosition":1,"frontMatter":{"id":"deploy-dokploy-on-ecs","title":"Deploy Dokploy on ECS","tags":["dokploy","paas","ecs","docker","swarm"],"sidebar_position":1},"sidebar":"blueprintsSidebar","previous":{"title":"Build a Self-Service App Hosting Platform with Dokploy","permalink":"/docs-next/pr-preview/pr-359/docs/blueprints/by-use-case/devops/dokploy/dokploy"},"next":{"title":"Configure Dokploy for Open Telekom Cloud","permalink":"/docs-next/pr-preview/pr-359/docs/blueprints/by-use-case/devops/dokploy/configure-dokploy-for-otc"}}');var i=s(74848),t=s(28453),o=s(11470),l=s(19365);const a={id:"deploy-dokploy-on-ecs",title:"Deploy Dokploy on ECS",tags:["dokploy","paas","ecs","docker","swarm"],sidebar_position:1},d="Deploy Dokploy on ECS",c={},h=[{value:"Creating VPC and Subnets",id:"creating-vpc-and-subnets",level:2},{value:"Creating a PostgreSQL Database",id:"creating-a-postgresql-database",level:2},{value:"Creating a Redis Instance",id:"creating-a-redis-instance",level:2},{value:"Preparing Security Groups",id:"preparing-security-groups",level:2},{value:"Preparing Compute &amp; Storage",id:"preparing-compute--storage",level:2},{value:"Creating an ECS Group",id:"creating-an-ecs-group",level:3},{value:"Creating a Key Pair",id:"creating-a-key-pair",level:3},{value:"Creating Nodes",id:"creating-nodes",level:3},{value:"Creating an SFS Turbo File System",id:"creating-an-sfs-turbo-file-system",level:3},{value:"Creating an OBS Bucket",id:"creating-an-obs-bucket",level:3},{value:"Creating a NAT Gateway",id:"creating-a-nat-gateway",level:2},{value:"Configurating SNAT &amp; DNAT Rules",id:"configurating-snat--dnat-rules",level:3},{value:"Creating an Elastic Load Balancer",id:"creating-an-elastic-load-balancer",level:2},{value:"Creating DNS Records",id:"creating-dns-records",level:2},{value:"Creating the Swarm",id:"creating-the-swarm",level:2},{value:"Deploying Traefik",id:"deploying-traefik",level:3},{value:"Deploying Traefik as a Global Service",id:"deploying-traefik-as-a-global-service",level:4},{value:"Creating Wildcard Certificate",id:"creating-wildcard-certificate",level:4},{value:"Creating ELB Listeners",id:"creating-elb-listeners",level:4},{value:"Deploying Portainer (Optional)",id:"deploying-portainer-optional",level:3},{value:"Deploying Dokploy",id:"deploying-dokploy",level:3},{value:"Preparing the Database",id:"preparing-the-database",level:4},{value:"Deploying Dokploy as a Stack",id:"deploying-dokploy-as-a-stack",level:4}];function p(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"deploy-dokploy-on-ecs",children:"Deploy Dokploy on ECS"})}),"\n",(0,i.jsx)(n.p,{children:"The first part of the blueprint explains how to deploy a highly available Dokploy platform on a fleet of Elastic Cloud Servers (ECS). It covers the configuration of the required Open Telekom Cloud services, including VPC, NAT Gateway, Elastic Load Balancer, RDS, and DCS,\nas well as the setup of the core Dokploy components such as the backend, frontend, and the Traefik ingress controller."}),"\n",(0,i.jsx)(n.h2,{id:"creating-vpc-and-subnets",children:"Creating VPC and Subnets"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Network Console"})," -> ",(0,i.jsx)(n.em,{children:"Virtual Private Cloud"})," and click ",(0,i.jsx)(n.em,{children:"Create VPC"}),". Create a VPC (let's call it for the rest of this lab ",(0,i.jsx)(n.code,{children:"vpc-dokploy"}),") with the IPv4 CIDR block ",(0,i.jsx)(n.code,{children:"10.199.0.0/16"}),", and define three subnets:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"10.199.10.0/24"}),": for connectivity components (NATGW, ELB and bastion host)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"10.199.11.0/24"}),": for Swarm nodes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"10.199.12.0/24"}),": for RDS and DCS instances"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(49845).A+"",width:"1907",height:"831"})}),"\n",(0,i.jsx)(n.admonition,{type:"important",children:(0,i.jsxs)(n.p,{children:["You may choose any IP address range that fits your environment, provided the VPC is allocated a ",(0,i.jsx)(n.code,{children:"/16"})," network."]})}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-postgresql-database",children:"Creating a PostgreSQL Database"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Relational Database Service"})," and click ",(0,i.jsx)(n.strong,{children:"Create DB Instance"}),". Name the instance ",(0,i.jsx)(n.code,{children:"rds-dokploy"})," and configure it with the following settings:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"DB Engine"}),": ",(0,i.jsx)(n.code,{children:"PostgreSQL"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"DB Engine Version"}),": ",(0,i.jsx)(n.code,{children:"17"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"DB Instance Type"}),": ",(0,i.jsx)(n.code,{children:"Primary/Standby"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Primary AZ"}),": ",(0,i.jsx)(n.code,{children:"eu-de-01"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Standby AZ"}),": ",(0,i.jsx)(n.code,{children:"eu-de-02"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Instance Class"}),": ",(0,i.jsx)(n.code,{children:"Dedicated"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Storage Space"}),": ",(0,i.jsx)(n.code,{children:"150GB"})," (you can scale later according to your needs)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"VPC"}),": ",(0,i.jsx)(n.code,{children:"vpc-dokploy"})," and ",(0,i.jsx)(n.strong,{children:"Subnet"}),": ",(0,i.jsx)(n.code,{children:"10.199.12.0/24"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Finally provide a password for ",(0,i.jsx)(n.strong,{children:"root"})," and click ",(0,i.jsx)(n.em,{children:"Create Now"})," -> ",(0,i.jsx)(n.em,{children:"Submit"}),":"]}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"You can create a strong, secure, random password of your choice with, e.g.:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"openssl rand -base64 32\n"})})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-redis-instance",children:"Creating a Redis Instance"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Distributed Cache Service"})," and click ",(0,i.jsx)(n.em,{children:"Create DCS Instance"}),". Name the instance ",(0,i.jsx)(n.code,{children:"dcs-dokploy"})," and configure it with the following settings:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Instance Type"}),": ",(0,i.jsx)(n.code,{children:"Master/Standby"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Replicas"}),": ",(0,i.jsx)(n.code,{children:"2"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Primary AZ"}),": ",(0,i.jsx)(n.code,{children:"eu-de-01"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Standby AZ"}),": ",(0,i.jsx)(n.code,{children:"eu-de-02"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Instance Specification"}),": ",(0,i.jsx)(n.code,{children:"redis.ha.xu1.large.r2.2"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"VPC"}),": ",(0,i.jsx)(n.code,{children:"vpc-dokploy"})," and ",(0,i.jsx)(n.strong,{children:"Subnet"}),": ",(0,i.jsx)(n.code,{children:"10.199.12.0/24"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Password Protected"}),": ",(0,i.jsx)(n.code,{children:"No"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"preparing-security-groups",children:"Preparing Security Groups"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Network Console"})," -> ",(0,i.jsx)(n.em,{children:"Access Control"})," -> ",(0,i.jsx)(n.em,{children:"Security Groups"})," and click ",(0,i.jsx)(n.em,{children:"Create Security Group"}),":"]}),"\n",(0,i.jsx)(n.admonition,{title:"caution",type:"warning",children:(0,i.jsx)(n.p,{children:"You must provision Security Groups for all of the above (RDS, SSH, and Dokploy); all of them are required."})}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsxs)(l.A,{value:"rds",label:"RDS (Instances/Clients)",default:!0,children:[(0,i.jsxs)(n.p,{children:["Configure the required Security Groups as outlined in\n",(0,i.jsx)(n.a,{href:"/docs/best-practices/databases/relational-database-service/configure-sg-for-rds-instances",children:"Configure Security Groups for PostgreSQL RDS Instances and Clients"}),".\nAfter the RDS instance has been created, update its configuration to use the ",(0,i.jsx)(n.strong,{children:"rds-dokploy-instances"})," Security Group instead of the ",(0,i.jsx)(n.strong,{children:"default"})," one."]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(22426).A+"",width:"1890",height:"831"})}),(0,i.jsx)(n.admonition,{type:"important",children:(0,i.jsxs)(n.p,{children:["In this setup, ensure the inbound rule for ",(0,i.jsx)(n.strong,{children:"rds-dokploy-instances"})," allows traffic from ",(0,i.jsx)(n.code,{children:"10.199.0.0/16"})," (the whole VPC),\nand the outbound rule of ",(0,i.jsx)(n.strong,{children:"rds-dokploy-clients"})," permits traffic to ",(0,i.jsx)(n.code,{children:"10.199.12.0/24"})," (the subnet where the RDS instances reside)."]})})]}),(0,i.jsx)(l.A,{value:"ssh",label:"SSH (Bastion)",children:(0,i.jsxs)(n.p,{children:["Name the Security Group ",(0,i.jsx)(n.strong,{children:"ssh-dokploy"})," and add an ",(0,i.jsx)(n.em,{children:"inbound"})," rule to allow ",(0,i.jsx)(n.code,{children:"TCP/22"})," traffic from ",(0,i.jsx)(n.code,{children:"0.0.0.0/0"}),".\nFor improved security, restrict the source to a defined IP range instead of open access."]})}),(0,i.jsxs)(l.A,{value:"dokploy",label:"Dokploy (Bundle)",children:[(0,i.jsxs)(n.p,{children:["Name the Security Group ",(0,i.jsx)(n.strong,{children:"ecs-dokploy"})," and add the following ",(0,i.jsx)(n.em,{children:"inbound"})," rules:"]}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Protocol"}),(0,i.jsx)(n.th,{children:"Port"}),(0,i.jsx)(n.th,{children:"Source"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"IPv4"}),(0,i.jsx)(n.td,{children:"UDP"}),(0,i.jsx)(n.td,{children:"7946"}),(0,i.jsx)(n.td,{children:"10.199.11.0/24"}),(0,i.jsx)(n.td,{children:"Allow Docker Swarm UDP Gossip"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"IPv4"}),(0,i.jsx)(n.td,{children:"TCP"}),(0,i.jsx)(n.td,{children:"7946"}),(0,i.jsx)(n.td,{children:"10.199.11.0/24"}),(0,i.jsx)(n.td,{children:"Allow Docker Swarm TCP Gossip"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"IPv4"}),(0,i.jsx)(n.td,{children:"UDP"}),(0,i.jsx)(n.td,{children:"4789"}),(0,i.jsx)(n.td,{children:"10.199.11.0/24"}),(0,i.jsx)(n.td,{children:"Allow Docker Swarm Overlay"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"IPv4"}),(0,i.jsx)(n.td,{children:"TCP"}),(0,i.jsx)(n.td,{children:"2377"}),(0,i.jsx)(n.td,{children:"10.199.11.0/24"}),(0,i.jsx)(n.td,{children:"Allow Docker Swarm Manager"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"IPv4"}),(0,i.jsx)(n.td,{children:"TCP"}),(0,i.jsx)(n.td,{children:"80"}),(0,i.jsx)(n.td,{children:"0.0.0.0/0"}),(0,i.jsx)(n.td,{children:"Allow Dokploy Traefik HTTP"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"IPv4"}),(0,i.jsx)(n.td,{children:"TCP"}),(0,i.jsx)(n.td,{children:"443"}),(0,i.jsx)(n.td,{children:"0.0.0.0/0"}),(0,i.jsx)(n.td,{children:"Allow Dokploy Traefik HTTPS"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"IPv4"}),(0,i.jsx)(n.td,{children:"TCP"}),(0,i.jsx)(n.td,{children:"22"}),(0,i.jsx)(n.td,{children:"10.199.10.0/24"}),(0,i.jsx)(n.td,{children:"Allow SSH from Bastion Subnet"})]})]})]}),(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"2377/TCP"}),": Cluster management traffic (Required for Swarm Management). Only needed on manager nodes.\nUsed for ",(0,i.jsx)(n.code,{children:"docker swarm init"})," and ",(0,i.jsx)(n.code,{children:"docker swarm join"})," commands. Without it, worker nodes can't join the swarm."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"7946/TCP+UDP"}),": Node discovery/gossip (Required for Swarm Node Discovery & Gossip). Required on all nodes (manager + worker).\nUsed by the ",(0,i.jsx)(n.a,{href:"https://github.com/hashicorp/serf",children:"Serf"})," gossip protocol for cluster membership and health status."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"4789/UDP"}),": VXLAN overlay networking (Required for Overlay Networks). Required on all nodes (manager + worker) if you use overlay networks.\nNeeded for inter-container networking across different Docker hosts."]}),"\n"]})})]})]}),"\n",(0,i.jsx)(n.h2,{id:"preparing-compute--storage",children:"Preparing Compute & Storage"}),"\n",(0,i.jsx)(n.h3,{id:"creating-an-ecs-group",children:"Creating an ECS Group"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Elastic Cloud Server"})," -> ",(0,i.jsx)(n.em,{children:"ECS Group"}),"  and click ",(0,i.jsx)(n.em,{children:"Create ECS Group"}),".\nName the group ",(0,i.jsx)(n.code,{children:"svrgrp-dokploy"})," and configure it with ",(0,i.jsx)(n.code,{children:"Anti-Affinity"})," policy and click ",(0,i.jsx)(n.em,{children:"OK"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["An ECS group enables up to 16 ECSs in this group to be created ",(0,i.jsx)(n.strong,{children:"on different hosts"})," to improve service reliability."]})}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-key-pair",children:"Creating a Key Pair"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Elastic Cloud Server"})," -> ",(0,i.jsx)(n.em,{children:"Network & Security"})," -> ",(0,i.jsx)(n.em,{children:"Key Pair"}),"  and click ",(0,i.jsx)(n.em,{children:"Create Key Pair"}),".\nName it ",(0,i.jsx)(n.strong,{children:"KeyPair-Dokploy"})," and click ",(0,i.jsx)(n.em,{children:"OK"}),". A file named ",(0,i.jsx)(n.strong,{children:"Keypair-Dokploy.pem"})," will be automatically downloaded to your machine."]}),"\n",(0,i.jsx)(n.admonition,{type:"important",children:(0,i.jsxs)(n.p,{children:["Save the file in ",(0,i.jsx)(n.strong,{children:"~/.ssh"})," on your workstation and keep it secure, as it will be needed to access both the Swarm nodes and the bastion host later."]})}),"\n",(0,i.jsx)(n.h3,{id:"creating-nodes",children:"Creating Nodes"}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsxs)(l.A,{value:"masters",label:"Master Nodes",default:!0,children:[(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Elastic Cloud Server"}),"  and click ",(0,i.jsx)(n.em,{children:"Create ECS"})," and configure it with the following settings:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AZ"}),": ",(0,i.jsx)(n.code,{children:"Random"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Multi-AZ Deployment"}),": ","\u2705"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Flavor"}),": ",(0,i.jsx)(n.code,{children:"s7n.xlarge.2"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Image"}),": ",(0,i.jsx)(n.code,{children:"Ubuntu, Standard_Ubuntu_22.04_latest(6 GiB)"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"System Disk"}),": ",(0,i.jsx)(n.code,{children:"General Purpose SSD"}),", ",(0,i.jsx)(n.code,{children:"100GiB"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"VPC"}),": ",(0,i.jsx)(n.code,{children:"vpc-dokploy"})," and ",(0,i.jsx)(n.strong,{children:"Subnet"}),": ",(0,i.jsx)(n.code,{children:"10.199.11.0/24"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security Groups"}),": add ",(0,i.jsx)(n.code,{children:"rds-dokploy-clients"})," and ",(0,i.jsx)(n.code,{children:"ecs-dokploy"})," additionally to ",(0,i.jsx)(n.code,{children:"default"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ECS Name"}),": ",(0,i.jsx)(n.code,{children:"ecs-dokploy-manager"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Key Pair"}),": ",(0,i.jsx)(n.code,{children:"KeyPair-Dokploy"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ECS Group"}),": ",(0,i.jsx)(n.code,{children:"srvgrp-dokploy"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Quantity"}),": ",(0,i.jsx)(n.code,{children:"3"})]}),"\n"]}),(0,i.jsxs)(n.p,{children:["and click ",(0,i.jsx)(n.em,{children:"Confirm"})," -> ",(0,i.jsx)(n.em,{children:"Create Now"}),"."]})]}),(0,i.jsxs)(l.A,{value:"workers",label:"Worker Nodes",children:[(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Elastic Cloud Server"})," and click ",(0,i.jsx)(n.em,{children:"Create ECS"})," and configure it with the following settings:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AZ"}),": ",(0,i.jsx)(n.code,{children:"Random"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Multi-AZ Deployment"}),": ","\u2705"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Flavor"}),": ",(0,i.jsx)(n.code,{children:"s7n.xlarge.4"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Image"}),": ",(0,i.jsx)(n.code,{children:"Ubuntu, Standard_Ubuntu_22.04_latest(6 GiB)"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"System Disk"}),": ",(0,i.jsx)(n.code,{children:"General Purpose SSD"}),", ",(0,i.jsx)(n.code,{children:"100GiB"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"VPC"}),": ",(0,i.jsx)(n.code,{children:"vpc-dokploy"})," and ",(0,i.jsx)(n.strong,{children:"Subnet"}),": ",(0,i.jsx)(n.code,{children:"10.199.11.0/24"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security Groups"}),": add ",(0,i.jsx)(n.code,{children:"rds-dokploy-clients"})," and ",(0,i.jsx)(n.code,{children:"ecs-dokploy"})," additionally to ",(0,i.jsx)(n.code,{children:"default"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ECS Name"}),": ",(0,i.jsx)(n.code,{children:"ecs-dokploy-worker"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Key Pair"}),": ",(0,i.jsx)(n.code,{children:"KeyPair-Dokploy"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ECS Group"}),": ",(0,i.jsx)(n.code,{children:"srvgrp-dokploy"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Quantity"}),": ",(0,i.jsx)(n.code,{children:"3"})]}),"\n"]}),(0,i.jsxs)(n.p,{children:["and click ",(0,i.jsx)(n.em,{children:"Confirm"})," -> ",(0,i.jsx)(n.em,{children:"Create Now"}),"."]})]}),(0,i.jsxs)(l.A,{value:"bastion",label:"Bastion Node",children:[(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Elastic Cloud Server"})," and click ",(0,i.jsx)(n.em,{children:"Create ECS"})," and configure it with the following settings:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AZ"}),": ",(0,i.jsx)(n.code,{children:"Random"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Flavor"}),": ",(0,i.jsx)(n.code,{children:"s7n.medium.2"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Image"}),": ",(0,i.jsx)(n.code,{children:"Ubuntu, Standard_Ubuntu_22.04_latest(6 GiB)"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"System Disk"}),": ",(0,i.jsx)(n.code,{children:"General Purpose SSD"}),", ",(0,i.jsx)(n.code,{children:"40GiB"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"VPC"}),": ",(0,i.jsx)(n.code,{children:"vpc-dokploy"})," and ",(0,i.jsx)(n.strong,{children:"Subnet"}),": ",(0,i.jsx)(n.code,{children:"10.199.10.0/24"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security Groups"}),": add ",(0,i.jsx)(n.code,{children:"rds-dokploy-clients"})," and ",(0,i.jsx)(n.code,{children:"ssh-dokploy"})," additionally to ",(0,i.jsx)(n.code,{children:"default"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"ECS Name"}),": ",(0,i.jsx)(n.code,{children:"ecs-dokploy-bastion"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Key Pair"}),": ",(0,i.jsx)(n.code,{children:"KeyPair-Dokploy"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Quantity"}),": ",(0,i.jsx)(n.code,{children:"1"})]}),"\n"]}),(0,i.jsxs)(n.p,{children:["and click ",(0,i.jsx)(n.em,{children:"Confirm"})," -> ",(0,i.jsx)(n.em,{children:"Create Now"}),"."]})]})]}),"\n",(0,i.jsx)(n.admonition,{title:"caution",type:"warning",children:(0,i.jsxs)(n.p,{children:["Deploy all seven(7) ECS instances and ",(0,i.jsx)(n.strong,{children:"carefully verify that each instance is assigned to the correct subnet"}),"."]})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(74925).A+"",width:"1907",height:"831"})}),"\n",(0,i.jsx)(n.h3,{id:"creating-an-sfs-turbo-file-system",children:"Creating an SFS Turbo File System"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Scalable File System"})," -> ",(0,i.jsx)(n.em,{children:"SFS Turbo"})," -> ",(0,i.jsx)(n.em,{children:"File Systems"})," and click ",(0,i.jsx)(n.em,{children:"Create File System"}),".\nName the instance ",(0,i.jsx)(n.code,{children:"sfs-turbo-dokploy"})," and configure it with the following settings, and click ",(0,i.jsx)(n.em,{children:"Create Now"})," -> ",(0,i.jsx)(n.em,{children:"Submit"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type"}),": ",(0,i.jsx)(n.code,{children:"Standard"})," (Old Generation)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Capacity"}),": ",(0,i.jsx)(n.code,{children:"500GB"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"VPC"}),": ",(0,i.jsx)(n.code,{children:"vpc-dokploy"})," and ",(0,i.jsx)(n.strong,{children:"Subnet"}),": ",(0,i.jsx)(n.code,{children:"10.199.11.0/24"})]}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsxs)(n.p,{children:["You need the ",(0,i.jsx)(n.a,{href:"https://docs.otc.t-systems.com/scalable-file-service/umn/faqs/concepts/what_is_sfs_turbo.html",children:"SFS Turbo"})," share because anything you bind-mount into a Swarm service must exist identically on every node where that task might land,\nand local Docker volumes are node-scoped. In our design the control-plane services (Traefik, Dokploy, Portainer) run on any manager;\nduring updates or failover Swarm can relocate a replica to a different manager. If a service relies on a host path such as ",(0,i.jsx)(n.strong,{children:"/etc/traefik/traefik.yml"}),",\n",(0,i.jsx)(n.strong,{children:"/etc/dokploy"}),", or persistent UI data, that path must contain the same bytes on every manager or the task will be rejected or start with divergent\nconfiguration. Mounting a single NFSv4 export from SFS Turbo at the same mountpoint on each manager gives you a shared POSIX filesystem with\nconsistent paths and semantics, so the bind mounts resolve everywhere, the configuration becomes a single source of truth, and rescheduling doesn't\nbreak because bind source path might not exist or because of stale files."]}),(0,i.jsx)(n.p,{children:"This matters for more than configuration. If you keep Portainer or Dokploy state on a node-local volume, you either have to pin the service to\nthat node forever or accept losing state on failover. With SFS Turbo you move that state onto network storage that all managers can read and write,\nso you can keep replicas movable and still preserve data. It also gives you a neutral place to store artifacts that multiple containers need at once;\nTraefik dynamic files, bootstrap templates, backup snapshots, build caches without inventing your own replication. Because SFS Turbo is a managed,\nhigh-throughput NFS service inside the VPC, you get low latency from every ECS, consistent locking and file permissions, and durability features\nsuch as snapshots; operationally it's much simpler and safer than trying to mirror directories across nodes or relying on ad-hoc rsync jobs.\nIn short, the share decouples service scheduling from host persistence: Swarm can freely reschedule managers, and your control-plane services\nstill find their config and data exactly where they expect it."})]}),"\n",(0,i.jsx)(n.h3,{id:"creating-an-obs-bucket",children:"Creating an OBS Bucket"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Object Storage Service"})," -> ",(0,i.jsx)(n.em,{children:"Object Storage"})," and click ",(0,i.jsx)(n.em,{children:"Create Bucket"}),".\nName the instance ",(0,i.jsx)(n.code,{children:"obs-dokploy"})," and configure it with the following settings, and click ",(0,i.jsx)(n.em,{children:"Create Now"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Region"}),": the same region as you've already chosen to run this lab"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Storage Class"}),": ",(0,i.jsx)(n.code,{children:"Standard"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Bucket Policies"}),": ",(0,i.jsx)(n.code,{children:"Private"})]}),"\n"]}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.p,{children:"Dokploy needs an object store because it is not just a control plane; it orchestrates full application lifecycles, including builds, deployments,\nbackups, and artifacts. A relational database and a key-value store are fine for state and coordination, but they are not suitable for\nstoring container images, large build outputs, tarballs, or user-generated assets. Those files have to live in a storage system that can\nhandle unbounded growth, is durable by design, and can be addressed consistently no matter where a container runs."}),(0,i.jsx)(n.p,{children:"When Dokploy builds an application from source or exports a backup, it stages artifacts in object storage and later fetches them back for deployment.\nThis indirection allows workloads to be moved between Swarm nodes without having to replicate gigabytes of data across managers. Using an OBS bucket\nalso integrates neatly with Dokploy's workflow for volume backups: instead of keeping snapshots on ephemeral node disks, backups are written once\nto OBS, where they are durable, versioned if you enable it, and available to restore on any new cluster."}),(0,i.jsxs)(n.p,{children:["Another important reason is compatibility. Dokploy assumes an S3 endpoint for its storage backend, which means it can treat local deployments and\ncloud deployments the same way. By giving it an OBS bucket, you satisfy that contract with an API that looks like AWS S3 but lives entirely in Open Telekom Cloud,\ntaking advantage of built-in durability and regional replication. This reduces operational burden compared to stitching together your own distributed file\nservice for large objects (e.g. with ",(0,i.jsx)(n.a,{href:"https://www.min.io/",children:"MinIO"}),")."]}),(0,i.jsx)(n.p,{children:"In practice the OBS bucket becomes the persistent layer for Dokploy's heavy binary data, while Postgres tracks metadata\nand Redis accelerates queries. Together, those three backends give Dokploy all the persistence primitives it needs: structured state, ephemeral cache,\nand durable object storage."})]}),"\n",(0,i.jsx)(n.h2,{id:"creating-a-nat-gateway",children:"Creating a NAT Gateway"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Network Console"})," -> ",(0,i.jsx)(n.em,{children:"NAT Gateway"})," -> ",(0,i.jsx)(n.em,{children:"Public NAT Gateways"})," and click ",(0,i.jsx)(n.em,{children:"Create Public NAT Gateway"}),". Call it ",(0,i.jsx)(n.code,{children:"nat-dokploy"})," and assign\nit to the ",(0,i.jsx)(n.code,{children:"vpc-dokploy"})," VPC and place it in the subnet ",(0,i.jsx)(n.code,{children:"10.199.10.0/24"}),". Set ",(0,i.jsx)(n.strong,{children:"Specifications"})," to ",(0,i.jsx)(n.code,{children:"Small"})," and click ",(0,i.jsx)(n.em,{children:"Create Now"}),".\nSkip adding rules at this stage; we will configure them later."]}),"\n",(0,i.jsx)(n.h3,{id:"configurating-snat--dnat-rules",children:"Configurating SNAT & DNAT Rules"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Network Console"})," -> ",(0,i.jsx)(n.em,{children:"Elastic IP & Bandwidth"})," -> ",(0,i.jsx)(n.em,{children:"EIPs"})," and click ",(0,i.jsx)(n.em,{children:"Assign EIP"}),". Name it ",(0,i.jsx)(n.code,{children:"eip-natgw-dokploy"})," and configure\nit with the following settings, and click ",(0,i.jsx)(n.em,{children:"Create Now"})," -> ",(0,i.jsx)(n.em,{children:"Submit"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"EIP Type"}),": ",(0,i.jsx)(n.code,{children:"Dynamic BGP"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Billed By"}),": ",(0,i.jsx)(n.code,{children:"Dedicated"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Bandwidth (Mbit/s)"}),": ",(0,i.jsx)(n.code,{children:"50"})," (that is an indicative value, adjust according to your needs)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Network Console"})," -> ",(0,i.jsx)(n.em,{children:"NAT Gateway"})," -> ",(0,i.jsx)(n.em,{children:"Public NAT Gateways"})," and select the NAT gateway you created earlier."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.em,{children:"SNAT Rules"})," -> ",(0,i.jsx)(n.em,{children:"Add SNAT Rule"})," select the EIP you created earlier (",(0,i.jsx)(n.strong,{children:"eip-natgw-dokploy"}),") and click ",(0,i.jsx)(n.em,{children:"OK"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(15507).A+"",width:"1916",height:"832"})}),"\n",(0,i.jsx)(n.admonition,{type:"important",children:(0,i.jsxs)(n.p,{children:["Repeat this step for each subnet in ",(0,i.jsx)(n.strong,{children:"vpc-dokploy"}),"."]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.em,{children:"DNAT Rules"})," -> ",(0,i.jsx)(n.em,{children:"Add DNAT Rule"})," and configure it with the following settings:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Scenario"}),": ",(0,i.jsx)(n.code,{children:"VPC"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Port Type"}),": ",(0,i.jsx)(n.code,{children:"Specific Port"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Protocol"}),": ",(0,i.jsx)(n.code,{children:"TCP"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Public IP Address Type"}),": ",(0,i.jsx)(n.code,{children:"EIP"})," and select from the list the EIP you created earlier."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Outside Port"}),": ",(0,i.jsx)(n.code,{children:"2200"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Instance Type"}),": ",(0,i.jsx)(n.code,{children:"Server"})," and select ",(0,i.jsx)(n.code,{children:"ecs-dokploy-bastion"})," from the list."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Inside Port"}),": ",(0,i.jsx)(n.code,{children:"22"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["and click ",(0,i.jsx)(n.em,{children:"OK"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"creating-an-elastic-load-balancer",children:"Creating an Elastic Load Balancer"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Network Console"})," -> ",(0,i.jsx)(n.em,{children:"Elastic Load Balancing"})," and click ",(0,i.jsx)(n.em,{children:"Create Elastic Load Balancer"}),". Name the instance ",(0,i.jsx)(n.code,{children:"elb-dokploy"}),"\nand configure it with the following settings, and click ",(0,i.jsx)(n.em,{children:"Create Now"})," -> ",(0,i.jsx)(n.em,{children:"Submit"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type"}),": ",(0,i.jsx)(n.code,{children:"Dedicated"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"AZ"}),": select ",(0,i.jsx)(n.em,{children:"all"})," the available options"]}),"\n",(0,i.jsxs)(n.li,{children:["Enable both ",(0,i.jsx)(n.strong,{children:"Application"})," and ",(0,i.jsx)(n.strong,{children:"Network Load Balancing"})," (choose the specs that fit more to your needs)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"VPC"}),": ",(0,i.jsx)(n.code,{children:"vpc-dokploy"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Frontend Subnet"}),": ",(0,i.jsx)(n.code,{children:"10.199.10.0/24"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backend Subnet"}),": ",(0,i.jsx)(n.code,{children:"10.199.11.0/24"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"EIP"}),": select ",(0,i.jsx)(n.em,{children:"New IP"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Bandwidth"}),": ",(0,i.jsx)(n.code,{children:"300Mbit/s"})]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(9223).A+"",width:"1907",height:"831"})}),"\n",(0,i.jsx)(n.admonition,{type:"important",children:(0,i.jsx)(n.p,{children:"Make a note of the EIP of the load balancer, as it will be required in the next steps when creating the necessary DNS records."})}),"\n",(0,i.jsx)(n.h2,{id:"creating-dns-records",children:"Creating DNS Records"}),"\n",(0,i.jsxs)(n.admonition,{type:"caution",children:[(0,i.jsx)(n.p,{children:"You must delegate the management of your domain's NS records to the Open Telekom Cloud Domain Name Service.\nAt your domain registrar, configure the following:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Disable any dynamic DNS service for the domain or for the subdomain you plan to use with Dokploy."}),"\n",(0,i.jsxs)(n.li,{children:["Update the NS records of your domain to point to ",(0,i.jsx)(n.code,{children:"ns1.open-telekom-cloud.com"})," and ",(0,i.jsx)(n.code,{children:"ns2.open-telekom-cloud.com"}),"."]}),"\n"]}),(0,i.jsx)(n.p,{children:"Once these changes are in place, you can proceed to create a new DNS Public Zone and the required record sets for your domain in Open Telekom Cloud."}),(0,i.jsxs)(n.p,{children:["If delegating domain management to Open Telekom Cloud DNS ",(0,i.jsx)(n.strong,{children:"is not an option"}),",\nyou will need to apply the following steps in your existing DNS service (for example, at your registrar or through Cloudflare)."]})]}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Domain Name Service"})," -> ",(0,i.jsx)(n.em,{children:"Public Zones"})," and select the zone corresponding\nto the domain through which you will expose Dokploy and the workloads hosted on it. Create the following A Records by clicking ",(0,i.jsx)(n.em,{children:"Add Record Set"}),":"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Domain"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"TTL (s)"}),(0,i.jsx)(n.th,{children:"Value"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"*.dokploy.example.com"}),(0,i.jsx)(n.td,{children:"A"}),(0,i.jsx)(n.td,{children:"300"}),(0,i.jsx)(n.td,{children:"EIP_ELB"}),(0,i.jsx)(n.td,{children:"Wildcard record for all applications exposed through Dokploy via the ELB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"dokploy.example.com"}),(0,i.jsx)(n.td,{children:"A"}),(0,i.jsx)(n.td,{children:"300"}),(0,i.jsx)(n.td,{children:"EIP_ELB"}),(0,i.jsx)(n.td,{children:"Root domain pointing to the ELB, reserved for future use or redirects"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"console.dokploy.example.com"}),(0,i.jsx)(n.td,{children:"A"}),(0,i.jsx)(n.td,{children:"300"}),(0,i.jsx)(n.td,{children:"EIP_ELB"}),(0,i.jsx)(n.td,{children:"Dokploy management console routed through the ELB"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"bastion.dokploy.example.com"}),(0,i.jsx)(n.td,{children:"A"}),(0,i.jsx)(n.td,{children:"300"}),(0,i.jsx)(n.td,{children:"EIP_NATGW"}),(0,i.jsx)(n.td,{children:"Bastion host used for administrative SSH access to the Swarm cluster"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"portainer.dokploy.example.com"}),(0,i.jsx)(n.td,{children:"A"}),(0,i.jsx)(n.td,{children:"300"}),(0,i.jsx)(n.td,{children:"EIP_ELB"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.a,{href:"https://www.portainer.io/",children:"Portainer"})," UI for Swarm management, exposed through the ELB (Optional)"]})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"important",children:(0,i.jsxs)(n.p,{children:["Replace ",(0,i.jsx)(n.strong,{children:"EIP_ELB"})," and ",(0,i.jsx)(n.strong,{children:"EIP_NATGW"})," with the actual Elastic IP addresses assigned to the load balancer and the NAT gateway."]})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(58332).A+"",width:"1907",height:"694"})}),"\n",(0,i.jsx)(n.h2,{id:"creating-the-swarm",children:"Creating the Swarm"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use a tool such as ",(0,i.jsx)(n.a,{href:"https://linux.die.net/man/1/dig",children:"dig"})," or ",(0,i.jsx)(n.a,{href:"https://github.com/mr-karan/doggo",children:"doggo"})," to verify that the bastion host domain resolves to the Elastic IP address of the NAT gateway:"]}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsxs)(l.A,{value:"dig",label:"dig",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"dig"})," (Domain Information Groper) is a widely used command-line DNS client included in most Unix-like systems. It is commonly used for\ntroubleshooting and verifying DNS records, providing detailed output about queries and responses.\n",(0,i.jsx)(n.strong,{children:"dig"})," supports multiple query types and\noptions, making it a standard tool for administrators to inspect domain resolution and DNS server behavior."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"sudo apt update\nsudo apt install dnsutils\n\ndig +short bastion.dokploy.example.com\n"})})]}),(0,i.jsxs)(l.A,{value:"doggo",label:"doggo",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"doggo"})," is a modern command-line DNS client, similar to ",(0,i.jsx)(n.strong,{children:"dig"}),", developed in Go.\nIt provides clear and concise output and supports additional protocols such as DoH, DoT, DoQ, and DNSCrypt."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-terminal",children:"curl -sS https://raw.githubusercontent.com/mr-karan/doggo/main/install.sh | sh\n\ndoggo bastion.dokplay.example.com\n"})})]})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Copy the KeyPair we created previously to the bastion host:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod 400 ~/.ssh/KeyPair-Dokploy.pem\nscp -i ~/.ssh/KeyPair-Dokploy.pem -P 2200 ~/.ssh/KeyPair-Dokploy.pem ubuntu@bastion.dokploy.example.com:/home/ubuntu/.ssh\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Connect to the bastion host using SSH:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh -i ~/.ssh/KeyPair-Dokploy.pem -p 2200 ubuntu@bastion.dokploy.example.com\n"})}),"\n",(0,i.jsxs)(n.p,{children:["and from the bastion host, connect in sequence to ",(0,i.jsx)(n.strong,{children:"each"})," manager node, e.g.:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh -i ~/.ssh/KeyPair-Dokploy.pem 10.199.11.xxx\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Deploy Docker and various utilities on ",(0,i.jsx)(n.strong,{children:"every"})," node:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# basic packages\nsudo apt-get update -y && sudo apt-get install -y ca-certificates curl gnupg nfs-common\n\n# docker\ncurl -sSL https://get.docker.com | sh\n\nsudo groupadd docker\nsudo usermod -aG docker $USER\nnewgrp docker\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"From the bastion host, connect to the first manager node using its private IP address:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ssh -i ~/.ssh/KeyPair-Dokploy.pem 10.199.11.141\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"critical",type:"danger",children:(0,i.jsxs)(n.p,{children:["Replace ",(0,i.jsx)(n.code,{children:"10.199.11.141"})," with the private IP address of the first manager node in your environment."]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Initialize the Docker Swarm:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"PRIVATE_IP=$(ip -4 addr show ens3 | awk '/inet /{print $2}' | cut -d/ -f1)\ndocker swarm init --advertise-addr \"$PRIVATE_IP\"\n"})}),"\n",(0,i.jsx)(n.p,{children:"If the initialization completes successfully, a message similar to the following will appear:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"Swarm initialized: current node (096mm1ulpf7u0frrme514t99z) is now a manager.\n\nTo add a **worker** to this swarm, run the following command:\n\n    docker swarm join --token SWMTKN-1-6bqpqrh7ztq5u5y465kvvbyjodxzzekrxzyofymt5al4jpx1e7-a0uwmu7mfdrqdne0iyqs65brz 10.199.11.141:2377\n\nTo add a **manager** to this swarm, run 'docker swarm join-token manager' and follow the instructions.\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Run the command provided in the response to add a ",(0,i.jsx)(n.strong,{children:"manager"})," to the swarm. You should then see a message similar to the following:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker swarm join --token SWMTKN-1-6bqpqrh7ztq5u5y465kvvbyjodxzzekrxzyofymt5al4jpx1e7-0xfr1nmmigpsqo1mowkdxpg6s 10.199.11.141:2377\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"critical",type:"danger",children:(0,i.jsx)(n.p,{children:"Note down the two join-token commands that are generated, one for managers and one for workers, and ensure they are not mixed up when\napplied to the respective nodes during the next steps."})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create an overlay network on the first manager:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker network create --driver overlay --attachable dokploy-network\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["You need to create the network once. Swarm then ensures that ",(0,i.jsx)(n.strong,{children:"any"})," node which runs a service attached\nto that network gets a local dataplane endpoint automatically."]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["From the bastion host, connect to ",(0,i.jsx)(n.strong,{children:"each"})," node and ",(0,i.jsx)(n.strong,{children:"run the appropriate join command based on its assigned role in the swarm"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["From the bastion host, connect to ",(0,i.jsx)(n.strong,{children:"each"})," node and mount the SFS Turbo share (including the bastion):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'sudo mkdir -p /mnt/sfs_turbo\necho "10.199.11.11:/ /mnt/sfs_turbo nfs vers=3,nolock,noresvport,proto=tcp,rsize=1048576,wsize=1048576,timeo=600,retrans=2,hard,_netdev,x-systemd.automount,bg,nofail 0 0" | sudo tee -a /etc/fstab\nsudo mount -a\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"critical",type:"danger",children:(0,i.jsxs)(n.p,{children:["Replace ",(0,i.jsx)(n.code,{children:"10.199.11.11"})," with the private IP address of the SFS Turbo share in your environment."]})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"deploying-traefik",children:"Deploying Traefik"}),"\n",(0,i.jsx)(n.h4,{id:"deploying-traefik-as-a-global-service",children:"Deploying Traefik as a Global Service"}),"\n",(0,i.jsxs)(n.p,{children:["Connect to any manager node (preferrably the first) and create a file named ",(0,i.jsx)(n.code,{children:"traefik.yml"})," in the ",(0,i.jsx)(n.code,{children:"/mnt/sfs_turbo"})," directory:"]}),"\n",(0,i.jsx)(n.admonition,{type:"important",children:(0,i.jsxs)(n.p,{children:["Replace ",(0,i.jsx)(n.code,{children:"10.199.0.0/16"})," with the CIDR block of your VPC."]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",metastring:'title="traefik.yml"',children:'entryPoints:\n  web:\n    address: ":80"\n    forwardedHeaders:\n      insecure: false\n      trustedIPs:\n        - 10.199.0.0/16\n        - 100.64.0.0/10\n    transport:\n      respondingTimeouts:\n        readTimeout: 0\n        writeTimeout: 0\n        idleTimeout: 180s\n      lifeCycle:\n        graceTimeOut: 15s\n\nping:\n  entryPoint: web\n\napi:\n  dashboard: false\n\nproviders:\n  docker:\n    swarmMode: true\n    watch: true\n    exposedByDefault: false\n    network: dokploy-network\n\nlog:\n  level: INFO\n\naccessLog:\n  bufferingSize: 100\n  fields:\n    defaultMode: keep\n'})}),"\n",(0,i.jsxs)(n.admonition,{title:"TLS Termination & ELB Health Checks",type:"note",children:[(0,i.jsxs)(n.p,{children:["Traefik is deployed in Swarm as a ",(0,i.jsx)(n.strong,{children:"global service"}),", ensuring one instance runs on every manager node. Because Traefik OSS cannot\nreliably share ACME certificate state across replicas, TLS termination is handled at the ",(0,i.jsx)(n.strong,{children:"Open Telekom Cloud Elastic Load Balancer (ELB)"})," instead.\nThe ELB manages certificates and enforces automatic redirection from ",(0,i.jsx)(n.code,{children:"HTTP/80"})," to ",(0,i.jsx)(n.code,{children:"HTTPS/443"}),", while Traefik itself only receives plain HTTP\ntraffic on port 80. An alternative would be to use ",(0,i.jsx)(n.strong,{children:"Traefik Enterprise"}),", which supports distributed certificate storage, but it is not\na free open-source product."]}),(0,i.jsxs)(n.p,{children:["Access to Traefik is restricted so that it only accepts requests originating from the VPC subnets and from Open Telekom Cloud infrastructure\nIP ranges. For health monitoring, Traefik exposes an endpoint at ",(0,i.jsx)(n.code,{children:"/ping"}),". This endpoint will be used in the next step when configuring an\nELB listener to track backend health."]})]}),"\n",(0,i.jsx)(n.p,{children:"Connect to any manager node via SSH, and deploy traefik as a global service:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker service create \\\n    --name traefik \\\n    --mode global \\\n    --constraint 'node.role==manager' \\\n    --network dokploy-network \\\n    --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\\n    --mount type=bind,src=/mnt/sfs_turbo/traefik.yml,dst=/etc/traefik/traefik.yml,ro \\\n    --publish mode=host,target=80,published=80,protocol=tcp \\\n    traefik:v2.10.0 \\\n        --configFile=/etc/traefik/traefik.yml\n"})}),"\n",(0,i.jsx)(n.h4,{id:"creating-wildcard-certificate",children:"Creating Wildcard Certificate"}),"\n",(0,i.jsxs)(n.p,{children:["A wildcard certificate is required because the entire platform is designed to expose not just a single control-plane endpoint,\nbut a dynamic and potentially unbounded set of application domains beneath the same base DNS zone. Dokploy provisions new applications\non the fly and binds them to subdomains such as ",(0,i.jsx)(n.code,{children:"app1.dokploy.example.com"}),", ",(0,i.jsx)(n.code,{children:"api.dokploy.example.com"}),", or ",(0,i.jsx)(n.code,{children:"console.dokploy.example.com"}),".\nIf you were to use individual certificates for each host, you would have to request, issue, and renew a new certificate every time\nan application is deployed, which introduces operational complexity and renewal failures under load."]}),"\n",(0,i.jsxs)(n.p,{children:["By using a wildcard certificate for ",(0,i.jsx)(n.code,{children:"*.dokploy.example.com"}),", the ELB can terminate TLS for any present or future subdomain without having\nto be reconfigured. All HTTPS handshakes succeed because the certificate matches the pattern of the hostname, regardless of which application\nTraefik forwards the traffic to. This design also separates responsibilities cleanly: the ELB is responsible for presenting a valid chain\nof trust to the client, while Traefik only has to handle HTTP routing inside the cluster. Without the wildcard, you would need either\ncentralized certificate management inside Traefik with distributed ACME storage, which Traefik OSS cannot do safely, or you would be forced\nto update the ELB configuration for every new app domain. The wildcard makes the system elastic: new services can be deployed and exposed\nunder unique subdomains immediately, with no TLS changes, while still maintaining full encryption and trust at the entry point."]}),"\n",(0,i.jsx)(n.admonition,{type:"important",children:(0,i.jsxs)(n.p,{children:["If you already have a wildcard certificate for the domain you plan to use, you can skip this step and proceed directly to ",(0,i.jsx)(n.a,{href:"#creating-elb-listeners",children:"configuring\nthe ELB listeners"}),"."]})}),"\n",(0,i.jsxs)(n.p,{children:["Deploy the ",(0,i.jsx)(n.a,{href:"https://github.com/certbot/certbot",children:"certbot"})," on your workstation:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install -y certbot\n"})}),"\n",(0,i.jsxs)(n.p,{children:["We are going to use certbot to issue a TLS certificate for both the base domain ",(0,i.jsx)(n.code,{children:"dokploy.example.com"})," and every possible subdomain under it\nvia the wildcard pattern ",(0,i.jsx)(n.code,{children:"*.dokploy.example.com"}),". Execute the command below, and follow the instructions of the certbot to complete the task:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'sudo certbot certonly --manual --preferred-challenges dns -d "*.dokploy.example.com" -d "dokploy.example.com"\n'})}),"\n",(0,i.jsx)(n.p,{children:"at a certain point the certbot will request from you to add a TXT record in DNS, e.g.:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(42976).A+"",width:"740",height:"255"})}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Domain Name Service"})," -> ",(0,i.jsx)(n.em,{children:"Public Zones"})," and select the zone corresponding\nto the domain through which you will expose Dokploy and the workloads hosted on it. Create a TXT Record by clicking ",(0,i.jsx)(n.em,{children:"Add Record Set"})," and filling as value\nthe information expected by certbot. Return to the terminal and press ",(0,i.jsx)(n.em,{children:"Enter"})," to continue."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(34534).A+"",width:"1910",height:"790"})}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsxs)(n.p,{children:["We this command we are going to obtain a certificate but not install it. Certbot will fetch the cert and place it under ",(0,i.jsx)(n.strong,{children:"/etc/letsencrypt/live/dokploy.example.com"}),",\nleaving you to configure the load balancer manually."]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--manual"}),", instructs Certbot not to use an automated DNS or HTTP plugin, but instead to guide you through the challenge process manually. In this mode it will stop and display TXT records that you must create in your domain\u2019s DNS zone."]}),"\n",(0,i.jsxs)(n.li,{children:["-",(0,i.jsx)(n.code,{children:"-preferred-challenges"}),", dns forces certbot to use a ",(0,i.jsx)(n.em,{children:"DNS-01"})," challenge. This is required for issuing a wildcard certificate, because\nLet's Encrypt only allows wildcards to be validated through proving control of the domain via DNS TXT records."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'-d "*.dokploy.example.com"'}),", requests coverage for all subdomains of ",(0,i.jsx)(n.strong,{children:"dokploy.example.com"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'-d "dokploy.example.com"'}),", requests coverage for the apex domain itself, so that both ",(0,i.jsx)(n.strong,{children:"console.dokploy.example.com"})," and the bare ",(0,i.jsx)(n.strong,{children:"dokploy.example.com"}),"\nresolve with a valid certificate."]}),"\n"]}),(0,i.jsxs)(n.p,{children:["Certbot will obtain a Let's Encrypt wildcard certificate valid for *",(0,i.jsx)(n.strong,{children:".dokploy.example.com"})," and ",(0,i.jsx)(n.strong,{children:"dokploy.example.com"}),", by instructing you to place specific\n",(0,i.jsx)(n.code,{children:" _acme-challenge"})," TXT records in DNS. Once you prove ownership through DNS, certbot downloads the certificate files, which you can then upload in\nOpen Telekom Cloud and use in your ELB to terminate TLS for the entire platform."]})]}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Network Console"})," -> ",(0,i.jsx)(n.em,{children:"Elastic Load Balancing"})," -> ",(0,i.jsx)(n.em,{children:"Certificates"})," and click ",(0,i.jsx)(n.em,{children:"Add Certificate"}),". Name it ",(0,i.jsx)(n.code,{children:"cert-wildcard-dokploy"}),"\nand configure it with the following settings and click ",(0,i.jsx)(n.em,{children:"OK"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Certificate Type"}),": ",(0,i.jsx)(n.code,{children:"Server certificate"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Certificate Content"}),": upload ",(0,i.jsx)(n.strong,{children:"/etc/letsencrypt/live/dokploy.example.com/fullchain.pem"})," (or paste directly the contents)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Private Key"}),": upload ",(0,i.jsx)(n.strong,{children:"/etc/letsencrypt/live/dokploy.example.com/privkey.pem"})," (or paste directly the contents)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Domain Name"}),": ",(0,i.jsx)(n.code,{children:"dkploy.example.com,*.dkploy.example.com"})]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"creating-elb-listeners",children:"Creating ELB Listeners"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Network Console"})," -> ",(0,i.jsx)(n.em,{children:"Elastic Load Balancing"})," -> ",(0,i.jsx)(n.em,{children:"Load Balancers"}),", select the ELB we created for this lab and click ",(0,i.jsx)(n.em,{children:"Add Listener"}),".\nName it ",(0,i.jsx)(n.code,{children:"listener_managers-https"})," and configure it with the following settings:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Frontend Protocol"}),": ",(0,i.jsx)(n.code,{children:"HTTPS"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Frontend Port"}),": ",(0,i.jsx)(n.code,{children:"443"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SSL Authentication"}),": ",(0,i.jsx)(n.code,{children:"One-way authentication"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Server Certificate"}),": select ",(0,i.jsx)(n.code,{children:"cert-wildcard-dokploy"})," from the list"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["click ",(0,i.jsx)(n.em,{children:"Next: Configure Request Routing Policy"}),", and configure the following:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backend Server Group"}),": choose ",(0,i.jsx)(n.code,{children:"Create new"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backend server group name"}),": ",(0,i.jsx)(n.code,{children:"server_group-managers"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backend Protocol"}),": ",(0,i.jsx)(n.code,{children:"HTTP"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["click ",(0,i.jsx)(n.em,{children:"Next: Add Backend Server"})," -> ",(0,i.jsx)(n.em,{children:"Add Backend Server"}),", select ",(0,i.jsx)(n.strong,{children:"ALL"})," the manager nodes from the list and set:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Backend Port"}),": ",(0,i.jsx)(n.code,{children:"80"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Weight"}),": ",(0,i.jsx)(n.code,{children:"1"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["click ",(0,i.jsx)(n.em,{children:"Health Check"})," -> ",(0,i.jsx)(n.em,{children:"Advanced Settings"})," and set:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Path"}),": ",(0,i.jsx)(n.code,{children:"/ping"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["and finally ",(0,i.jsx)(n.em,{children:"Next: Confirm"})," -> ",(0,i.jsx)(n.em,{children:"Submit"}),".If the configuration above applied correct and Traefik is running in the backgroup as global service,\nyou should see a healthy status for each backend group member after a few seconds:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(9712).A+"",width:"1910",height:"795"})}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Network Console"})," -> ",(0,i.jsx)(n.em,{children:"Elastic Load Balancing"})," -> ",(0,i.jsx)(n.em,{children:"Load Balancers"}),", select the ELB we created for this lab and click ",(0,i.jsx)(n.em,{children:"Add Listener"}),".\nName it ",(0,i.jsx)(n.code,{children:"listener_managers-http"})," and configure it with the following settings:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Frontend Protocol"}),": ",(0,i.jsx)(n.code,{children:"HTTP"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Frontend Port"}),": ",(0,i.jsx)(n.code,{children:"80"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Redirect"}),": ","\u2705"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Redirect"}),": choose ",(0,i.jsx)(n.code,{children:"listener_managers-https"})," from the list"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["click ",(0,i.jsx)(n.em,{children:"Next: Confirm"})," -> ",(0,i.jsx)(n.em,{children:"Submit"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(63732).A+"",width:"1910",height:"795"})}),"\n",(0,i.jsx)(n.h3,{id:"deploying-portainer-optional",children:"Deploying Portainer (Optional)"}),"\n",(0,i.jsxs)(n.p,{children:["Connect to any manager node (preferrably the first) and create a file named ",(0,i.jsx)(n.code,{children:"portainer-stack.yml"})," in the ",(0,i.jsx)(n.code,{children:"/mnt/sfs_turbo"})," directory:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",metastring:'title="portainer-stack.yml"',children:'version: "3.8"\n\nnetworks:\n  dokploy-network:\n    external: true\n\nvolumes:\n  portainer_data:\n\nservices:\n  agent:\n    image: portainer/agent:2.21.4\n    environment:\n      - AGENT_CLUSTER_ADDR=tasks.agent\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /var/lib/docker/volumes:/var/lib/docker/volumes\n    networks:\n      - dokploy-network\n    deploy:\n      mode: global\n      placement:\n        constraints:\n          - node.platform.os == linux\n\n  portainer:\n    image: portainer/portainer-ce:2.21.4\n    command: >\n      -H tcp://tasks.agent:9001\n      --tlsskipverify\n    volumes:\n      - portainer_data:/data\n    networks:\n      - dokploy-network\n    deploy:\n      replicas: 1\n      placement:\n        constraints:\n          - node.role == manager\n      labels:\n        traefik.enable: "true"\n\n        # Router\n        traefik.http.routers.portainer.rule: Host(`portainer.dokploy.example.com`)\n        traefik.http.routers.portainer.entrypoints: web\n        traefik.http.routers.portainer.middlewares: portainer-https-hdr\n\n        # Service (backend)\n        traefik.http.services.portainer.loadbalancer.server.port: "9000"\n        traefik.http.services.portainer.loadbalancer.server.scheme: "http"\n        traefik.http.services.portainer.loadbalancer.passHostHeader: "true"\n\n        # Force headers so Portainer knows TLS was at the ELB\n        traefik.http.middlewares.portainer-https-hdr.headers.customRequestHeaders.X-Forwarded-Proto: "https"\n        traefik.http.middlewares.portainer-https-hdr.headers.customRequestHeaders.X-Forwarded-Port: "443"\n        traefik.http.middlewares.portainer-https-hdr.headers.customRequestHeaders.X-Forwarded-Host: "portainer.dokploy.example.com"\n\n        # Make sure Traefik connects over the right overlay network\n        traefik.docker.network: "dokploy-network"\n'})}),"\n",(0,i.jsx)(n.p,{children:"and then deploy the stack:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo docker stack deploy -c /mnt/sfs_turbo/portainer-stack.yml portainer\n"})}),"\n",(0,i.jsx)(n.p,{children:"Swarm will:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"start one Portainer server on a manager,"}),"\n",(0,i.jsxs)(n.li,{children:["start an agent on ",(0,i.jsx)(n.strong,{children:"every"})," node,"]}),"\n",(0,i.jsxs)(n.li,{children:["and Traefik will route ",(0,i.jsx)(n.a,{href:"https://portainer.dokploy.example.com",children:"https://portainer.dokploy.example.com"})," (ELB -> Traefik :80 -> Portainer :9000)."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Open the URL and set the admin password on first login."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(55679).A+"",width:"1915",height:"969"})}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsxs)(n.p,{children:["Portainer gives a clean, web-based control plane for everything running on Swarm, which dramatically lowers the operational friction of the\nplatform we just built. Instead of hopping between managers and executing ",(0,i.jsx)(n.code,{children:"docker"})," commands, we can get real-time visibility of services, tasks,\nnodes, networks, volumes, logs, container consoles, and placement/health details when something misbehaves. It integrates with Swarm natively,\nso we can deploy and update stacks directly from the UI or from Git, inspect configs and secrets without copying them around, roll back a service\nif an update breaks, and confirm constraints and overlay network changes."]}),(0,i.jsx)(n.p,{children:"In the architecture of this blueprint specifically (where ELB is terminating TLS, Traefik on the managers, and an external overlay for ingress)\nPortainer sits behind the same Traefik reverse proxy."})]}),"\n",(0,i.jsx)(n.h3,{id:"deploying-dokploy",children:"Deploying Dokploy"}),"\n",(0,i.jsx)(n.h4,{id:"preparing-the-database",children:"Preparing the Database"}),"\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.em,{children:"Open Telekom Cloud Console"})," -> ",(0,i.jsx)(n.em,{children:"Relational Database Service"}),". Choose your database, go to ",(0,i.jsx)(n.em,{children:"Plugins"}),",\nsearch the catalog for the ",(0,i.jsx)(n.strong,{children:"pgcrypto"})," plugin, and install it:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(55937).A+"",width:"1917",height:"795"})}),"\n",(0,i.jsx)(n.p,{children:"Connect to the bastion host using SSH and install the following tools:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install -y postgresql-client netcat redis-tools\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Next we need to initialize our environment variables and create a ",(0,i.jsx)(n.code,{children:".pgpass"})," file to simplify future access to the database:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'cat > .env <<\'EOF\'\nRDS_HOST="REPLACE_WITH_VALUE"\nRDS_PORT="5432"\nRDS_USER="root"\nRDS_PASSWORD="REPLACE_WITH_VALUE"\n\nREDIS_HOST=REPLACE_WITH_VALUE\nREDIS_PORT=6379\n\nTRAEFIK_HOST=console.dokploy.example.com\n\nPOSTGRES_HOST=REPLACE_WITH_VALUE\nPOSTGRES_PORT=5432\nPOSTGRES_DB=dokploy\nPOSTGRES_USER=dokploy\nEOF\n\nset -a && source .env && set +a\necho "${RDS_HOST}:${RDS_PORT}:*:${RDS_USER}:${RDS_PASSWORD}" > ~/.pgpass && chmod 600 ~/.pgpass\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"important",children:(0,i.jsxs)(n.p,{children:["Substitute all instances of ",(0,i.jsx)(n.code,{children:"REPLACE_WITH_VALUE"})," and ",(0,i.jsx)(n.code,{children:"TRAEFIK_HOST"})," with the actual values specific to your environment."]})}),"\n",(0,i.jsx)(n.p,{children:"Next we are going to create a script that will idempotently create the dokploy role and database,\nwhile also ensuring the public schema ownership is correctly assigned. It is designed so it can be re-run safely without causing errors:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="bootstrap_dokploy.sh"',children:'#!/usr/bin/env bash\nset -euo pipefail\n\n# --- required: RDS connection for the *admin* user (root) ---\n: "${RDS_HOST:?set RDS_HOST}"\n: "${RDS_PORT:=5432}"\n: "${RDS_USER:=root}"\n\n# If your root password is in ~/.pgpass, you don\'t need RDS_PASSWORD here.\n\n# --- dokploy app db/user ---\n: "${POSTGRES_DB:=dokploy}"\n: "${POSTGRES_USER:=dokploy}"\n# If not provided, autogenerate\nDOKPLOY_PASSWORD="${POSTGRES_PASSWORD:-${DOKPLOY_PASSWORD:-}}"\nif [[ -z "${DOKPLOY_PASSWORD}" ]]; then\n  DOKPLOY_PASSWORD="$(openssl rand -base64 32 | tr -dc \'A-Za-z0-9\' | head -c 32)"\nfi\n\n# --- update or create .env (idempotent line replace/add) ---\nENV_FILE="${ENV_FILE:-.env}"\ntouch "$ENV_FILE"\nchmod 600 "$ENV_FILE" || true\nupsert_env () {\n  local key="$1" val="$2"\n  if grep -qE "^[# ]*${key}=" "$ENV_FILE"; then\n    # replace existing\n    sed -i "s|^[# ]*${key}=.*|${key}=${val}|" "$ENV_FILE"\n  else\n    echo "${key}=${val}" >> "$ENV_FILE"\n  fi\n}\n\nupsert_env POSTGRES_HOST "${RDS_HOST}"\nupsert_env POSTGRES_PORT "${RDS_PORT}"\nupsert_env POSTGRES_DB   "${POSTGRES_DB}"\nupsert_env POSTGRES_USER "${POSTGRES_USER}"\nupsert_env POSTGRES_PASSWORD "${DOKPLOY_PASSWORD}"\n\necho "Wrote/updated DB values in ${ENV_FILE}"\n\n# --- run SQL (role, db, grants). Creates password only once; keeps it on re-runs. ---\nPGPASSFILE="${PGPASSFILE:-$HOME/.pgpass}" \\\npsql -h "$RDS_HOST" -p "$RDS_PORT" -U "$RDS_USER" -d postgres --set=ON_ERROR_STOP=1 <<SQL\nDO \\$\\$\nDECLARE\n  role_exists boolean;\n  pwd text := \\$pw\\$${DOKPLOY_PASSWORD}\\$pw\\$;\nBEGIN\n  SELECT EXISTS (SELECT 1 FROM pg_roles WHERE rolname = \'${POSTGRES_USER}\') INTO role_exists;\n\n  IF NOT role_exists THEN\n    PERFORM 1 FROM pg_extension WHERE extname = \'pgcrypto\';\n    IF NOT FOUND THEN\n      CREATE EXTENSION IF NOT EXISTS pgcrypto;\n    END IF;\n\n    EXECUTE format(\'CREATE ROLE ${POSTGRES_USER} LOGIN PASSWORD %L\', pwd);\n    RAISE NOTICE \'DOKPLOY_PASSWORD=%\', pwd;\n  ELSE\n    ALTER ROLE ${POSTGRES_USER} LOGIN;\n  END IF;\nEND\n\\$\\$ LANGUAGE plpgsql;\n\n-- Create DB if missing\nSELECT \'CREATE DATABASE ${POSTGRES_DB} OWNER ${POSTGRES_USER}\'\nWHERE NOT EXISTS (SELECT 1 FROM pg_database WHERE datname = \'${POSTGRES_DB}\');\n\\\\gexec\n\n-- Ensure ownership if DB existed\nSELECT \'ALTER DATABASE ${POSTGRES_DB} OWNER TO ${POSTGRES_USER}\'\nWHERE EXISTS (SELECT 1 FROM pg_database WHERE datname = \'${POSTGRES_DB}\');\n\\\\gexec\n\n\\\\connect ${POSTGRES_DB}\n\n-- We **don\'t** try to re-own public on RDS (often blocked). Give full rights instead.\nGRANT USAGE, CREATE ON SCHEMA public TO ${POSTGRES_USER};\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON TABLES    TO ${POSTGRES_USER};\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON SEQUENCES TO ${POSTGRES_USER};\nALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON FUNCTIONS TO ${POSTGRES_USER};\nSQL\n\necho "Bootstrap complete. Password saved to ${ENV_FILE} (POSTGRES_PASSWORD)."\n'})}),"\n",(0,i.jsxs)(n.p,{children:["and execute the script on the bastion (or whereever you chose to install ",(0,i.jsx)(n.strong,{children:"postgresql-client"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"set -a && source .env && set +a\n\n./bootstrap_dokploy.sh\n"})}),"\n",(0,i.jsx)(n.h4,{id:"deploying-dokploy-as-a-stack",children:"Deploying Dokploy as a Stack"}),"\n",(0,i.jsxs)(n.p,{children:["Create a file named ",(0,i.jsx)(n.code,{children:"dokploy-stack.yml"})," in the ",(0,i.jsx)(n.code,{children:"/mnt/sfs_turbo"})," directory:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",metastring:'title="dokploy-stack.yml"',children:'version: "3.8"\n\nnetworks:\n  dokploy-network:\n    external: true\n\nservices:\n  dokploy:\n    image: dokploy/dokploy:latest\n    environment:\n      DATABASE_URL: postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?sslmode=require&options=-c%20search_path%3Dpublic\n      REDIS_HOST: ${REDIS_HOST}\n      ADVERTISE_ADDR: "0.0.0.0"\n      TRAEFIK_HOST: ${TRAEFIK_HOST}\n\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /mnt/sfs_turbo/dokploy:/etc/dokploy\n    networks:\n      - dokploy-network\n    deploy:\n      replicas: 1   # start with one replica to let migrations run\n      placement:\n        constraints:\n          - node.role == manager\n      update_config:\n        order: stop-first\n        parallelism: 1\n      labels:\n        traefik.enable: "true"\n        traefik.http.routers.dokploy.rule: Host(`${TRAEFIK_HOST}`)\n        traefik.http.routers.dokploy.entrypoints: web\n        traefik.http.services.dokploy.loadbalancer.server.port: "3000"\n        traefik.http.services.dokploy.loadbalancer.server.scheme: "http"\n        traefik.http.services.dokploy.loadbalancer.passHostHeader: "true"\n'})}),"\n",(0,i.jsx)(n.p,{children:"and execute the following on one of the manager nodes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd /mnt/sfs_turbo && mkdir dokploy\n\nset -a && source .env && set +a\ndocker stack deploy -c dokploy-stack.yml dokploy\n"})}),"\n",(0,i.jsxs)(n.admonition,{type:"important",children:[(0,i.jsxs)(n.p,{children:["We start with ",(0,i.jsx)(n.code,{children:"replicas: 1"})," to ensure database migrations run safely without conflicts.\nOnce the service is up and stable, scale up to ",(0,i.jsx)(n.code,{children:"3"})," replicas to take advantage of all manager nodes and provide high availability."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker service scale dokploy_dokploy=3\n"})})]}),"\n",(0,i.jsxs)(n.p,{children:["Next, open the console URL you set in ",(0,i.jsx)(n.code,{children:"TRAEFIK_HOST"})," (for example, ",(0,i.jsx)(n.code,{children:"console.dokploy.example.com"}),") and create the administrative\naccount for your Dokploy instance:"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"img",src:s(62060).A+"",width:"1906",height:"971"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},19365:(e,n,s)=>{s.d(n,{A:()=>o});s(96540);var r=s(34164);const i={tabItem:"tabItem_Ymn6"};var t=s(74848);function o({children:e,hidden:n,className:s}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,s),hidden:n,children:e})}},11470:(e,n,s)=>{s.d(n,{A:()=>w});var r=s(96540),i=s(34164),t=s(17559),o=s(23104),l=s(56347),a=s(205),d=s(57485),c=s(31682),h=s(89466);function p(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:s}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return p(e).map((({props:{value:e,label:n,attributes:s,default:r}})=>({value:e,label:n,attributes:s,default:r})))}(s);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function x({value:e,tabValues:n}){return n.some((n=>n.value===e))}function j({queryString:e=!1,groupId:n}){const s=(0,l.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(i),(0,r.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(s.location.search);n.set(i,e),s.replace({...s.location,search:n.toString()})}),[i,s])]}function m(e){const{defaultValue:n,queryString:s=!1,groupId:i}=e,t=u(e),[o,l]=(0,r.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:t}))),[d,c]=j({queryString:s,groupId:i}),[p,m]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,i]=(0,h.Dv)(n);return[s,(0,r.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:i}),g=(()=>{const e=d??p;return x({value:e,tabValues:t})?e:null})();(0,a.A)((()=>{g&&l(g)}),[g]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!x({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),m(e)}),[c,m,t]),tabValues:t}}var g=s(92303);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=s(74848);function k({className:e,block:n,selectedValue:s,selectValue:r,tabValues:t}){const l=[],{blockElementScrollPositionUntilNextRender:a}=(0,o.a_)(),d=e=>{const n=e.currentTarget,i=l.indexOf(n),o=t[i].value;o!==s&&(a(n),r(o))},c=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const s=l.indexOf(e.currentTarget)+1;n=l[s]??l[0];break}case"ArrowLeft":{const s=l.indexOf(e.currentTarget)-1;n=l[s]??l[l.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:t.map((({value:e,label:n,attributes:r})=>(0,f.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{l.push(e)},onKeyDown:c,onClick:d,...r,className:(0,i.A)("tabs__item",y.tabItem,r?.className,{"tabs__item--active":s===e}),children:n??e},e)))})}function b({lazy:e,children:n,selectedValue:s}){const t=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=t.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:t.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function S(e){const n=m(e);return(0,f.jsxs)("div",{className:(0,i.A)(t.G.tabs.container,"tabs-container",y.tabList),children:[(0,f.jsx)(k,{...n,...e}),(0,f.jsx)(b,{...n,...e})]})}function w(e){const n=(0,g.A)();return(0,f.jsx)(S,{...e,children:p(e.children)},String(n))}},15507:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_06-29-02-5958cbf33d74035da33d84b01499b04a.png"},9223:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_07-22-46-88b1785f1ebb5a7f8a31fd74dbc0a2a2.png"},22426:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_07-27-00-fe9fdb894cd5cd26a70166f1709d6966.png"},49845:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_07-29-52-dc34c00c1e750442911b7fedf2a77b70.png"},74925:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_07-31-08-64cb58925eda2a620c74ca4c22594cc0.png"},58332:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_08-11-44-879227c77e8fb04fa33b9bf08bb0485e.png"},42976:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_13-27-45-16c3f4f7c74b3a7afb988b2466f65fa9.png"},34534:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_13-35-10-13c54935d927e57d00b0dd948719d3e2.png"},9712:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_16-27-44-5f44e144f077e6a97b00c1937361b30d.png"},63732:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_16-36-11-a68b46e7afeaf5d3023ad275966b8deb.png"},55679:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-23_16-55-06-d5a5c88ef21850083eec16badcfaefbf.png"},55937:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-24_07-23-15-61f6bde45a01ab574ad18837985a17e8.png"},62060:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/Screenshot_from_2025-09-24_12-49-52-f1d51da72f2ae1a9bbaa6a47757f1d30.png"},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var r=s(96540);const i={},t=r.createContext(i);function o(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);