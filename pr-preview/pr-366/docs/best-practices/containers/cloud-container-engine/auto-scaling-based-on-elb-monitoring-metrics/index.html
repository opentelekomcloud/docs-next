<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/auto-scaling-based-on-elb-monitoring-metrics" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Auto Scaling Based on ELB Monitoring Metrics | Architecture Center</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-366/img/open-telekom-cloud-social-card.png"><meta data-rh="true" name="twitter:image" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-366/img/open-telekom-cloud-social-card.png"><meta data-rh="true" property="og:url" content="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Auto Scaling Based on ELB Monitoring Metrics | Architecture Center"><meta data-rh="true" name="description" content="By default, Kubernetes scales a workload based on resource usage metrics such as CPU and memory. However, this mechanism cannot reflect the real-time resource usage when traffic bursts arrive, because the collected CPU and memory usage data lags behind the actual load balancer traffic metrics. For some services (such as flash sale and social media) that require fast auto scaling, scaling based on this rule may not be performed in a timely manner and cannot meet these services&#x27; actual needs. In this case, auto scaling based on ELB QPS data can respond to service requirements more timely."><meta data-rh="true" property="og:description" content="By default, Kubernetes scales a workload based on resource usage metrics such as CPU and memory. However, this mechanism cannot reflect the real-time resource usage when traffic bursts arrive, because the collected CPU and memory usage data lags behind the actual load balancer traffic metrics. For some services (such as flash sale and social media) that require fast auto scaling, scaling based on this rule may not be performed in a timely manner and cannot meet these services&#x27; actual needs. In this case, auto scaling based on ELB QPS data can respond to service requirements more timely."><link data-rh="true" rel="icon" href="/docs-next/pr-preview/pr-366/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/"><link data-rh="true" rel="alternate" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/" hreflang="en"><link data-rh="true" rel="alternate" href="https://opentelekomcloud.github.io/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/" hreflang="x-default"><link rel="preconnect" href="https://analytics.example.de">
<script async defer="defer" src="https://analytics.example.de/script.js" data-website-id="00000" data-host-url="https://analytics.example.de" data-auto-track="true" data-do-not-track="true" data-cache="true" data-domains="opentelekomcloud.github.io" data-exclude-search="false" data-exclude-hash="false"></script><link rel="stylesheet" href="/docs-next/pr-preview/pr-366/assets/css/styles.1f09e52b.css">
<script src="/docs-next/pr-preview/pr-366/assets/js/runtime~main.65c26bd9.js" defer="defer"></script>
<script src="/docs-next/pr-preview/pr-366/assets/js/main.d2173dd1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs-next/pr-preview/pr-366/"><div class="navbar__logo"><img src="/docs-next/pr-preview/pr-366/img/logo_headline_kombination_m_s_m.png" alt="Open Telekom Cloud Non-Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs-next/pr-preview/pr-366/img/logo_headline_kombination_m_w_m.png" alt="Open Telekom Cloud Non-Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs-next/pr-preview/pr-366/docs/best-practices/">Best Practices</a><a class="navbar__item navbar__link" href="/docs-next/pr-preview/pr-366/docs/blueprints/">Blueprints</a><a class="navbar__item navbar__link" href="/docs-next/pr-preview/pr-366/templates">Templates</a></div><div class="navbar__items navbar__items--right"><a href="https://auth.otc.t-systems.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--terminal-link" aria-label="Open Telekom Cloud Console"></a><a href="https://status.otc-service.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--sd-link" aria-label="GitHub"></a><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="light mode" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_dCNk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs-next/pr-preview/pr-366/docs/best-practices/"><span title="Best Practices" class="linkLabel_WmDU">Best Practices</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-next/pr-preview/pr-366/docs/best-practices/application-services/application-operations-management"><span title="Application Services" class="categoryLinkLabel_W154">Application Services</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-next/pr-preview/pr-366/docs/best-practices/big-data-and-data-analysis/cloud-search-service"><span title="Big Data &amp; Data Analysis" class="categoryLinkLabel_W154">Big Data &amp; Data Analysis</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-next/pr-preview/pr-366/docs/best-practices/computing/auto-scaling"><span title="Computing" class="categoryLinkLabel_W154">Computing</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/application-service-mesh"><span title="Containers" class="categoryLinkLabel_W154">Containers</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/application-service-mesh"><span title="Application Service Mesh" class="categoryLinkLabel_W154">Application Service Mesh</span></a><button aria-label="Expand sidebar category &#x27;Application Service Mesh&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine"><span title="Cloud Container Engine" class="categoryLinkLabel_W154">Cloud Container Engine</span></a><button aria-label="Collapse sidebar category &#x27;Cloud Container Engine&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/enabling-external-traffic-with-ingress-and-tls"><span title="Enabling External Traffic with Ingress &amp; TLS" class="linkLabel_WmDU">Enabling External Traffic with Ingress &amp; TLS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/automate-dns-records-creation-from-cce-ingresses-with-externaldns"><span title="Automate DNS Records Creation from CCE Ingresses with ExternalDNS" class="linkLabel_WmDU">Automate DNS Records Creation from CCE Ingresses with ExternalDNS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/issue-an-acme-certificate-with-dns01-solver-in-cce"><span title="Issue an ACME Certificate with DNS01 Solver in CCE" class="linkLabel_WmDU">Issue an ACME Certificate with DNS01 Solver in CCE</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/"><span title="Auto Scaling Based on ELB Monitoring Metrics" class="categoryLinkLabel_W154">Auto Scaling Based on ELB Monitoring Metrics</span></a><button aria-label="Collapse sidebar category &#x27;Auto Scaling Based on ELB Monitoring Metrics&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/auto-scaling-based-on-elb-monitoring-metrics-with-keda"><span title="Auto Scaling Based on ELB Monitoring Metrics with KEDA" class="linkLabel_WmDU">Auto Scaling Based on ELB Monitoring Metrics with KEDA</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/auto-scaling-based-on-elb-monitoring-metrics-with-prometheus-adapter"><span title="Auto Scaling Based on ELB Monitoring Metrics with Prometheus Adapter" class="linkLabel_WmDU">Auto Scaling Based on ELB Monitoring Metrics with Prometheus Adapter</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/migrating-from-other_clouds-to-cce"><span title="Migrating Clusters from Other Clouds to CCE" class="categoryLinkLabel_W154">Migrating Clusters from Other Clouds to CCE</span></a><button aria-label="Expand sidebar category &#x27;Migrating Clusters from Other Clouds to CCE&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a href="https://docs.otc.t-systems.com/cloud-container-engine/index.html" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0"><span title="ðŸ“š Go to Help Center" class="linkLabel_WmDU">ðŸ“š Go to Help Center</span><svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-instance"><span title="Cloud Container Instance" class="categoryLinkLabel_W154">Cloud Container Instance</span></a><button aria-label="Expand sidebar category &#x27;Cloud Container Instance&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/software-repository"><span title="Software Repository for Container" class="categoryLinkLabel_W154">Software Repository for Container</span></a><button aria-label="Expand sidebar category &#x27;Software Repository for Container&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-next/pr-preview/pr-366/docs/best-practices/databases/distributed-cache-service"><span title="Databases" class="categoryLinkLabel_W154">Databases</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-next/pr-preview/pr-366/docs/best-practices/management-and-deployment/cloud-create/"><span title="Management &amp; Deployment" class="categoryLinkLabel_W154">Management &amp; Deployment</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-next/pr-preview/pr-366/docs/best-practices/networking/direct-connect"><span title="Networking" class="categoryLinkLabel_W154">Networking</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-next/pr-preview/pr-366/docs/best-practices/security-services/anti-ddos"><span title="Security Services" class="categoryLinkLabel_W154">Security Services</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-next/pr-preview/pr-366/docs/best-practices/storage/cloud-backup-recovery"><span title="Storage" class="categoryLinkLabel_W154">Storage</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs-next/pr-preview/pr-366/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Containers</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine"><span itemprop="name">Cloud Container Engine</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Auto Scaling Based on ELB Monitoring Metrics</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Auto Scaling Based on ELB Monitoring Metrics</h1></header>
<p>By default, Kubernetes scales a workload based on resource usage metrics such as CPU and memory. However, this mechanism cannot reflect the real-time resource usage when traffic bursts arrive, because the collected CPU and memory usage data lags behind the actual load balancer traffic metrics. For some services (such as flash sale and social media) that require fast auto scaling, scaling based on this rule may not be performed in a timely manner and cannot meet these services&#x27; actual needs. In this case, auto scaling based on ELB QPS data can respond to service requirements more timely.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="solution-design">Solution Design<a href="#solution-design" class="hash-link" aria-label="Direct link to Solution Design" title="Direct link to Solution Design" translate="no">â€‹</a></h2>
<p>This guide covers the environment setup required for implementing auto scaling based on ELB monitoring metrics. This setup is a prerequisite for both <a href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/auto-scaling-based-on-elb-monitoring-metrics-with-keda">KEDA</a> and <a href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/auto-scaling-based-on-elb-monitoring-metrics-with-prometheus-adapter">Prometheus Adapter</a> scaling solutions.The core of this solution is to collect ELB metric data and expose it to Prometheus for monitoring and scaling decisions. This is achieved by implementing a Prometheus exporter that retrieves the ELB metrics, transforms them into Prometheus-compatible format, and then publishes them so they can be scraped and stored by Prometheus.</p>
<p><img decoding="async" loading="lazy" alt="Figure 1 ELB traffic flows and monitoring
data" src="/docs-next/pr-preview/pr-366/assets/images/overal-dd43f758b43bc13d48f4fa834a07db7d.png" width="1326" height="789" class="img_ev3q"></p>
<p>In this guide, weâ€™ll use <a href="https://github.com/opentelekomcloud-blueprints/cloudeye-exporter" target="_blank" rel="noopener noreferrer">cloudeye-exporter</a>, a custom Prometheus exporter designed to collect metrics from Open Telekom Cloudâ€™s Cloud Eye service. The exporter retrieves monitoring data, converts it into Prometheus-compatible format, and exposes it through an endpoint that Prometheus can scrape at regular intervals.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Additional metrics can be gathered in the same manner by extending the exporterâ€™s configuration to include other service metrics. By adjusting the metric definitions and endpoints, the same workflow (data retrieval, conversion to Prometheus format, and periodic scraping) can be applied to monitor different resources such as ECS instances, EVS volumes, RDS databases, or networking components. This approach provides a consistent and scalable method for integrating a wide range of Open Telekom Cloud metrics into Prometheus.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">â€‹</a></h2>
<ol>
<li>You should have a basic understanding of Prometheus and know how to develop a Prometheus exporter.</li>
<li>Ensure that the <a href="https://docs.otc.t-systems.com/cloud-container-engine/umn/add-ons/cloud_native_observability_add-ons/cloud_native_cluster_monitoring.html" target="_blank" rel="noopener noreferrer">Cloud Native Cluster Monitoring</a> add-on is installed in your cluster, which must be running Kubernetes version 1.17 or later.</li>
<li>Configure the Cloud Native Cluster Monitoring add-on to operate in <code>server mode</code>.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-exporter-image">Building the Exporter Image<a href="#building-the-exporter-image" class="hash-link" aria-label="Direct link to Building the Exporter Image" title="Direct link to Building the Exporter Image" translate="no">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-buildpacks">Installing Buildpacks<a href="#installing-buildpacks" class="hash-link" aria-label="Direct link to Installing Buildpacks" title="Direct link to Installing Buildpacks" translate="no">â€‹</a></h3>
<p>In this tutorial, the container image is built using <a href="https://buildpacks.io/" target="_blank" rel="noopener noreferrer">Buildpacks</a>, a framework that automates the creation of production-ready container images without the need for a Dockerfile. Buildpacks detect the applicationâ€™s language and dependencies, compile the necessary runtime environment, and package everything into an optimized image. This approach simplifies image creation, ensures consistent builds across environments, and aligns with best practices for secure and maintainable containerized applications.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">git</span><span class="token plain"> clone https://github.com/opentelekomcloud-blueprints/cloudeye-exporter</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-sSL</span><span class="token plain"> </span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;https://github.com/buildpacks/pack/releases/download/v0.32.1/pack-v0.32.1-linux.tgz&quot;</span><span class="token plain"> </span><span class="token operator" style="color:hsl(207, 82%, 66%)">|</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">sudo</span><span class="token plain"> </span><span class="token function" style="color:hsl(207, 82%, 66%)">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-C</span><span class="token plain"> /usr/local/bin/ --no-same-owner </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-xzv</span><span class="token plain"> pack</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This method produces an OCI-compliant image, ensuring compatibility with nearly all container runtimes that support the Open Container Initiative standard. Alternatively, the same image can be built using a traditional Dockerfile and the <code>docker build</code> command if preferred.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-image">Building the image<a href="#building-the-image" class="hash-link" aria-label="Direct link to Building the image" title="Direct link to Building the image" translate="no">â€‹</a></h3>
<p>The image name is <code>cloudeye-exporter</code> and the image version is <code>1.0</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">cd</span><span class="token plain"> cloudeye-exporter</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">pack build cloudeye-exporter:v1 </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--builder</span><span class="token plain"> gcr.io/buildpacks/builder:v1</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pushing-the-image-to-swr">Pushing the image to SWR<a href="#pushing-the-image-to-swr" class="hash-link" aria-label="Direct link to Pushing the image to SWR" title="Direct link to Pushing the image to SWR" translate="no">â€‹</a></h3>
<ol>
<li>
<p>(Optional) Log in to the <em>SWR console</em>, choose <em>Organizations</em>
in the navigation pane, and click <em>Create Organization</em> in the
upper right corner of the page.</p>
</li>
<li>
<p>In the navigation pane, choose <em>My Images</em> and then click
<em>Upload Through Client</em>. On the page displayed, click
<em>Generate a temporary login command</em> and click
<img decoding="async" loading="lazy" alt="image1" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACqSURBVDhPY/jy9dt/auJRA6H447v/L16+wovffMSiD4ixGvhgZ9f/8vJyvLhr5yMMfSCM1cAPDy/9P3nyFHa8d97/JkIGPjk47X9TUxMReNX/Cw93/e8iZCDMi1VYDYHiKpBX5/0/Q7yBXf93PsRUAMMQNaMGYlFHuoFPD/2fBoykaQefYVVHuoFY5JAxLQ0kMh2iGYCOwQaSlFPQDEDHYAOpiQe7gd/+AwBIw9kI+PIQ4wAAAABJRU5ErkJggg==" width="20" height="21" class="img_ev3q"> to
copy the command.</p>
</li>
<li>
<p>Run the login command copied in the previous step on the cluster
node. If the login is successful, the message &quot;Login
Succeeded&quot; is displayed.</p>
</li>
<li>
<p>Tag the <code>cloudeye-exporter</code> image.</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> tag </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">IMG1:TAG1</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">/</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">IMG_RERO_ADDR</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">/</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">ORG_NAME</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">/</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">IMG2:TAG2</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre></div></div>
<ul>
<li><code>{IMG1:TAG1}</code>: name and tag of the local image to be uploaded.</li>
<li><code>{IMG_RERO_ADDR}</code>: The domain name at the end of the login command in is the image repository address, which can be obtained on the SWR console.</li>
<li><code>{ORG_NAME}</code>: name of the organization created in.</li>
<li><code>{IMG2:TAG2}</code>: desired image name and tag to be displayed on the SWR console.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Example</div><div class="admonitionContent_BuS1"><p><code>docker tag cloudeye-exporter:1.0 swr.eu-de.otc.t-systems.com/cloud-develop/cloudeye-exporter:1.0</code></p></div></div>
<ol start="5">
<li>Pushing the image to the image repository.</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token function" style="color:hsl(207, 82%, 66%)">docker</span><span class="token plain"> push </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">IMG_RERO_ADDR</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">/</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">ORG_NAME</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><span class="token plain">/</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">{</span><span class="token plain">IMG2:TAG2</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Example</div><div class="admonitionContent_BuS1"><p><code>docker push swr.eu-de.otc.t-systems.com/cloud-develop/cloudeye-exporter:1.0</code></p></div></div>
<p>The following information will be returned upon a successful push:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">The push refers to repository </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">[</span><span class="token plain">swr.eu-de.otc.t-systems.com/cloud-develop/cloudeye-exporter</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">030***: Pushed</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">v1.0: digest: sha256:eb7e3bbd*** size: **</span><br></span></code></pre></div></div>
<p>To view the pushed image, go to the SWR console and refresh the <em>My Images</em> page.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-prometheusgrafana-stack--cloudeye-exporter-artifacts">Installing Prometheus/Grafana Stack &amp; cloudeye-exporter artifacts<a href="#installing-prometheusgrafana-stack--cloudeye-exporter-artifacts" class="hash-link" aria-label="Direct link to Installing Prometheus/Grafana Stack &amp; cloudeye-exporter artifacts" title="Direct link to Installing Prometheus/Grafana Stack &amp; cloudeye-exporter artifacts" translate="no">â€‹</a></h2>
<p>Deploy the Prometheus and Grafana stack using the <strong>kube-prometheus-stack</strong> Helm chart. The configuration values will be automatically generated at <code>deploy/manifests/prometheus-stack/override.yaml</code>. You can compare this file with the default <code>default.yaml</code> to review the applied customizations.</p>
<p>Execute <code>./install-stack.sh</code> to begin the deployment. This script not only installs the kube-prometheus-stack but also sets up all required artifacts for the <strong>cloudeye-exporter</strong> integration.</p>
<p>Run <code>./install-stack.sh</code>. This script will deploy, besides the
<strong>kube-prometheus-stack</strong>, all the <strong>cloudeye-exporter</strong> related artifacts.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-the-exporter">Deploying the Exporter<a href="#deploying-the-exporter" class="hash-link" aria-label="Direct link to Deploying the Exporter" title="Direct link to Deploying the Exporter" translate="no">â€‹</a></h2>
<p>Prometheus can dynamically monitor pods if you add Prometheus
annotations to the pods (the default path is <code>/metrics</code>). Common annotations in Prometheus are as follows:</p>
<ul>
<li><code>prometheus.io/scrape</code>: If the value is <code>true</code>, the pod will bemonitored.</li>
<li><code>prometheus.io/path</code>: URL from which the data is collected. The default value is <code>/metrics</code>.</li>
<li><code>prometheus.io/port</code>: port number of the endpoint to collect data from.</li>
<li><code>prometheus.io/scheme</code>: Defaults to <code>http</code>. If HTTPS is configured for security purposes, change the value to <code>https</code>.</li>
</ul>
<ol>
<li>
<p>Use kubectl to connect to the cluster.</p>
</li>
<li>
<p>Create a secret, which will be used by <strong>cloudeye-exporter</strong> for
authentication.</p>
<p>a.  Create a copy of clouds.tpl template, name it <strong>clouds.yml</strong>
file with the following content:</p>
<ul>
<li><code>auth_url</code>: indicates the IAM endpoint, which can be obtained from <a href="https://docs.otc.t-systems.com/en-us/endpoint/index.html" target="_blank" rel="noopener noreferrer">Regions and Endpoints</a>.</li>
<li><code>project_name</code>: indicates the project name. On the <em>My Credential</em> page, view the project name and project ID in the <em>Projects</em> area.</li>
<li><code>access_key</code> and <code>secret_key</code>: You can obtain them from <em>Access Keys</em>.</li>
<li><code>region</code>: indicates the region name, which must correspond to the project in <code>project_name</code>.</li>
</ul>
<p>b.  Then encode it to base64 with the following command:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">base64 </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-i</span><span class="token plain"> clouds.yaml </span><br></span></code></pre></div></div>
<p>c.  Create the <strong>cloudeye-exporter-clouds-secret.yaml</strong> file with
the following content:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockTitle_OeMC">cloudeye-exporter-clouds-secret.yaml</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token key atrule" style="color:hsl(29, 54%, 61%)">apiVersion</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">kind</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Secret</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">metadata</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">name</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> cloudeye</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">exporter</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">-</span><span class="token plain">clouds</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">namespace</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">type</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Opaque</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">data</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">  </span><span class="token key atrule" style="color:hsl(29, 54%, 61%)">clouds.yaml</span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">:</span><span class="token plain"> Z2xvYmFsOg</span><span class="token important" style="color:hsl(220, 14%, 71%);font-weight:bold">************************************************************</span><br></span></code></pre></div></div>
<p>d.  Create secret and deploy the exporter.</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-f</span><span class="token plain"> cloudeye-exporter-clouds-secret.yaml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-f</span><span class="token plain"> cloudeye-exporter-clouds-secret.yaml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-f</span><span class="token plain"> cloudeye-exporter-clouds-secret.yaml</span><br></span></code></pre></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-elb-and-elb-listener-ids">Getting ELB and ELB Listener IDs<a href="#getting-elb-and-elb-listener-ids" class="hash-link" aria-label="Direct link to Getting ELB and ELB Listener IDs" title="Direct link to Getting ELB and ELB Listener IDs" translate="no">â€‹</a></h2>
<p>In this example, the ELB metrics associated with the workload need to be
monitored. Therefore, the target workload must use the Service or
Ingress of the <code>LoadBalancer</code> type.</p>
<ol>
<li>
<p>View the access mode of the workload to be monitored and obtain the
ELB ID and ELB listener ID.</p>
<p>a.  On the CCE cluster console, choose <em>Networking</em>. On the
<em>Services</em> or <em>Ingresses</em> tab page, view the Service or
Ingress of the <code>LoadBalancer</code> type and click the load balancer
to access the load balancer page and copy the ELB ID.</p>
<p><img decoding="async" loading="lazy" alt="image2" src="/docs-next/pr-preview/pr-366/assets/images/en-us_image_0000001431432309-f6d88205377fb0bf73570be4219097ae.png" width="1182" height="231" class="img_ev3q"></p>
<p>b.  On the <em>Listeners</em> tab, view the listener corresponding to the
workload and copy the listener ID which corresponds to port <code>80</code>.</p>
<p><img decoding="async" loading="lazy" alt="image3" src="/docs-next/pr-preview/pr-366/assets/images/en-us_image_0000001380992506-4d5619a715514bf7525bb634554ee347.png" width="2464" height="640" class="img_ev3q"></p>
</li>
<li>
<p>Export the Elastic Load Balancer&#x27;s ID and listener ID as an env
variables</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">ELB_ID</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;66872*****&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token builtin class-name" style="color:hsl(29, 54%, 61%)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(207, 82%, 66%)">ELB_LISTENER_ID</span><span class="token operator" style="color:hsl(207, 82%, 66%)">=</span><span class="token string" style="color:hsl(95, 38%, 62%)">&quot;94424*****&quot;</span><br></span></code></pre></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-nginx-ingress-controller">Installing Nginx Ingress Controller<a href="#installing-nginx-ingress-controller" class="hash-link" aria-label="Direct link to Installing Nginx Ingress Controller" title="Direct link to Installing Nginx Ingress Controller" translate="no">â€‹</a></h2>
<p>Next, we are going to install the Nginx Ingress Controller using the
script <strong>./install-ingress.sh</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockTitle_OeMC">install-ingress.sh</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">envsubst </span><span class="token operator" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token plain"> nginx-ingress-controller/override.tpl  nginx-ingress-controller/override.yaml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token function" style="color:hsl(207, 82%, 66%)">sleep</span><span class="token plain"> </span><span class="token number" style="color:hsl(29, 54%, 61%)">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">helm upgrade </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--install</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-f</span><span class="token plain"> nginx-ingress-controller/override.yaml </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--install</span><span class="token plain"> ingress-nginx ingress-nginx </span><span class="token punctuation" style="color:hsl(220, 14%, 71%)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain"></span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--repo</span><span class="token plain"> https://kubernetes.github.io/ingress-nginx </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">--namespace</span><span class="token plain"> ingress-nginx --create-namespace</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-an-nginx-demo-workload">Installing an Nginx Demo Workload<a href="#installing-an-nginx-demo-workload" class="hash-link" aria-label="Direct link to Installing an Nginx Demo Workload" title="Direct link to Installing an Nginx Demo Workload" translate="no">â€‹</a></h2>
<p>We are going to need a workload to test <strong>HPA</strong> and the autoscaling via our
custom <strong>CloudEye</strong> derived metrics. For that matter we will deploy a dummy
nginx deployment and service using the script <strong>./install-workload.sh</strong>:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:hsl(220, 13%, 18%);--prism-color:hsl(220, 14%, 71%)"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="background-color:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl create namespace applications</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-f</span><span class="token plain"> deploy/manifests/nginx-deployment.yaml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:hsl(207, 82%, 66%)">-f</span><span class="token plain"> deploy/manifests/nginx-ingress.yaml</span><br></span><span class="token-line" style="color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3)"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix">Appendix<a href="#appendix" class="hash-link" aria-label="Direct link to Appendix" title="Direct link to Appendix" translate="no">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="elb-listener-metrics">ELB Listener Metrics<a href="#elb-listener-metrics" class="hash-link" aria-label="Direct link to ELB Listener Metrics" title="Direct link to ELB Listener Metrics" translate="no">â€‹</a></h3>
<p>The following table lists the Elastic Load Balancer Listener metrics that can be collected
using the method described in sections above.</p>
<table><thead><tr><th>Metric</th><th>Name</th><th>Unit</th><th>Description</th></tr></thead><tbody><tr><td><code>m1_cps</code></td><td>Concurrent Connections</td><td>Count</td><td>Number of concurrent connections processed by a load balance</td></tr><tr><td><code>m1e_server_rps</code></td><td>Reset Packets from Backend Servers</td><td>Count/Second</td><td>Number of reset packets sent from the backend server to clients. These reset packages are generated by the backend server and then forwarded by load balancers.</td></tr><tr><td><code>m1f_lvs_rps</code></td><td>Reset Packets from Load Balancers</td><td>Count/Second</td><td>Number of reset packets sent from load balancers.</td></tr><tr><td><code>m21_client_rps</code></td><td>Reset Packets from Clients</td><td>Count/Second</td><td>Number of reset packets sent from clients to the backend server. These reset packages are generated by the clients and then forwarded by load balancers.</td></tr><tr><td><code>m22_in_bandwidth</code></td><td>Inbound Bandwidth</td><td>bit/s</td><td>Inbound bandwidth of a load balancer.</td></tr><tr><td><code>m23_out_bandwidth</code></td><td>Outbound Bandwidth</td><td>bit/s</td><td>Outbound bandwidth of a load balancer.</td></tr><tr><td><code>m2_act_conn</code></td><td>Active Connections</td><td>Count</td><td>Number of current active connections.</td></tr><tr><td><code>m3_inact_conn</code></td><td>Inactive Connections</td><td>Count</td><td>Number of current inactive connections.</td></tr><tr><td><code>m4_ncps</code></td><td>New Connections</td><td>Count</td><td>Number of current new connections.</td></tr><tr><td><code>m5_in_pps</code></td><td>Incoming Packets</td><td>Count</td><td>Number of packets sent to a load balancer.</td></tr><tr><td><code>m6_out_pps</code></td><td>Outgoing Packets</td><td>Count</td><td>Number of packets sent from a load balancer.</td></tr><tr><td><code>m7_in_Bps</code></td><td>Inbound Rate</td><td>byte/s</td><td>Number of incoming bytes per second on a load balancer.</td></tr><tr><td><code>m8_out_Bps</code></td><td>Outbound Rate</td><td>byte/s</td><td>Number of outgoing bytes per second on a load balancer.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="developing-an-exporter">Developing an Exporter<a href="#developing-an-exporter" class="hash-link" aria-label="Direct link to Developing an Exporter" title="Direct link to Developing an Exporter" translate="no">â€‹</a></h3>
<p>Prometheus periodically calls the <code>/metrics</code> API of the exporter to obtain metric data. Applications only need to report monitoring data
through <code>/metrics</code>. You can select a Prometheus client in a desired language and integrate it into applications to implement the
<code>/metrics</code> API. For details about the client, see <a href="https://prometheus.io/docs/instrumenting/clientlibs/" target="_blank" rel="noopener noreferrer">Prometheus Client Libraries</a>. For
details about how to write the exporter, see <a href="https://prometheus.io/docs/instrumenting/writing_exporters/" target="_blank" rel="noopener noreferrer">Writing Exporters</a>.</p>
<p>The monitoring data must be in the format that Prometheus supports. Each
data record provides the ELB ID, listener ID, namespace where the
Service is located, Service name, and Service UID as labels, as shown in
the following figure.</p>
<p><img decoding="async" loading="lazy" alt="image5" src="/docs-next/pr-preview/pr-366/assets/images/en-us_image_0000001381152106-c0afc526298384aa11a22dfa95af734e.png" width="1452" height="227" class="img_ev3q"></p>
<p>To obtain the preceding data, perform the following steps:</p>
<ol>
<li>
<p>Obtain all Services.</p>
<p>The <code>annotations</code> field in the returned information contains the
ELB associated with the Service.</p>
<ul>
<li><code>kubernetes.io/elb.id</code></li>
<li><code>kubernetes.io/elb.class</code></li>
</ul>
</li>
<li>
<p>Use APIs in Querying Listeners to get the listener ID based on the
load balancer ID obtained in the previous step.</p>
</li>
<li>
<p>Obtain the ELB monitoring data.</p>
<p>The ELB monitoring data is obtained using the CES APIs described in
Querying Monitoring Data in Batches. For details about ELB
monitoring metrics, see Monitoring Metrics. Example:</p>
<ul>
<li><code>m1_cps</code>: number of concurrent connections</li>
<li><code>m5_in_pps</code>: number of incoming data packets</li>
<li><code>m6_out_pps</code>: number of outgoing data packets</li>
<li><code>m7_in_Bps</code>: incoming rate</li>
<li><code>m8_out_Bps</code>: outgoing rate</li>
</ul>
</li>
<li>
<p>Aggregate data in the format that Prometheus supports and expose the
data through the <code>/metrics</code> API.</p>
</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-366/docs/tags/cce">cce</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-366/docs/tags/elb">elb</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-366/docs/tags/prometheus">prometheus</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-366/docs/tags/prometheus-exporter">prometheus-exporter</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-366/docs/tags/cloudeye">cloudeye</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs-next/pr-preview/pr-366/docs/tags/swr">swr</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/opentelekomcloud/docs-next/tree/main/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/auto-scaling-based-on-elb-monitoring-metrics.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/issue-an-acme-certificate-with-dns01-solver-in-cce"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Issue an ACME Certificate with DNS01 Solver in CCE</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs-next/pr-preview/pr-366/docs/best-practices/containers/cloud-container-engine/auto-scaling-based-on-elb-monitoring-metrics/auto-scaling-based-on-elb-monitoring-metrics-with-keda"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Auto Scaling Based on ELB Monitoring Metrics with KEDA</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#solution-design" class="table-of-contents__link toc-highlight">Solution Design</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#building-the-exporter-image" class="table-of-contents__link toc-highlight">Building the Exporter Image</a><ul><li><a href="#installing-buildpacks" class="table-of-contents__link toc-highlight">Installing Buildpacks</a></li><li><a href="#building-the-image" class="table-of-contents__link toc-highlight">Building the image</a></li><li><a href="#pushing-the-image-to-swr" class="table-of-contents__link toc-highlight">Pushing the image to SWR</a></li></ul></li><li><a href="#installing-prometheusgrafana-stack--cloudeye-exporter-artifacts" class="table-of-contents__link toc-highlight">Installing Prometheus/Grafana Stack &amp; cloudeye-exporter artifacts</a></li><li><a href="#deploying-the-exporter" class="table-of-contents__link toc-highlight">Deploying the Exporter</a></li><li><a href="#getting-elb-and-elb-listener-ids" class="table-of-contents__link toc-highlight">Getting ELB and ELB Listener IDs</a></li><li><a href="#installing-nginx-ingress-controller" class="table-of-contents__link toc-highlight">Installing Nginx Ingress Controller</a></li><li><a href="#installing-an-nginx-demo-workload" class="table-of-contents__link toc-highlight">Installing an Nginx Demo Workload</a></li><li><a href="#appendix" class="table-of-contents__link toc-highlight">Appendix</a><ul><li><a href="#elb-listener-metrics" class="table-of-contents__link toc-highlight">ELB Listener Metrics</a></li><li><a href="#developing-an-exporter" class="table-of-contents__link toc-highlight">Developing an Exporter</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="align-items-center" style="margin:0 0 0 32px"><div class="col-10 text-right"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Help Center</a></li><li class="footer__item"><a class="footer__link-item" href="/docs-next/pr-preview/pr-366/portfolio">Portfolio Navigator</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/products-services/roadmap" target="_blank" rel="noopener noreferrer" class="footer__link-item">Portfolio Roadmap</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/support/release-notes" target="_blank" rel="noopener noreferrer" class="footer__link-item">Release Notes</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/products-services/core-services/certifications" target="_blank" rel="noopener noreferrer" class="footer__link-item">Core Services Certifications</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://marketplace.otc.t-systems.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Marketplace</a></li><li class="footer__item"><a href="https://community.open-telekom-cloud.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Portal</a></li><li class="footer__item"><a class="footer__link-item" href="/docs-next/pr-preview/pr-366/webinars">Webinars</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/sdk.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDKs</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/drivers.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Drivers &amp; Tools</a></li><li class="footer__item"><a href="https://registry.terraform.io/providers/opentelekomcloud/opentelekomcloud/latest/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terraform Provider<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/ansible-collection-cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ansible Collections</a></li><li class="footer__item"><a href="https://designer.otc-service.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud Create</a></li></ul></div><div class="col footer__col"><div class="footer__title">API</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/api.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">REST API</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/developer/api_guidelines/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">REST API Usage Guidelines</a></li><li class="footer__item"><a href="https://docs.otc.t-systems.com/regions-and-endpoints/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Regions &amp; Endpoints</a></li></ul></div><div class="col footer__col"><div class="footer__title">Tools</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://enterprise-dashboard.otc-service.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Enterprise Dashboard</a></li><li class="footer__item"><a href="https://www.open-telekom-cloud.com/en/prices/price-calculator" target="_blank" rel="noopener noreferrer" class="footer__link-item">Price Calculator</a></li><li class="footer__item"><a href="https://status.otc-service.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status Dashboard</a></li></ul></div></div></div></div></div><scale-telekom-footer type="minimal"><scale-telekom-footer-content><span slot="notice">Â© T-Systems International GmbH 2026<!-- --> <scale-tag size="small" style="margin:0 0 0 8px" color="orange" type="strong">0.1.PR366-280-eaf7093-ephemeral</scale-tag></span><ul slot="navigation"><li><a href="https://open-telekom-cloud.com/en/contact"> Contact </a></li><li><a href="https://open-telekom-cloud.com/en/data-protection"> Data privacy </a></li><li><a href="https://open-telekom-cloud.com/en/disclaimer-of-liability"> Disclaimer of liabilities </a></li><li><a href="https://open-telekom-cloud.com/en/imprint"> Imprint </a></li></ul></scale-telekom-footer-content></scale-telekom-footer></footer></div>
</body>
</html>