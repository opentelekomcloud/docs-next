"use strict";(self.webpackChunkdocs_next=self.webpackChunkdocs_next||[]).push([[27203],{64478:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"blueprints/by-use-case/devops/dokploy/deploy-applications-with-dokploy","title":"Deploy Applications with Dokploy","description":"The final part of this blueprint describes how to deploy highly available user workloads with Dokploy on Open Telekom Cloud, positioning it as an open-source alternative to platforms such as Vercel, Netlify, Azure App Services and AWS Elastic Beanstalk.","source":"@site/docs/blueprints/by-use-case/devops/dokploy/deploy-applications-with-dokploy.md","sourceDirName":"blueprints/by-use-case/devops/dokploy","slug":"/blueprints/by-use-case/devops/dokploy/deploy-applications-with-dokploy","permalink":"/docs-next/pr-preview/pr-367/docs/blueprints/by-use-case/devops/dokploy/deploy-applications-with-dokploy","draft":false,"unlisted":false,"editUrl":"https://github.com/opentelekomcloud/docs-next/tree/main/docs/blueprints/by-use-case/devops/dokploy/deploy-applications-with-dokploy.md","tags":[{"inline":true,"label":"devops","permalink":"/docs-next/pr-preview/pr-367/docs/tags/devops"},{"inline":true,"label":"ci","permalink":"/docs-next/pr-preview/pr-367/docs/tags/ci"},{"inline":true,"label":"cd","permalink":"/docs-next/pr-preview/pr-367/docs/tags/cd"},{"inline":true,"label":"cicd","permalink":"/docs-next/pr-preview/pr-367/docs/tags/cicd"},{"inline":true,"label":"dokploy","permalink":"/docs-next/pr-preview/pr-367/docs/tags/dokploy"},{"inline":true,"label":"paas","permalink":"/docs-next/pr-preview/pr-367/docs/tags/paas"},{"inline":true,"label":"ecs","permalink":"/docs-next/pr-preview/pr-367/docs/tags/ecs"},{"inline":true,"label":"docker","permalink":"/docs-next/pr-preview/pr-367/docs/tags/docker"},{"inline":true,"label":"swarm","permalink":"/docs-next/pr-preview/pr-367/docs/tags/swarm"},{"inline":true,"label":"gitops","permalink":"/docs-next/pr-preview/pr-367/docs/tags/gitops"}],"version":"current","sidebarPosition":3,"frontMatter":{"id":"deploy-applications-with-dokploy","title":"Deploy Applications with Dokploy","tags":["devops","ci","cd","cicd","dokploy","paas","ecs","docker","swarm","gitops"],"sidebar_position":3},"sidebar":"blueprintsSidebar","previous":{"title":"Configure Dokploy for Open Telekom Cloud","permalink":"/docs-next/pr-preview/pr-367/docs/blueprints/by-use-case/devops/dokploy/configure-dokploy-for-otc"},"next":{"title":"Host GitHub Runners on CCE","permalink":"/docs-next/pr-preview/pr-367/docs/blueprints/by-use-case/devops/host-github-runners-on-cce"}}');var t=s(74848),i=s(28453);const r={id:"deploy-applications-with-dokploy",title:"Deploy Applications with Dokploy",tags:["devops","ci","cd","cicd","dokploy","paas","ecs","docker","swarm","gitops"],sidebar_position:3},a="Deploy Applications with Dokploy",l={},c=[{value:"Deploying a Docker Stack",id:"deploying-a-docker-stack",level:2},{value:"Simple Application",id:"simple-application",level:3},{value:"Multi-Service Application",id:"multi-service-application",level:3},{value:"Deploying from a Dokploy Template",id:"deploying-from-a-dokploy-template",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"deploy-applications-with-dokploy",children:"Deploy Applications with Dokploy"})}),"\n",(0,t.jsx)(n.p,{children:"The final part of this blueprint describes how to deploy highly available user workloads with Dokploy on Open Telekom Cloud, positioning it as an open-source alternative to platforms such as Vercel, Netlify, Azure App Services and AWS Elastic Beanstalk."}),"\n",(0,t.jsxs)(n.p,{children:["Before we deploy any application with Dokploy we first need to create a Project. Go to ",(0,t.jsx)(n.em,{children:"Dokploy Console"})," -> ",(0,t.jsx)(n.em,{children:"Home"})," -> ",(0,t.jsx)(n.em,{children:"Projects"})," and click ",(0,t.jsx)(n.em,{children:"Create Project"}),", give it a name and click ",(0,t.jsx)(n.em,{children:"Create"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"deploying-a-docker-stack",children:"Deploying a Docker Stack"}),"\n",(0,t.jsx)(n.h3,{id:"simple-application",children:"Simple Application"}),"\n",(0,t.jsxs)(n.p,{children:["Open the created project and click ",(0,t.jsx)(n.em,{children:"Create Service"})," -> ",(0,t.jsx)(n.em,{children:"Docker Compose"}),". Fill in the ",(0,t.jsx)(n.strong,{children:"Name"}),", in this case ",(0,t.jsx)(n.code,{children:"whoami"})," as we are going to install the ",(0,t.jsx)(n.code,{children:"traefik/whoami"})," application, a Go server that prints OS information and HTTP request to output. Choose ",(0,t.jsx)(n.code,{children:"Stack"})," as ",(0,t.jsx)(n.strong,{children:"Compose Type"})," and click ",(0,t.jsx)(n.em,{children:"Create"}),":"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:s(65923).A+"",width:"1907",height:"853"})}),"\n",(0,t.jsxs)(n.p,{children:["Go to ",(0,t.jsx)(n.em,{children:"General"})," and disable ",(0,t.jsx)(n.em,{children:"Auto-deploy"}),", click ",(0,t.jsx)(n.em,{children:"Raw"}),", paste the following YAML in the text area and click ",(0,t.jsx)(n.em,{children:"Save"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'version: "3.8"\nservices:\n  whoami:\n    image: containous/whoami:v1.5.0\n    deploy:\n      replicas: 1\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Go to ",(0,t.jsx)(n.em,{children:"Domains"})," and click ",(0,t.jsx)(n.em,{children:"Add Domain"}),". Select the service, in this case there is only one, namely ",(0,t.jsx)(n.code,{children:"whoami"}),", from the ",(0,t.jsx)(n.strong,{children:"Service Name"})," drop-box and set ",(0,t.jsx)(n.strong,{children:"Container Port"})," to ",(0,t.jsx)(n.code,{children:"80"})," (that should always be the port that container is listening to and not a custom one that you would like to expose the service to)."]}),"\n",(0,t.jsx)(n.admonition,{type:"important",children:(0,t.jsxs)(n.p,{children:["Keep ",(0,t.jsx)(n.strong,{children:"HTTPS"})," disabled because TLS is terminated at the Elastic Load Balancer."]})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:s(17776).A+"",width:"1907",height:"853"})}),"\n",(0,t.jsxs)(n.p,{children:["Next, define the ",(0,t.jsx)(n.strong,{children:"Host"})," URL. You can choose between a testing address or one intended for production workloads. Clicking the ",(0,t.jsx)(n.em,{children:"dice button"})," on the right, generates a random URL from the traefik.me service and sets it as your ",(0,t.jsx)(n.strong,{children:"Host"}),". This is suitable for testing, as it does not support SSL certificates."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:s(11375).A+"",width:"1044",height:"318"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://traefik.me/",children:"Traefik.me"})," is a wildcard DNS service, similar to nip.io or xip.io, that resolves any IP address."]})}),"\n",(0,t.jsxs)(n.p,{children:["For production, you can use ",(0,t.jsx)(n.code,{children:"whoami.dokploy.example.com"}),", assuming that ",(0,t.jsx)(n.code,{children:"dokploy.example.com"})," was configured as the Web Server Domain Address in the earlier steps."]}),"\n",(0,t.jsxs)(n.p,{children:["Finally, click ",(0,t.jsx)(n.em,{children:"Create"}),", go back to ",(0,t.jsx)(n.em,{children:"General"}),", and select ",(0,t.jsx)(n.em,{children:"Deploy"}),". If the configuration is correct, your workload will be deployed on the worker nodes of the swarm and both endpoints should now be accessible:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:s(62311).A+"",width:"1916",height:"591"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Applications under your domain are secure because TLS is terminated at the ELB with a wildcard certificate that covers ",(0,t.jsx)(n.code,{children:"*.dokploy.example.com"}),". When a user visits any app like ",(0,t.jsx)(n.code,{children:"whoami.dokploy.example.com"}),", the certificate\u2019s SAN matches the hostname, the chain validates, and the browser marks the session as secure."]})}),"\n",(0,t.jsx)(n.h3,{id:"multi-service-application",children:"Multi-Service Application"}),"\n",(0,t.jsxs)(n.p,{children:["The previous example was simplified. Next, we will demonstrate how to deploy a Docker stack with multiple interdependent services that require more advanced configuration. Open the created project and click ",(0,t.jsx)(n.em,{children:"Create Service"})," -> ",(0,t.jsx)(n.em,{children:"Docker Compose"}),". Fill in the ",(0,t.jsx)(n.strong,{children:"Name"}),", in this case ",(0,t.jsx)(n.code,{children:"typesense"}),", choose ",(0,t.jsx)(n.code,{children:"Stack"})," as ",(0,t.jsx)(n.strong,{children:"Compose Type"})," and click ",(0,t.jsx)(n.em,{children:"Create"}),". In this example we are going to deploy the following services:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["A single-node ",(0,t.jsx)(n.a,{href:"https://typesense.org/",children:"Typesense"})," server."]}),"\n",(0,t.jsxs)(n.li,{children:["A ",(0,t.jsx)(n.a,{href:"https://github.com/bfritscher/typesense-dashboard",children:"Typesense Dashboard"})," to manage and browse collections."]}),"\n",(0,t.jsxs)(n.li,{children:["A ",(0,t.jsx)(n.a,{href:"https://github.com/typesense/typesense-docsearch-scraper",children:"Typesense DocSearch Scraper"}),", customized to index data in Typesense from an external ",(0,t.jsx)(n.a,{href:"https://docusaurus.io/",children:"Docusaurus"})," site."]}),"\n",(0,t.jsxs)(n.li,{children:["A ",(0,t.jsx)(n.a,{href:"https://github.com/mcuadros/ofelia",children:"Docker Job Scheduler"})," that will trigger the scraper every 5 minutes."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Go to ",(0,t.jsx)(n.em,{children:"General"})," and disable ",(0,t.jsx)(n.em,{children:"Auto-deploy"}),", click ",(0,t.jsx)(n.em,{children:"Raw"}),", paste the following YAML in the text area and click ",(0,t.jsx)(n.em,{children:"Save"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'version: \'3.8\'\n\nservices:\n  typesense:\n    image: typesense/typesense:30.0.rc10\n    networks:\n      - dokploy-network\n    volumes:\n      - typesense-data:/data\n    environment:\n      TYPESENSE_API_KEY: ${TYPESENSE_API_KEY}\n      TYPESENSE_DATA_DIR: /data\n      TYPESENSE_ENABLE_CORS: "true"\n\n  dashboard:\n    image: bfritscher/typesense-dashboard\n    networks:\n      - dokploy-network\n    environment:\n      VITE_AUTH_ENABLED: "false"\n\n  docsearch-scraper:\n    image: typesense/docsearch-scraper:0.12.0.rc13\n    networks:\n      - dokploy-network\n    deploy:\n      replicas: 1\n      placement:\n        constraints:\n          - node.role == worker\n    depends_on:\n      - typesense\n    environment:\n      CONFIG: |\n        {\n          "index_name": "${SCRAPER_COLLECTION_INDEX}",\n          "start_urls": [\n            "https://${SCRAPER_TARGET_HOST}/"\n          ],\n          "sitemap_urls": [\n            "https://${SCRAPER_TARGET_HOST}/sitemap.xml"\n          ],\n          "sitemap_alternate_links": true,\n          "stop_urls": [\n            "/tests"\n          ],\n          "selectors": {\n            "lvl0": {\n              "selector": "(//ul[contains(@class,\'menu__list\')]//a[contains(@class, \'menu__link menu__link--sublist menu__link--active\')]/text() | //nav[contains(@class, \'navbar\')]//a[contains(@class, \'navbar__link--active\')]/text())[last()]",\n              "type": "xpath",\n              "global": true,\n              "default_value": "Documentation"\n            },\n            "lvl1": "header h1",\n            "lvl2": "article h2",\n            "lvl3": "article h3",\n            "lvl4": "article h4",\n            "lvl5": "article h5, article td:first-child",\n            "lvl6": "article h6",\n            "text": "article p, article li, article td:last-child"\n          },\n          "strip_chars": " .,;:#",\n          "custom_settings": {\n            "separatorsToIndex": "_",\n            "attributesForFaceting": [\n              "language",\n              "version",\n              "type",\n              "docusaurus_tag"\n            ],\n            "attributesToRetrieve": [\n              "hierarchy",\n              "content",\n              "anchor",\n              "url",\n              "url_without_anchor"\n            ]\n          },\n          "conversation_id": [\n            "833762294"\n          ],\n          "nb_hits": 46250\n        }        \n      TYPESENSE_API_KEY: ${TYPESENSE_API_KEY}\n      TYPESENSE_HOST: typesense\n      TYPESENSE_PORT: 8108\n      TYPESENSE_PROTOCOL: http\n      SCRAPER_TARGET_HOST: ${SCRAPER_TARGET_HOST}\n      SCRAPER_COLLECTION_INDEX: ${SCRAPER_COLLECTION_INDEX}\n      REQUEST_FINGERPRINTER_IMPLEMENTATION: "2.7"\n    command: python3 /app/src/docsearch.py\n    restart: no\n\n  scheduler:\n    image: mcuadros/ofelia:latest\n    networks:\n      - dokploy-network\n    depends_on:\n      - docsearch-scraper\n    command: daemon --docker\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n    labels:\n      ofelia.job-run.docsearch-scraper.schedule: "@every 5m"\n      ofelia.job-run.docsearch-scraper.container: "docsearch-scraper"\n    restart: unless-stopped\n\nvolumes:\n  typesense-data:\n'})}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.p,{children:"Notice that we have introduced two new configuration properties in the YAML file:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"networks"}),": All containers are placed in the same Docker network, allowing them to communicate with each other internally without interruption."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"deploy.placement.constrains"}),": We explicitly specify the node group where containers are deployed. This ensures that manager nodes are not overloaded with user workloads and allows future separation of workloads by introducing specialized worker pools, such as GPU or ARM-based nodes."]}),"\n"]})]}),"\n",(0,t.jsxs)(n.p,{children:["Next thing you need to do is set the environment variables required on project, environment or service level. For more details on how Dokploy is handling enviroment variables see ",(0,t.jsx)(n.a,{href:"https://docs.dokploy.com/docs/core/variables",children:"Environment Variables"})," in the official Dokploy documentation."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:s(88038).A+"",width:"1912",height:"846"})}),"\n",(0,t.jsxs)(n.p,{children:["Then, go to ",(0,t.jsx)(n.em,{children:"Domains"})," and create 2 domains. One for the ",(0,t.jsx)(n.strong,{children:"typesense"})," service (set ",(0,t.jsx)(n.strong,{children:"Container Port"})," to 8108), and one for the ",(0,t.jsx)(n.strong,{children:"typesense-dashboard"})," service ((set ",(0,t.jsx)(n.strong,{children:"Container Port"})," to 8108)."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:s(45422).A+"",width:"1913",height:"847"})}),"\n",(0,t.jsx)(n.p,{children:"If the configuration is correct, all containers should be deployed on the worker nodes of the swarm and we could now visit the dashboard endpoint and observe our search engine collections and indices getting populated:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:s(92746).A+"",width:"1912",height:"846"})}),"\n",(0,t.jsx)(n.h2,{id:"deploying-from-a-dokploy-template",children:"Deploying from a Dokploy Template"}),"\n",(0,t.jsx)(n.p,{children:"The Dokploy template library provides a collection of preconfigured application stacks that can be deployed with minimal setup. Templates cover common services such as databases, monitoring tools, and developer utilities, offering sensible defaults that reduce configuration effort and errors. They can be used directly for quick deployments or extended with custom settings for production environments. Teams may also add their own templates to the library to standardize and simplify application delivery across projects."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"img",src:s(29175).A+"",width:"1912",height:"846"})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["Most templates in the Dokploy library are designed for single-server setups. When running on Docker Swarm, you ",(0,t.jsx)(n.strong,{children:"may"})," need to adjust them to ensure they work reliably in a clustered environment."]})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},65923:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/Screenshot_from_2025-09-26_08-56-01-d62d6f4f290c63916e218f40be76bbc4.png"},17776:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/Screenshot_from_2025-09-26_09-19-51-7bf76f5dd08fc0e3cf394900ffbcd4d9.png"},11375:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/Screenshot_from_2025-09-26_09-26-14-55e22ac3ca0f0245bd44c82ac2bfd36e.png"},62311:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/Screenshot_from_2025-09-26_09-41-40-5c3192d6b516e0ec3d3bb22a90729833.png"},45422:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/Screenshot_from_2025-09-26_11-11-43-63b7ca41d02d8fe5df187f9fe03ec010.png"},92746:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/Screenshot_from_2025-09-26_12-09-05-14bc1ceacdda66c68f58c9aeb4baefa8.png"},88038:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/Screenshot_from_2025-09-26_12-18-32-de3d1d686301d70c2b25adcbffd724fb.png"},29175:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/Screenshot_from_2025-09-26_13-57-42-407cbdffd049fa1a5dcd8df07fd3859d.png"},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var o=s(96540);const t={},i=o.createContext(t);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);